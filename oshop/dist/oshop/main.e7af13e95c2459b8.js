"use strict";(self.webpackChunkoshop=self.webpackChunkoshop||[]).push([[179],{2011:(ft,Ce,P)=>{P.d(Ce,{Dh:()=>he,GT:()=>de,cc:()=>xe,hO:()=>Le,on:()=>H,pX:()=>oe,xv:()=>fe});var d=P(4650),X=P(9260),k=P(2122);ft=P.hmd(ft);const se=["ngOnDestroy"],oe=(pe,it,dt,Ne={})=>new Proxy(pe,{get:(be,Ee)=>dt.runOutsideAngular(()=>{var je;if(pe[Ee])return!(null===(je=Ne?.spy)||void 0===je)&&je.get&&Ne.spy.get(Ee,pe[Ee]),pe[Ee];if(se.indexOf(Ee)>-1)return()=>{};const We=it.toPromise().then(U=>{const me=U&&U[Ee];return"function"==typeof me?me.bind(U):me&&me.then?me.then(z=>dt.run(()=>z)):dt.run(()=>me)});return new Proxy(()=>{},{get:(U,me)=>We[me],apply:(U,me,z)=>We.then(J=>{var ie;const ne=J&&J(...z);return!(null===(ie=Ne?.spy)||void 0===ie)&&ie.apply&&Ne.spy.apply(Ee,z,ne),ne})})})}),de=(pe,it)=>{it.forEach(dt=>{Object.getOwnPropertyNames(dt.prototype||dt).forEach(Ne=>{Object.defineProperty(pe.prototype,Ne,Object.getOwnPropertyDescriptor(dt.prototype||dt,Ne))})})};class ce{constructor(it){return it}}const he=new d.OlP("angularfire2.app.options"),fe=new d.OlP("angularfire2.app.name");function H(pe,it,dt){const be="object"==typeof dt&&dt||{};be.name=be.name||"string"==typeof dt&&dt||"[DEFAULT]";const je=X.Z.apps.filter(We=>We&&We.name===be.name)[0]||it.runOutsideAngular(()=>X.Z.initializeApp(pe,be));try{JSON.stringify(pe)!==JSON.stringify(je.options)&&j("error",`${je.name} Firebase App already initialized with different options${ft.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ce(je)}const j=(pe,...it)=>{(0,d.X6Q)()&&typeof console<"u"&&console[pe](...it)},K={provide:ce,useFactory:H,deps:[he,d.R0b,[new d.FiY,fe]]};let Le=(()=>{class pe{constructor(dt){X.Z.registerVersion("angularfire",k.q4.full,"core"),X.Z.registerVersion("angularfire",k.q4.full,"app-compat"),X.Z.registerVersion("angular",d.q4F.full,dt.toString())}static initializeApp(dt,Ne){return{ngModule:pe,providers:[{provide:he,useValue:dt},{provide:fe,useValue:Ne}]}}}return pe.\u0275fac=function(dt){return new(dt||pe)(d.LFG(d.Lbi))},pe.\u0275mod=d.oAB({type:pe}),pe.\u0275inj=d.cJS({providers:[K]}),pe})();function xe(pe,it,dt,Ne,be){const[,Ee,je]=globalThis.\u0275AngularfireInstanceCache.find(We=>We[0]===pe)||[];if(Ee)return function De(pe,it){try{return pe.toString()===it.toString()}catch{return pe===it}}(be,je)||(ye("error",`${it} was already initialized on the ${dt} Firebase App with different settings.${lt?" You may need to reload as Firebase is not HMR aware.":""}`),ye("warn",{is:be,was:je})),Ee;{const We=Ne();return globalThis.\u0275AngularfireInstanceCache.push([pe,We,be]),We}}const lt=!!ft.hot,ye=(pe,...it)=>{(0,d.X6Q)()&&typeof console<"u"&&console[pe](...it)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(ft,Ce,P)=>{P.d(Ce,{q4:()=>ai,iC:()=>Xi,fc:()=>sa,HU:()=>ra,vb:()=>Tt,JM:()=>wi});var d=P(4650),X=P(259),k=P(5861),se=P(9681),oe=P(2090),de=P(4859),ce=P(1877),he=P(8766);const fe="@firebase/installations",H="0.6.0",K=`w:${H}`,Le="FIS_v2",it=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function dt(I){return I instanceof oe.ZR&&I.code.includes("request-failed")}function Ne({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function be(I){return{token:I.token,requestStatus:2,expiresIn:J(I.expiresIn),creationTime:Date.now()}}function Ee(I,T){return je.apply(this,arguments)}function je(){return(je=(0,k.Z)(function*(I,T){const L=(yield T.json()).error;return it.create("request-failed",{requestName:I,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function We({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function U(I,{refreshToken:T}){const x=We(I);return x.append("Authorization",function ie(I){return`${Le} ${I}`}(T)),x}function me(I){return z.apply(this,arguments)}function z(){return(z=(0,k.Z)(function*(I){const T=yield I();return T.status>=500&&T.status<600?I():T})).apply(this,arguments)}function J(I){return Number(I.replace("s","000"))}function ne(I,T){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,k.Z)(function*({appConfig:I,heartbeatServiceProvider:T},{fid:x}){const L=Ne(I),Y=We(I),re=T.getImmediate({optional:!0});if(re){const ht=yield re.getHeartbeatsHeader();ht&&Y.append("x-firebase-client",ht)}const nt={method:"POST",headers:Y,body:JSON.stringify({fid:x,authVersion:Le,appId:I.appId,sdkVersion:K})},Qe=yield me(()=>fetch(L,nt));if(Qe.ok){const ht=yield Qe.json();return{fid:ht.fid||x,registrationStatus:2,refreshToken:ht.refreshToken,authToken:be(ht.authToken)}}throw yield Ee("Create Installation",Qe)})).apply(this,arguments)}function ke(I){return new Promise(T=>{setTimeout(T,I)})}const tn=/^[cdef][\w-]{21}$/;function et(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const x=function ln(I){return function _t(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return tn.test(x)?x:""}catch{return""}}function bn(I){return`${I.appName}!${I.appId}`}const Zt=new Map;function nn(I,T){const x=bn(I);dn(x,T),function cs(I,T){const x=function zr(){return!Oi&&"BroadcastChannel"in self&&(Oi=new BroadcastChannel("[Firebase] FID Change"),Oi.onmessage=I=>{dn(I.data.key,I.data.fid)}),Oi}();x&&x.postMessage({key:I,fid:T}),function ti(){0===Zt.size&&Oi&&(Oi.close(),Oi=null)}()}(x,T)}function dn(I,T){const x=Zt.get(I);if(x)for(const L of x)L(T)}let Oi=null;const pi="firebase-installations-store";let gi=null;function ka(){return gi||(gi=(0,he.X3)("firebase-installations-database",1,{upgrade:(I,T)=>{0===T&&I.createObjectStore(pi)}})),gi}function tt(I,T){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,k.Z)(function*(I,T){const x=bn(I),Y=(yield ka()).transaction(pi,"readwrite"),re=Y.objectStore(pi),Se=yield re.get(x);return yield re.put(T,x),yield Y.done,(!Se||Se.fid!==T.fid)&&nn(I,T.fid),T})).apply(this,arguments)}function Hs(I){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,k.Z)(function*(I){const T=bn(I),L=(yield ka()).transaction(pi,"readwrite");yield L.objectStore(pi).delete(T),yield L.done})).apply(this,arguments)}function mi(I,T){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,k.Z)(function*(I,T){const x=bn(I),Y=(yield ka()).transaction(pi,"readwrite"),re=Y.objectStore(pi),Se=yield re.get(x),nt=T(Se);return void 0===nt?yield re.delete(x):yield re.put(nt,x),yield Y.done,nt&&(!Se||Se.fid!==nt.fid)&&nn(I,nt.fid),nt})).apply(this,arguments)}function Pn(I){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,k.Z)(function*(I){let T;const x=yield mi(I.appConfig,L=>{const Y=gn(L),re=wt(I,Y);return T=re.registrationPromise,re.installationEntry});return""===x.fid?{installationEntry:yield T}:{installationEntry:x,registrationPromise:T}})).apply(this,arguments)}function gn(I){return Ot(I||{fid:et(),registrationStatus:0})}function wt(I,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(it.create("app-offline"))};const x={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},L=function pt(I,T){return an.apply(this,arguments)}(I,x);return{installationEntry:x,registrationPromise:L}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:Er(I)}:{installationEntry:T}}function an(){return(an=(0,k.Z)(function*(I,T){try{const x=yield ne(I,T);return tt(I.appConfig,x)}catch(x){throw dt(x)&&409===x.customData.serverCode?yield Hs(I.appConfig):yield tt(I.appConfig,{fid:T.fid,registrationStatus:0}),x}})).apply(this,arguments)}function Er(I){return zn.apply(this,arguments)}function zn(){return(zn=(0,k.Z)(function*(I){let T=yield ni(I.appConfig);for(;1===T.registrationStatus;)yield ke(100),T=yield ni(I.appConfig);if(0===T.registrationStatus){const{installationEntry:x,registrationPromise:L}=yield Pn(I);return L||x}return T})).apply(this,arguments)}function ni(I){return mi(I,T=>{if(!T)throw it.create("installation-not-found");return Ot(T)})}function Ot(I){return function js(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function rn(I,T){return zi.apply(this,arguments)}function zi(){return(zi=(0,k.Z)(function*({appConfig:I,heartbeatServiceProvider:T},x){const L=sn(I,x),Y=U(I,x),re=T.getImmediate({optional:!0});if(re){const ht=yield re.getHeartbeatsHeader();ht&&Y.append("x-firebase-client",ht)}const nt={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:K,appId:I.appId}})},Qe=yield me(()=>fetch(L,nt));if(Qe.ok)return be(yield Qe.json());throw yield Ee("Generate Auth Token",Qe)})).apply(this,arguments)}function sn(I,{fid:T}){return`${Ne(I)}/${T}/authTokens:generate`}function Qn(I){return qr.apply(this,arguments)}function qr(){return(qr=(0,k.Z)(function*(I,T=!1){let x;const L=yield mi(I.appConfig,re=>{if(!Ut(re))throw it.create("not-registered");const Se=re.authToken;if(!T&&G(Se))return re;if(1===Se.requestStatus)return x=ot(I,T),re;{if(!navigator.onLine)throw it.create("app-offline");const nt=q(re);return x=xt(I,nt),nt}});return x?yield x:L.authToken})).apply(this,arguments)}function ot(I,T){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,k.Z)(function*(I,T){let x=yield st(I.appConfig);for(;1===x.authToken.requestStatus;)yield ke(100),x=yield st(I.appConfig);const L=x.authToken;return 0===L.requestStatus?Qn(I,T):L})).apply(this,arguments)}function st(I){return mi(I,T=>{if(!Ut(T))throw it.create("not-registered");return function we(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function xt(I,T){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,k.Z)(function*(I,T){try{const x=yield rn(I,T),L=Object.assign(Object.assign({},T),{authToken:x});return yield tt(I.appConfig,L),x}catch(x){if(!dt(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const L=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield tt(I.appConfig,L)}else yield Hs(I.appConfig);throw x}})).apply(this,arguments)}function Ut(I){return void 0!==I&&2===I.registrationStatus}function G(I){return 2===I.requestStatus&&!function B(I){const T=Date.now();return T<I.creationTime||I.creationTime+I.expiresIn<T+36e5}(I)}function q(I){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:T})}function Ke(){return(Ke=(0,k.Z)(function*(I){const T=I,{installationEntry:x,registrationPromise:L}=yield Pn(T);return L?L.catch(console.error):Qn(T).catch(console.error),x.fid})).apply(this,arguments)}function Yt(){return(Yt=(0,k.Z)(function*(I,T=!1){const x=I;return yield fn(x),(yield Qn(x,T)).token})).apply(this,arguments)}function fn(I){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,k.Z)(function*(I){const{registrationPromise:T}=yield Pn(I);T&&(yield T)})).apply(this,arguments)}function Gs(I){return it.create("missing-app-config-values",{valueName:I})}const jo="installations",Dn=I=>{const T=I.getProvider("app").getImmediate(),x=function wn(I){if(!I||!I.options)throw Gs("App Configuration");if(!I.name)throw Gs("App Name");const T=["projectId","apiKey","appId"];for(const x of T)if(!I.options[x])throw Gs(x);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(T);return{app:T,appConfig:x,heartbeatServiceProvider:(0,se._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},po=I=>{const T=I.getProvider("app").getImmediate(),x=(0,se._getProvider)(T,jo).getImmediate();return{getId:()=>function Q(I){return Ke.apply(this,arguments)}(x),getToken:Y=>function yt(I){return Yt.apply(this,arguments)}(x,Y)}};(function Vl(){(0,se._registerComponent)(new de.wA(jo,Dn,"PUBLIC")),(0,se._registerComponent)(new de.wA("installations-internal",po,"PRIVATE"))})(),(0,se.registerVersion)(fe,H),(0,se.registerVersion)(fe,H,"esm2017");const qi="@firebase/remote-config",Kn=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Lf{constructor(T,x,L,Y){this.client=T,this.storage=x,this.storageCache=L,this.logger=Y}isCachedDataFresh(T,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-x,Y=L<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${Y}.`),Y}fetch(T){var x=this;return(0,k.Z)(function*(){const[L,Y]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(Y&&x.isCachedDataFresh(T.cacheMaxAgeMillis,L))return Y;T.eTag=Y&&Y.eTag;const re=yield x.client.fetch(T),Se=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===re.status&&Se.push(x.storage.setLastSuccessfulFetchResponse(re)),yield Promise.all(Se),re})()}}function mo(I=navigator){return I.languages&&I.languages[0]||I.language}class uc{constructor(T,x,L,Y,re,Se){this.firebaseInstallations=T,this.sdkVersion=x,this.namespace=L,this.projectId=Y,this.apiKey=re,this.appId=Se}fetch(T){var x=this;return(0,k.Z)(function*(){const[L,Y]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Se=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,nt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},Qe={sdk_version:x.sdkVersion,app_instance_id:L,app_instance_id_token:Y,app_id:x.appId,language_code:mo()},ht={method:"POST",headers:nt,body:JSON.stringify(Qe)},Vt=fetch(Se,ht),St=new Promise((Sr,rr)=>{T.signal.addEventListener(()=>{const rl=new Error("The operation was aborted.");rl.name="AbortError",rr(rl)})});let Hn;try{yield Promise.race([Vt,St]),Hn=yield Vt}catch(Sr){let rr="fetch-client-network";throw"AbortError"===Sr?.name&&(rr="fetch-timeout"),Kn.create(rr,{originalErrorMessage:Sr?.message})}let En=Hn.status;const Vr=Hn.headers.get("ETag")||void 0;let aa,la;if(200===Hn.status){let Sr;try{Sr=yield Hn.json()}catch(rr){throw Kn.create("fetch-client-parse",{originalErrorMessage:rr?.message})}aa=Sr.entries,la=Sr.state}if("INSTANCE_STATE_UNSPECIFIED"===la?En=500:"NO_CHANGE"===la?En=304:("NO_TEMPLATE"===la||"EMPTY_CONFIG"===la)&&(aa={}),304!==En&&200!==En)throw Kn.create("fetch-status",{httpStatus:En});return{status:En,eTag:Vr,config:aa}})()}}class jg{constructor(T,x){this.client=T,this.storage=x}fetch(T){var x=this;return(0,k.Z)(function*(){const L=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(T,L)})()}attemptFetch(T,{throttleEndTimeMillis:x,backoffCount:L}){var Y=this;return(0,k.Z)(function*(){yield function Xn(I,T){return new Promise((x,L)=>{const Y=Math.max(T-Date.now(),0),re=setTimeout(x,Y);I.addEventListener(()=>{clearTimeout(re),L(Kn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,x);try{const re=yield Y.client.fetch(T);return yield Y.storage.deleteThrottleMetadata(),re}catch(re){if(!function Rd(I){if(!(I instanceof oe.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}(re))throw re;const Se={throttleEndTimeMillis:Date.now()+(0,oe.$s)(L),backoffCount:L+1};return yield Y.storage.setThrottleMetadata(Se),Y.attemptFetch(T,Se)}})()}}class kd{constructor(T,x,L,Y,re){this.app=T,this._client=x,this._storageCache=L,this._storage=Y,this._logger=re,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function cc(I,T){const x=I.target.error||void 0;return Kn.create(T,{originalErrorMessage:x&&x?.message})}const qs="app_namespace_store";class zg{constructor(T,x,L,Y=function Wg(){return new Promise((I,T)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=L=>{T(cc(L,"storage-open"))},x.onsuccess=L=>{I(L.target.result)},x.onupgradeneeded=L=>{0===L.oldVersion&&L.target.result.createObjectStore(qs,{keyPath:"compositeKey"})}}catch(x){T(Kn.create("storage-open",{originalErrorMessage:x?.message}))}})}()){this.appId=T,this.appName=x,this.namespace=L,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var x=this;return(0,k.Z)(function*(){const L=yield x.openDbPromise;return new Promise((Y,re)=>{const nt=L.transaction([qs],"readonly").objectStore(qs),Qe=x.createCompositeKey(T);try{const ht=nt.get(Qe);ht.onerror=Vt=>{re(cc(Vt,"storage-get"))},ht.onsuccess=Vt=>{const St=Vt.target.result;Y(St?St.value:void 0)}}catch(ht){re(Kn.create("storage-get",{originalErrorMessage:ht?.message}))}})})()}set(T,x){var L=this;return(0,k.Z)(function*(){const Y=yield L.openDbPromise;return new Promise((re,Se)=>{const Qe=Y.transaction([qs],"readwrite").objectStore(qs),ht=L.createCompositeKey(T);try{const Vt=Qe.put({compositeKey:ht,value:x});Vt.onerror=St=>{Se(cc(St,"storage-set"))},Vt.onsuccess=()=>{re()}}catch(Vt){Se(Kn.create("storage-set",{originalErrorMessage:Vt?.message}))}})})()}delete(T){var x=this;return(0,k.Z)(function*(){const L=yield x.openDbPromise;return new Promise((Y,re)=>{const nt=L.transaction([qs],"readwrite").objectStore(qs),Qe=x.createCompositeKey(T);try{const ht=nt.delete(Qe);ht.onerror=Vt=>{re(cc(Vt,"storage-delete"))},ht.onsuccess=()=>{Y()}}catch(ht){re(Kn.create("storage-delete",{originalErrorMessage:ht?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Fd{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,k.Z)(function*(){const x=T.storage.getLastFetchStatus(),L=T.storage.getLastSuccessfulFetchTimestampMillis(),Y=T.storage.getActiveConfig(),re=yield x;re&&(T.lastFetchStatus=re);const Se=yield L;Se&&(T.lastSuccessfulFetchTimestampMillis=Se);const nt=yield Y;nt&&(T.activeConfig=nt)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Hl(){return Vf.apply(this,arguments)}function Vf(){return(Vf=(0,k.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}!function Ks(){(0,se._registerComponent)(new de.wA("remote-config",function I(T,{instanceIdentifier:x}){const L=T.getProvider("app").getImmediate(),Y=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Kn.create("registration-window");if(!(0,oe.hl)())throw Kn.create("indexed-db-unavailable");const{projectId:re,apiKey:Se,appId:nt}=L.options;if(!re)throw Kn.create("registration-project-id");if(!Se)throw Kn.create("registration-api-key");if(!nt)throw Kn.create("registration-app-id");const Qe=new zg(nt,L.name,x=x||"firebase"),ht=new Fd(Qe),Vt=new ce.Yd(qi);Vt.logLevel=ce.in.ERROR;const St=new uc(Y,se.SDK_VERSION,x,re,Se,nt),Hn=new jg(St,Qe),En=new Lf(Hn,Qe,ht,Vt),Vr=new kd(L,En,ht,Qe,Vt);return function Fn(I){const T=(0,oe.m9)(I);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Vr),Vr},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(qi,"0.4.0"),(0,se.registerVersion)(qi,"0.4.0","esm2017")}();const Zi="/firebase-messaging-sw.js",hs="/firebase-cloud-messaging-push-scope",fs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",La="google.c.a.c_id",jl="google.c.a.c_l",dc="google.c.a.ts",Bf="google.c.a.e";var ps=(()=>{return(I=ps||(ps={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",ps;var I})();function _i(I){const T=new Uint8Array(I);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ii(I){const x=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(x),Y=new Uint8Array(L.length);for(let re=0;re<L.length;++re)Y[re]=L.charCodeAt(re);return Y}const Go="fcm_token_details_db",Cr="fcm_token_object_Store";function Uf(I){return Hf.apply(this,arguments)}function Hf(){return Hf=(0,k.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(re=>re.name).includes(Go))return null;let T=null;return(yield(0,he.X3)(Go,5,{upgrade:(L=(0,k.Z)(function*(Y,re,Se,nt){var Qe;if(re<2||!Y.objectStoreNames.contains(Cr))return;const ht=nt.objectStore(Cr),Vt=yield ht.index("fcmSenderId").get(I);if(yield ht.clear(),Vt)if(2===re){const St=Vt;if(!St.auth||!St.p256dh||!St.endpoint)return;T={token:St.fcmToken,createTime:null!==(Qe=St.createTime)&&void 0!==Qe?Qe:Date.now(),subscriptionOptions:{auth:St.auth,p256dh:St.p256dh,endpoint:St.endpoint,swScope:St.swScope,vapidKey:"string"==typeof St.vapidKey?St.vapidKey:_i(St.vapidKey)}}}else if(3===re){const St=Vt;T={token:St.fcmToken,createTime:St.createTime,subscriptionOptions:{auth:_i(St.auth),p256dh:_i(St.p256dh),endpoint:St.endpoint,swScope:St.swScope,vapidKey:_i(St.vapidKey)}}}else if(4===re){const St=Vt;T={token:St.fcmToken,createTime:St.createTime,subscriptionOptions:{auth:_i(St.auth),p256dh:_i(St.p256dh),endpoint:St.endpoint,swScope:St.swScope,vapidKey:_i(St.vapidKey)}}}}),function(re,Se,nt,Qe){return L.apply(this,arguments)})})).close(),yield(0,he.Lj)(Go),yield(0,he.Lj)("fcm_vapid_details_db"),yield(0,he.Lj)("undefined"),Nn(T)?T:null;var L}),Hf.apply(this,arguments)}function Nn(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:T}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const yi="firebase-messaging-store";let Lr=null;function $l(){return Lr||(Lr=(0,he.X3)("firebase-messaging-database",1,{upgrade:(I,T)=>{0===T&&I.createObjectStore(yi)}})),Lr}function $o(I){return gs.apply(this,arguments)}function gs(){return(gs=(0,k.Z)(function*(I){const T=Pi(I),L=yield(yield $l()).transaction(yi).objectStore(yi).get(T);if(L)return L;{const Y=yield Uf(I.appConfig.senderId);if(Y)return yield zt(I,Y),Y}})).apply(this,arguments)}function zt(I,T){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,k.Z)(function*(I,T){const x=Pi(I),Y=(yield $l()).transaction(yi,"readwrite");return yield Y.objectStore(yi).put(T,x),yield Y.done,T})).apply(this,arguments)}function yo(I){return zl.apply(this,arguments)}function zl(){return(zl=(0,k.Z)(function*(I){const T=Pi(I),L=(yield $l()).transaction(yi,"readwrite");yield L.objectStore(yi).delete(T),yield L.done})).apply(this,arguments)}function Pi({appConfig:I}){return I.appId}const Cn=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Mt(I,T){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,k.Z)(function*(I,T){const x=yield pc(I),L=Te(T),Y={method:"POST",headers:x,body:JSON.stringify(L)};let re;try{re=yield(yield fetch(ms(I.appConfig),Y)).json()}catch(Se){throw Cn.create("token-subscribe-failed",{errorInfo:Se?.toString()})}if(re.error)throw Cn.create("token-subscribe-failed",{errorInfo:re.error.message});if(!re.token)throw Cn.create("token-subscribe-no-token");return re.token})).apply(this,arguments)}function Gf(I,T){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,k.Z)(function*(I,T){const x=yield pc(I),L=Te(T.subscriptionOptions),Y={method:"PATCH",headers:x,body:JSON.stringify(L)};let re;try{re=yield(yield fetch(`${ms(I.appConfig)}/${T.token}`,Y)).json()}catch(Se){throw Cn.create("token-update-failed",{errorInfo:Se?.toString()})}if(re.error)throw Cn.create("token-update-failed",{errorInfo:re.error.message});if(!re.token)throw Cn.create("token-update-no-token");return re.token})).apply(this,arguments)}function Yl(I,T){return fc.apply(this,arguments)}function fc(){return(fc=(0,k.Z)(function*(I,T){const L={method:"DELETE",headers:yield pc(I)};try{const re=yield(yield fetch(`${ms(I.appConfig)}/${T}`,L)).json();if(re.error)throw Cn.create("token-unsubscribe-failed",{errorInfo:re.error.message})}catch(Y){throw Cn.create("token-unsubscribe-failed",{errorInfo:Y?.toString()})}})).apply(this,arguments)}function ms({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function pc(I){return Va.apply(this,arguments)}function Va(){return(Va=(0,k.Z)(function*({appConfig:I,installations:T}){const x=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Te({p256dh:I,auth:T,endpoint:x,vapidKey:L}){const Y={web:{endpoint:x,auth:T,p256dh:I}};return L!==fs&&(Y.web.applicationPubKey=L),Y}const Gt=6048e5;function Ql(I){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,k.Z)(function*(I){const T=yield gc(I.swRegistration,I.vapidKey),x={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:T.endpoint,auth:_i(T.getKey("auth")),p256dh:_i(T.getKey("p256dh"))},L=yield $o(I.firebaseDependencies);if(L){if(Bd(L.subscriptionOptions,x))return Date.now()>=L.createTime+Gt?Wo(I,{token:L.token,createTime:Date.now(),subscriptionOptions:x}):L.token;try{yield Yl(I.firebaseDependencies,L.token)}catch(Y){console.warn(Y)}return Ba(I.firebaseDependencies,x)}return Ba(I.firebaseDependencies,x)})).apply(this,arguments)}function An(I){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,k.Z)(function*(I){const T=yield $o(I.firebaseDependencies);T&&(yield Yl(I.firebaseDependencies,T.token),yield yo(I.firebaseDependencies));const x=yield I.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Wo(I,T){return vi.apply(this,arguments)}function vi(){return(vi=(0,k.Z)(function*(I,T){try{const x=yield Gf(I.firebaseDependencies,T),L=Object.assign(Object.assign({},T),{token:x,createTime:Date.now()});return yield zt(I.firebaseDependencies,L),x}catch(x){throw yield An(I),x}})).apply(this,arguments)}function Ba(I,T){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,k.Z)(function*(I,T){const L={token:yield Mt(I,T),createTime:Date.now(),subscriptionOptions:T};return yield zt(I,L),L.token})).apply(this,arguments)}function gc(I,T){return mc.apply(this,arguments)}function mc(){return(mc=(0,k.Z)(function*(I,T){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ii(T)})})).apply(this,arguments)}function Bd(I,T){return T.vapidKey===I.vapidKey&&T.endpoint===I.endpoint&&T.auth===I.auth&&T.p256dh===I.p256dh}function Ha(I){const T={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function xn(I,T){if(!T.notification)return;I.notification={};const x=T.notification.title;x&&(I.notification.title=x);const L=T.notification.body;L&&(I.notification.body=L);const Y=T.notification.image;Y&&(I.notification.image=Y);const re=T.notification.icon;re&&(I.notification.icon=re)}(T,I),function Yi(I,T){!T.data||(I.data=T.data)}(T,I),function _c(I,T){var x,L,Y,re,Se;if(!(T.fcmOptions||null!==(x=T.notification)&&void 0!==x&&x.click_action))return;I.fcmOptions={};const nt=null!==(Y=null===(L=T.fcmOptions)||void 0===L?void 0:L.link)&&void 0!==Y?Y:null===(re=T.notification)||void 0===re?void 0:re.click_action;nt&&(I.fcmOptions.link=nt);const Qe=null===(Se=T.fcmOptions)||void 0===Se?void 0:Se.analytics_label;Qe&&(I.fcmOptions.analyticsLabel=Qe)}(T,I),T}function vo(I){return"object"==typeof I&&!!I&&La in I}function _s(I,T){const x=[];for(let L=0;L<I.length;L++)x.push(I.charAt(L)),L<T.length&&x.push(T.charAt(L));return x.join("")}function ja(I){return Cn.create("missing-app-config-values",{valueName:I})}_s("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),_s("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Kg{constructor(T,x,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function qg(I){if(!I||!I.options)throw ja("App Configuration Object");if(!I.name)throw ja("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:x}=I;for(const L of T)if(!x[L])throw ja(L);return{appName:I.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:Y,installations:x,analyticsProvider:L}}_delete(){return Promise.resolve()}}function yc(I){return eu.apply(this,arguments)}function eu(){return(eu=(0,k.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(Zi,{scope:hs}),I.swRegistration.update().catch(()=>{})}catch(T){throw Cn.create("failed-service-worker-registration",{browserErrorMessage:T?.message})}})).apply(this,arguments)}function Ga(I,T){return vc.apply(this,arguments)}function vc(){return(vc=(0,k.Z)(function*(I,T){if(!T&&!I.swRegistration&&(yield yc(I)),T||!I.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Cn.create("invalid-sw-registration");I.swRegistration=T}})).apply(this,arguments)}function $a(I,T){return bc.apply(this,arguments)}function bc(){return(bc=(0,k.Z)(function*(I,T){T?I.vapidKey=T:I.vapidKey||(I.vapidKey=fs)})).apply(this,arguments)}function nu(){return(nu=(0,k.Z)(function*(I,T){if(!navigator)throw Cn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Cn.create("permission-blocked");return yield $a(I,T?.vapidKey),yield Ga(I,T?.serviceWorkerRegistration),Ql(I)})).apply(this,arguments)}function wc(I,T,x){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,k.Z)(function*(I,T,x){const L=Ec(T);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:x[La],message_name:x[jl],message_time:x[dc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ec(I){switch(I){case ps.NOTIFICATION_CLICKED:return"notification_open";case ps.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function bo(){return(bo=(0,k.Z)(function*(I,T){const x=T.data;if(!x.isFirebaseMessaging)return;I.onMessageHandler&&x.messageType===ps.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Ha(x)):I.onMessageHandler.next(Ha(x)));const L=x.data;vo(L)&&"1"===L[Bf]&&(yield wc(I,x.messageType,L))})).apply(this,arguments)}const wo="@firebase/messaging",er=I=>{const T=new Kg(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Ud(I,T){return bo.apply(this,arguments)}(T,x)),T},si=I=>{const T=I.getProvider("messaging").getImmediate();return{getToken:L=>function tu(I,T){return nu.apply(this,arguments)}(T,L)}};function Hd(){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,k.Z)(function*(){try{yield(0,oe.eu)()}catch{return!1}return typeof window<"u"&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function mn(){(0,se._registerComponent)(new de.wA("messaging",er,"PUBLIC")),(0,se._registerComponent)(new de.wA("messaging-internal",si,"PRIVATE")),(0,se.registerVersion)(wo,"0.12.0"),(0,se.registerVersion)(wo,"0.12.0","esm2017")}();const qo="analytics",$d="firebase_id",Eo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ou="https://www.googletagmanager.com/gtag/js",Mn=new ce.Yd("@firebase/analytics");function au(I){return Promise.all(I.map(T=>T.catch(x=>x)))}function lu(I,T){const x=document.createElement("script");x.src=`${ou}?l=${I}&id=${T}`,x.async=!0,document.head.appendChild(x)}function Wf(I,T,x,L,Y,re){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,k.Z)(function*(I,T,x,L,Y,re){const Se=L[Y];try{if(Se)yield T[Se];else{const Qe=(yield au(x)).find(ht=>ht.measurementId===Y);Qe&&(yield T[Qe.appId])}}catch(nt){Mn.error(nt)}I("config",Y,re)})).apply(this,arguments)}function Zo(I,T,x,L,Y){return Io.apply(this,arguments)}function Io(){return(Io=(0,k.Z)(function*(I,T,x,L,Y){try{let re=[];if(Y&&Y.send_to){let Se=Y.send_to;Array.isArray(Se)||(Se=[Se]);const nt=yield au(x);for(const Qe of Se){const ht=nt.find(St=>St.measurementId===Qe),Vt=ht&&T[ht.appId];if(!Vt){re=[];break}re.push(Vt)}}0===re.length&&(re=Object.values(T)),yield Promise.all(re),I("event",L,Y||{})}catch(re){Mn.error(re)}})).apply(this,arguments)}function zd(I){const T=window.document.getElementsByTagName("script");for(const x of Object.values(T))if(x.src&&x.src.includes(ou)&&x.src.includes(I))return x;return null}const _r=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ka=new class Qi{constructor(T={},x=1e3){this.throttleMetadata=T,this.intervalMillis=x}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,x){this.throttleMetadata[T]=x}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Kd(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Za(I){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,k.Z)(function*(I){var T;const{appId:x,apiKey:L}=I,Y={method:"GET",headers:Kd(L)},re=Eo.replace("{app-id}",x),Se=yield fetch(re,Y);if(200!==Se.status&&304!==Se.status){let nt="";try{const Qe=yield Se.json();null!==(T=Qe.error)&&void 0!==T&&T.message&&(nt=Qe.error.message)}catch{}throw _r.create("config-fetch-failed",{httpStatus:Se.status,responseMessage:nt})}return Se.json()})).apply(this,arguments)}function Ln(I){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,k.Z)(function*(I,T=Ka,x){const{appId:L,apiKey:Y,measurementId:re}=I.options;if(!L)throw _r.create("no-app-id");if(!Y){if(re)return{measurementId:re,appId:L};throw _r.create("no-api-key")}const Se=T.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},nt=new hu;return setTimeout((0,k.Z)(function*(){nt.abort()}),void 0!==x?x:6e4),cu({appId:L,apiKey:Y,measurementId:re},Se,nt,T)})).apply(this,arguments)}function cu(I,T,x){return Co.apply(this,arguments)}function Co(){return(Co=(0,k.Z)(function*(I,{throttleEndTimeMillis:T,backoffCount:x},L,Y=Ka){var re;const{appId:Se,measurementId:nt}=I;try{yield Ya(L,T)}catch(Qe){if(nt)return Mn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${nt} provided in the "measurementId" field in the local Firebase config. [${Qe?.message}]`),{appId:Se,measurementId:nt};throw Qe}try{const Qe=yield Za(I);return Y.deleteThrottleMetadata(Se),Qe}catch(Qe){const ht=Qe;if(!du(ht)){if(Y.deleteThrottleMetadata(Se),nt)return Mn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${nt} provided in the "measurementId" field in the local Firebase config. [${ht?.message}]`),{appId:Se,measurementId:nt};throw Qe}const Vt=503===Number(null===(re=ht?.customData)||void 0===re?void 0:re.httpStatus)?(0,oe.$s)(x,Y.intervalMillis,30):(0,oe.$s)(x,Y.intervalMillis),St={throttleEndTimeMillis:Date.now()+Vt,backoffCount:x+1};return Y.setThrottleMetadata(Se,St),Mn.debug(`Calling attemptFetch again in ${Vt} millis`),cu(I,St,L,Y)}})).apply(this,arguments)}function Ya(I,T){return new Promise((x,L)=>{const Y=Math.max(T-Date.now(),0),re=setTimeout(x,Y);I.addEventListener(()=>{clearTimeout(re),L(_r.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function du(I){if(!(I instanceof oe.ZR&&I.customData))return!1;const T=Number(I.customData.httpStatus);return 429===T||500===T||503===T||504===T}class hu{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Qs,Ja;function Js(){return(Js=(0,k.Z)(function*(I,T,x,L,Y){if(Y&&Y.global)I("event",x,L);else{const re=yield T;I("event",x,Object.assign(Object.assign({},L),{send_to:re}))}})).apply(this,arguments)}function So(I){Ja=I}function Ac(I){Qs=I}function vs(){return pu.apply(this,arguments)}function pu(){return(pu=(0,k.Z)(function*(){if(!(0,oe.hl)())return Mn.warn(_r.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(I){return Mn.warn(_r.create("indexeddb-unavailable",{errorInfo:I?.toString()}).message),!1}return!0})).apply(this,arguments)}function Jo(){return(Jo=(0,k.Z)(function*(I,T,x,L,Y,re,Se){var nt;const Qe=Ln(I);Qe.then(En=>{x[En.measurementId]=En.appId,I.options.measurementId&&En.measurementId!==I.options.measurementId&&Mn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${En.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(En=>Mn.error(En)),T.push(Qe);const ht=vs().then(En=>{if(En)return L.getId()}),[Vt,St]=yield Promise.all([Qe,ht]);zd(re)||lu(re,Vt.measurementId),Ja&&(Y("consent","default",Ja),So(void 0)),Y("js",new Date);const Hn=null!==(nt=Se?.config)&&void 0!==nt?nt:{};return Hn.origin="firebase",Hn.update=!0,null!=St&&(Hn[$d]=St),Y("config",Vt.measurementId,Hn),Qs&&(Y("set",Qs),Ac(void 0)),Vt.measurementId})).apply(this,arguments)}class gu{constructor(T){this.app=T}_delete(){return delete oi[this.app.options.appId],Promise.resolve()}}let oi={},Xs=[];const Xo={};let ta,No,ea="dataLayer",Xa=!1;function Ay(I,T,x){!function Zg(){const I=[];if((0,oe.ru)()&&I.push("This is a browser extension environment."),(0,oe.zI)()||I.push("Cookies are not available."),I.length>0){const T=I.map((L,Y)=>`(${Y+1}) ${L}`).join(" "),x=_r.create("invalid-analytics-context",{errorInfo:T});Mn.warn(x.message)}}();const L=I.options.appId;if(!L)throw _r.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw _r.create("no-api-key");Mn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=oi[L])throw _r.create("already-exists",{id:L});if(!Xa){!function Wd(I){let T=[];Array.isArray(window[I])?T=window[I]:window[I]=T}(ea);const{wrappedGtag:re,gtagCore:Se}=function Wa(I,T,x,L,Y){let re=function(...Se){window[L].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(re=window[Y]),window[Y]=function uu(I,T,x,L){function re(){return(re=(0,k.Z)(function*(Se,nt,Qe){try{"event"===Se?yield Zo(I,T,x,nt,Qe):"config"===Se?yield Wf(I,T,x,L,nt,Qe):"consent"===Se?I("consent","update",Qe):I("set",nt)}catch(ht){Mn.error(ht)}})).apply(this,arguments)}return function Y(Se,nt,Qe){return re.apply(this,arguments)}}(re,I,T,x),{gtagCore:re,wrappedGtag:window[Y]}}(oi,Xs,Xo,ea,"gtag");No=re,ta=Se,Xa=!0}return oi[L]=function Qo(I,T,x,L,Y,re,Se){return Jo.apply(this,arguments)}(I,Xs,Xo,T,ta,ea,x),new gu(I)}function My(){return zf.apply(this,arguments)}function zf(){return(zf=(0,k.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch{return!1}})).apply(this,arguments)}const Tr="@firebase/analytics";!function Vn(){(0,se._registerComponent)(new de.wA(qo,(T,{options:x})=>Ay(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,se._registerComponent)(new de.wA("analytics-internal",function I(T){try{const x=T.getProvider(qo).getImmediate();return{logEvent:(L,Y,re)=>function vr(I,T,x,L){I=(0,oe.m9)(I),function Zd(I,T,x,L,Y){return Js.apply(this,arguments)}(No,oi[I.app.options.appId],T,x,L).catch(Y=>Mn.error(Y))}(x,L,Y,re)}}catch(x){throw _r.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,se.registerVersion)(Tr,"0.9.0"),(0,se.registerVersion)(Tr,"0.9.0","esm2017")}();var Je=P(4408),Ji=P(7565);const to=new class eo extends Ji.v{}(class yn extends Je.o{constructor(T,x){super(T,x),this.scheduler=T,this.work=x}schedule(T,x=0){return x>0?super.schedule(T,x):(this.delay=x,this.state=T,this.scheduler.flush(this),this)}execute(T,x){return x>0||this.closed?super.execute(T,x):this._execute(T,x)}requestAsyncId(T,x,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(T,x,L):(T.flush(this),0)}});var ws=P(4986),pn=P(8505),Ds=P(5363),gt=P(9468);const ai=new d.GfV("7.5.0"),Es="__angularfire_symbol__analyticsIsSupportedValue",li="__angularfire_symbol__analyticsIsSupported",Ao="__angularfire_symbol__remoteConfigIsSupportedValue",el="__angularfire_symbol__remoteConfigIsSupported",Bn="__angularfire_symbol__messagingIsSupportedValue",Qd="__angularfire_symbol__messagingIsSupported";function wi(I,T,x){if(T){if(1===T.length)return T[0];const re=T.filter(Se=>Se.app===x);if(1===re.length)return re[0]}return x.container.getProvider(I).getImmediate({optional:!0})}globalThis[li]||(globalThis[li]=My().then(I=>globalThis[Es]=I).catch(()=>globalThis[Es]=!1)),globalThis[Qd]||(globalThis[Qd]=Hd().then(I=>globalThis[Bn]=I).catch(()=>globalThis[Bn]=!1)),globalThis[el]||(globalThis[el]=Hl().then(I=>globalThis[Ao]=I).catch(()=>globalThis[Ao]=!1));const Tt=(I,T)=>{const x=T?[T]:(0,X.C6)(),L=[];return x.forEach(Y=>{Y.container.getProvider(I).instances.forEach(Se=>{L.includes(Se)||L.push(Se)})}),L};function nl(){}class nr{constructor(T,x=to){this.zone=T,this.delegate=x}now(){return this.delegate.now()}schedule(T,x,L){const Y=this.zone;return this.delegate.schedule(function(Se){Y.runGuarded(()=>{T.apply(this,[Se])})},x,L)}}class ut{constructor(T){this.zone=T,this.task=null}call(T,x){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",nl,{},nl,nl)),x.pipe((0,pn.b)({next:L,complete:L,error:L})).subscribe(T).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ra=(()=>{class I{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new nr(Zone.current)),this.insideAngular=x.run(()=>new nr(Zone.current,ws.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(x){return new(x||I)(d.LFG(d.R0b))},I.\u0275prov=d.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Dt(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function sa(I){return I.pipe((0,Ds.Q)(Dt().outsideAngular))}function Xi(I){return Dt(),function Jd(I){return function(x){return(x=x.lift(new ut(I.ngZone))).pipe((0,gt.R)(I.outsideAngular),(0,Ds.Q)(I.insideAngular))}}(Dt())(I)}},2090:(ft,Ce,P)=>{P.d(Ce,{$s:()=>st,BH:()=>jt,G6:()=>Ee,L:()=>he,LL:()=>Zt,Pz:()=>tn,Sg:()=>et,UG:()=>De,US:()=>de,ZB:()=>j,ZR:()=>bn,aH:()=>_t,b$:()=>pe,eu:()=>We,hl:()=>je,jU:()=>lt,m9:()=>Ut,ne:()=>Wn,pd:()=>Wi,r3:()=>Ri,ru:()=>ye,tV:()=>fe,uI:()=>xe,vZ:()=>tt,w1:()=>dt,xO:()=>Yn,xb:()=>gi,z$:()=>Le,zI:()=>U,zd:()=>mi});const se=function(G){const B=[];let q=0;for(let we=0;we<G.length;we++){let Q=G.charCodeAt(we);Q<128?B[q++]=Q:Q<2048?(B[q++]=Q>>6|192,B[q++]=63&Q|128):55296==(64512&Q)&&we+1<G.length&&56320==(64512&G.charCodeAt(we+1))?(Q=65536+((1023&Q)<<10)+(1023&G.charCodeAt(++we)),B[q++]=Q>>18|240,B[q++]=Q>>12&63|128,B[q++]=Q>>6&63|128,B[q++]=63&Q|128):(B[q++]=Q>>12|224,B[q++]=Q>>6&63|128,B[q++]=63&Q|128)}return B},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(G,B){if(!Array.isArray(G))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,we=[];for(let Q=0;Q<G.length;Q+=3){const Ke=G[Q],yt=Q+1<G.length,Yt=yt?G[Q+1]:0,fn=Q+2<G.length,Wt=fn?G[Q+2]:0;let Ht=(15&Yt)<<2|Wt>>6,pr=63&Wt;fn||(pr=64,yt||(Ht=64)),we.push(q[Ke>>2],q[(3&Ke)<<4|Yt>>4],q[Ht],q[pr])}return we.join("")},encodeString(G,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa(G):this.encodeByteArray(se(G),B)},decodeString(G,B){return this.HAS_NATIVE_SUPPORT&&!B?atob(G):function(G){const B=[];let q=0,we=0;for(;q<G.length;){const Q=G[q++];if(Q<128)B[we++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const Ke=G[q++];B[we++]=String.fromCharCode((31&Q)<<6|63&Ke)}else if(Q>239&&Q<365){const fn=((7&Q)<<18|(63&G[q++])<<12|(63&G[q++])<<6|63&G[q++])-65536;B[we++]=String.fromCharCode(55296+(fn>>10)),B[we++]=String.fromCharCode(56320+(1023&fn))}else{const Ke=G[q++],yt=G[q++];B[we++]=String.fromCharCode((15&Q)<<12|(63&Ke)<<6|63&yt)}}return B.join("")}(this.decodeStringToByteArray(G,B))},decodeStringToByteArray(G,B){this.init_();const q=B?this.charToByteMapWebSafe_:this.charToByteMap_,we=[];for(let Q=0;Q<G.length;){const Ke=q[G.charAt(Q++)],Yt=Q<G.length?q[G.charAt(Q)]:0;++Q;const Wt=Q<G.length?q[G.charAt(Q)]:64;++Q;const qe=Q<G.length?q[G.charAt(Q)]:64;if(++Q,null==Ke||null==Yt||null==Wt||null==qe)throw Error();we.push(Ke<<2|Yt>>4),64!==Wt&&(we.push(Yt<<4&240|Wt>>2),64!==qe&&we.push(Wt<<6&192|qe))}return we},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let G=0;G<this.ENCODED_VALS.length;G++)this.byteToCharMap_[G]=this.ENCODED_VALS.charAt(G),this.charToByteMap_[this.byteToCharMap_[G]]=G,this.byteToCharMapWebSafe_[G]=this.ENCODED_VALS_WEBSAFE.charAt(G),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[G]]=G,G>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(G)]=G,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(G)]=G)}}},he=function(G){return function(G){const B=se(G);return de.encodeByteArray(B,!0)}(G).replace(/\./g,"")},fe=function(G){try{return de.decodeString(G,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function j(G,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===G&&(G={});break;case Array:G=[];break;default:return B}for(const q in B)!B.hasOwnProperty(q)||!K(q)||(G[q]=j(G[q],B[q]));return G}function K(G){return"__proto__"!==G}function Le(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function xe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function De(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function lt(){return"object"==typeof self&&self.self===self}function ye(){const G="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof G&&void 0!==G.id}function pe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function dt(){const G=Le();return G.indexOf("MSIE ")>=0||G.indexOf("Trident/")>=0}function Ee(){return!De()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function je(){try{return"object"==typeof indexedDB}catch{return!1}}function We(){return new Promise((G,B)=>{try{let q=!0;const we="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(we);Q.onsuccess=()=>{Q.result.close(),q||self.indexedDB.deleteDatabase(we),G(!0)},Q.onupgradeneeded=()=>{q=!1},Q.onerror=()=>{var Ke;B((null===(Ke=Q.error)||void 0===Ke?void 0:Ke.message)||"")}}catch(q){B(q)}})}function U(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ne=()=>{try{return function me(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const G=process.env.__FIREBASE_DEFAULTS__;return G?JSON.parse(G):void 0})()||(()=>{if(typeof document>"u")return;let G;try{G=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const B=G&&fe(G[1]);return B&&JSON.parse(B)})()}catch(G){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${G}`)}},_t=()=>{var G;return null===(G=ne())||void 0===G?void 0:G.config},tn=G=>{var B;return null===(B=ne())||void 0===B?void 0:B[`_${G}`]};class jt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,q)=>{this.resolve=B,this.reject=q})}wrapCallback(B){return(q,we)=>{q?this.reject(q):this.resolve(we),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(q):B(q,we))}}}function et(G,B){if(G.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const we=B||"demo-project",Q=G.iat||0,Ke=G.sub||G.user_id;if(!Ke)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const yt=Object.assign({iss:`https://securetoken.google.com/${we}`,aud:we,iat:Q,exp:Q+3600,auth_time:Q,sub:Ke,user_id:Ke,firebase:{sign_in_provider:"custom",identities:{}}},G);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(yt)),""].join(".")}class bn extends Error{constructor(B,q,we){super(q),this.code=B,this.customData=we,this.name="FirebaseError",Object.setPrototypeOf(this,bn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zt.prototype.create)}}class Zt{constructor(B,q,we){this.service=B,this.serviceName=q,this.errors=we}create(B,...q){const we=q[0]||{},Q=`${this.service}/${B}`,Ke=this.errors[B],yt=Ke?function nn(G,B){return G.replace(Wr,(q,we)=>{const Q=B[we];return null!=Q?String(Q):`<${we}?>`})}(Ke,we):"Error";return new bn(Q,`${this.serviceName}: ${yt} (${Q}).`,we)}}const Wr=/\{\$([^}]+)}/g;function Ri(G,B){return Object.prototype.hasOwnProperty.call(G,B)}function gi(G){for(const B in G)if(Object.prototype.hasOwnProperty.call(G,B))return!1;return!0}function tt(G,B){if(G===B)return!0;const q=Object.keys(G),we=Object.keys(B);for(const Q of q){if(!we.includes(Q))return!1;const Ke=G[Q],yt=B[Q];if(Pr(Ke)&&Pr(yt)){if(!tt(Ke,yt))return!1}else if(Ke!==yt)return!1}for(const Q of we)if(!q.includes(Q))return!1;return!0}function Pr(G){return null!==G&&"object"==typeof G}function Yn(G){const B=[];for(const[q,we]of Object.entries(G))Array.isArray(we)?we.forEach(Q=>{B.push(encodeURIComponent(q)+"="+encodeURIComponent(Q))}):B.push(encodeURIComponent(q)+"="+encodeURIComponent(we));return B.length?"&"+B.join("&"):""}function mi(G){const B={};return G.replace(/^\?/,"").split("&").forEach(we=>{if(we){const[Q,Ke]=we.split("=");B[decodeURIComponent(Q)]=decodeURIComponent(Ke)}}),B}function Wi(G){const B=G.indexOf("?");if(!B)return"";const q=G.indexOf("#",B);return G.substring(B,q>0?q:void 0)}function Wn(G,B){const q=new gn(G,B);return q.subscribe.bind(q)}class gn{constructor(B,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{B(this)}).catch(we=>{this.error(we)})}next(B){this.forEachObserver(q=>{q.next(B)})}error(B){this.forEachObserver(q=>{q.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,q,we){let Q;if(void 0===B&&void 0===q&&void 0===we)throw new Error("Missing Observer.");Q=function pt(G,B){if("object"!=typeof G||null===G)return!1;for(const q of B)if(q in G&&"function"==typeof G[q])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:q,complete:we},void 0===Q.next&&(Q.next=an),void 0===Q.error&&(Q.error=an),void 0===Q.complete&&(Q.complete=an);const Ke=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch{}}),this.observers.push(Q),Ke}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,B)}sendOne(B,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{q(this.observers[B])}catch(we){typeof console<"u"&&console.error&&console.error(we)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function an(){}function st(G,B=1e3,q=2){const we=B*Math.pow(q,G),Q=Math.round(.5*we*(Math.random()-.5)*2);return Math.min(144e5,we+Q)}function Ut(G){return G&&G._delegate?G._delegate:G}},5032:(ft,Ce,P)=>{var d=P(4650);let X=null;function k(){return X}const ce=new d.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function fe(){return(0,d.LFG)(j)}()},providedIn:"platform"}),n})();const H=new d.OlP("Location Initialized");let j=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){K()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){K()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Le(){return new j((0,d.LFG)(ce))}()},providedIn:"platform"}),n})();function K(){return!!window.history.pushState}function xe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function De(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function lt(n){return n&&"?"!==n[0]?"?"+n:n}let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(it)},providedIn:"root"}),n})();const pe=new d.OlP("appBaseHref");let it=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(ce).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+lt(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const c=this.prepareExternalUrl(i+lt(a));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){const c=this.prepareExternalUrl(i+lt(a));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(he),d.LFG(pe,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),dt=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=xe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let c=this.prepareExternalUrl(i+lt(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){let c=this.prepareExternalUrl(i+lt(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(he),d.LFG(pe,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ne=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=De(je(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+lt(r))}normalize(t){return n.stripTrailingSlash(function Ee(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,je(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+lt(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+lt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=lt,n.joinWithSlash=xe,n.stripTrailingSlash=De,n.\u0275fac=function(t){return new(t||n)(d.LFG(ye))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function be(){return new Ne((0,d.LFG)(ye))}()},providedIn:"root"}),n})();function je(n){return n.replace(/\/index.html$/,"")}let mr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function Cr(n){return"server"===n}let Gl=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new jf((0,d.LFG)(ce),window)}),n})();class jf{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Lr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const c=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=yi(this.window.history)||yi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function yi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class bo extends class Ud extends class de{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function oe(n){X||(X=n)}(new bo)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ru(){return wo=wo||document.querySelector("base"),wo?wo.getAttribute("href"):null}();return null==t?null:function si(n){er=er||document.createElement("a"),er.setAttribute("href",n);const e=er.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){wo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Bl(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let er,wo=null;const mn=new d.OlP("TRANSITION_ID"),Ic=[{provide:d.ip1,useFactory:function Hd(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=k(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[mn,ce,d.zs3],multi:!0}];let Cc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const iu=new d.OlP("EventManagerPlugins");let jd=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const c=i[a];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(iu),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class su{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=k().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Do=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),zo=(()=>{class n extends Do{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const c=this._doc.createElement("style");c.textContent=a,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Gd),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Gd))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Gd(n){k().remove(n)}const qo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},$d=/%COMP%/g;function lu(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?lu(n,i,t):(i=i.replace($d,n),t.push(i))}return t}function Wd(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ko=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Zo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new zd(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case d.ifc.ShadowDom:return new qd(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=lu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(jd),d.LFG(zo),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Zo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(qo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Wa(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Wa(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=qo[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=qo[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Wd(r)):this.eventManager.addEventListener(e,t,Wd(r))}}function Wa(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class zd extends Zo{constructor(e,t,r,i){super(e),this.component=r;const a=lu(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Mn(n){return"_ngcontent-%COMP%".replace($d,n)}(i+"-"+r.id),this.hostAttr=function au(n){return"_nghost-%COMP%".replace($d,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class qd extends Zo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=lu(i.id,i.styles,[]);for(let c=0;c<a.length;c++){const p=document.createElement("style");p.textContent=a[c],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let _r=(()=>{class n extends su{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const za=["alt","control","meta","shift"],qa={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Qi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ka=(()=>{class n extends su{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,a.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let c="",p=r.indexOf("code");if(p>-1&&(r.splice(p,1),c="code."),za.forEach(w=>{const C=r.indexOf(w);C>-1&&(r.splice(C,1),c+=w+".")}),c+=a,0!=r.length||0===a.length)return null;const _={};return _.domEventName=i,_.fullKey=c,_}static matchEventFullKeyCode(t,r){let i=qa[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),za.forEach(c=>{c!==i&&(0,Qi[c])(t)&&(a+=c+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const hu=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function cu(){bo.makeCurrent()},multi:!0},{provide:ce,useFactory:function Ya(){return(0,d.RDi)(document),document},deps:[]}]),Qs=new d.OlP(""),Zd=[{provide:d.rWj,useClass:class $f{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let a=i.length,c=!1;const p=function(_){c=c||_,a--,0==a&&r(c)};i.forEach(function(_){_.whenStable(p)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],Js=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function Co(){return new d.qLn},deps:[]},{provide:iu,useClass:_r,multi:!0,deps:[ce,d.R0b,d.Lbi]},{provide:iu,useClass:Ka,multi:!0,deps:[ce]},{provide:Ko,useClass:Ko,deps:[jd,zo,d.AFp]},{provide:d.FYo,useExisting:Ko},{provide:Do,useExisting:zo},{provide:zo,useClass:zo,deps:[ce]},{provide:jd,useClass:jd,deps:[iu,d.R0b]},{provide:class $o{},useClass:Cc,deps:[]},[]];let Sc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:mn,useExisting:d.AFp},Ic]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Qs,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...Js,...Zd],imports:[mr,d.hGG]}),n})(),ys=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Yo(){return new ys((0,d.LFG)(ce))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var vr=P(2011),bs=P(4986),Tr=P(9751),Qt=P(8996),Vn=P(3269);function Je(...n){const e=(0,Vn.yG)(n);return(0,Qt.D)(n,e)}var yn=P(2122),Ji=P(8189);function to(...n){return function eo(){return(0,Ji.J)(1)}()((0,Qt.D)(n,(0,Vn.yG)(n)))}var tr=P(4482);function ws(...n){const e=(0,Vn.yG)(n);return(0,tr.e)((t,r)=>{(e?to(n,t,e):to(n,t)).subscribe(r)})}var pn=P(5403);function Ds(){return(0,tr.e)((n,e)=>{let t,r=!1;n.subscribe((0,pn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var gt=P(4004);function ai(n,e,t,r,i){return(a,c)=>{let p=t,_=e,w=0;a.subscribe((0,pn.x)(c,C=>{const A=w++;_=p?n(_,C,A):(p=!0,C),r&&c.next(_)},i&&(()=>{p&&c.next(_),c.complete()})))}}function Es(n,e){return(0,tr.e)(ai(n,e,arguments.length>=2,!0))}var li=P(4671);function el(n,e){return n===e}function Bn(n,e){return(0,tr.e)((t,r)=>{let i=0;t.subscribe((0,pn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}P(9169);var ut,na=P(3942),_e=P(5861),bi=P(9681),tl=P(4859),wi=P(1877),Tt=P(2090),nl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nr={},ra=ra||{},Dt=nl||self;function ia(){}function Di(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function sa(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Xi="closure_uid_"+(1e9*Math.random()>>>0),Jd=0;function Un(n,e,t){return n.call.apply(n.bind,arguments)}function qf(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function I(n,e,t){return(I=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Un:qf).apply(null,arguments)}function T(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function x(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var c=Array(arguments.length-2),p=2;p<arguments.length;p++)c[p-2]=arguments[p];return e.prototype[i].apply(r,c)}}function L(){this.s=this.s,this.o=this.o}L.prototype.s=!1,L.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function oa(n){Object.prototype.hasOwnProperty.call(n,Xi)&&n[Xi]||(n[Xi]=++Jd)}(this)},L.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const re=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Se(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function nt(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Di(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let c=0;c<a;c++)n[i+c]=r[c]}else n.push(r)}}function Qe(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Qe.prototype.h=function(){this.defaultPrevented=!0};var ht=function(){if(!Dt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Dt.addEventListener("test",ia,e),Dt.removeEventListener("test",ia,e)}catch{}return n}();function Vt(n){return/^[\s\xa0]*$/.test(n)}var St=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Hn(n,e){return n<e?-1:n>e?1:0}function En(){var n=Dt.navigator;return n&&(n=n.userAgent)?n:""}function Vr(n){return-1!=En().indexOf(n)}function aa(n){return aa[" "](n),n}aa[" "]=ia;var Xd,n,Sr=Vr("Opera"),rr=Vr("Trident")||Vr("MSIE"),rl=Vr("Edge"),Qg=rl||rr,Kf=Vr("Gecko")&&!(-1!=En().toLowerCase().indexOf("webkit")&&!Vr("Edge"))&&!(Vr("Trident")||Vr("MSIE"))&&!Vr("Edge"),ky=-1!=En().toLowerCase().indexOf("webkit")&&!Vr("Edge");function Zf(){var n=Dt.document;return n?n.documentMode:void 0}e:{var Yf="",eh=(n=En(),Kf?/rv:([^\);]+)(\)|;)/.exec(n):rl?/Edge\/([\d\.]+)/.exec(n):rr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ky?/WebKit\/(\S+)/.exec(n):Sr?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(eh&&(Yf=eh?eh[1]:""),rr){var _u=Zf();if(null!=_u&&_u>parseFloat(Yf)){Xd=String(_u);break e}}Xd=Yf}var Mc={};var Jg=Dt.document&&rr&&(Zf()||parseInt(Xd,10))||void 0;function nh(n,e){if(Qe.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Kf){e:{try{aa(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Ly[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&nh.X.h.call(this)}}x(nh,Qe);var Ly={2:"touch",3:"pen",4:"mouse"};nh.prototype.h=function(){nh.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Oc="closure_listenable_"+(1e6*Math.random()|0),Qf=0;function Xg(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++Qf,this.ba=this.ea=!1}function Jf(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Rc(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Vy(n){const e={};for(const t in n)e[t]=n[t];return e}const By="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Uy(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<By.length;a++)t=By[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function rh(n){this.src=n,this.g={},this.h=0}function em(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=re(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Jf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Xf(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}rh.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var c=Xf(n,e,r,i);return-1<c?(e=n[c],t||(e.ea=!1)):((e=new Xg(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var ih="closure_lm_"+(1e6*Math.random()|0),kc={};function Pc(n,e,t,r,i){if(r&&r.once)return Is(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)Pc(n,e[a],t,r,i);return null}return t=rp(t),n&&n[Oc]?n.N(e,t,sa(r)?!!r.capture:!!r,i):ep(n,e,t,!1,r,i)}function ep(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var c=sa(i)?!!i.capture:!!i,p=yu(n);if(p||(n[ih]=p=new rh(n)),(t=p.add(e,t,r,c,a)).proxy)return t;if(r=function sh(){const e=tm;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)ht||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(oh(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Is(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Is(n,e[a],t,r,i);return null}return t=rp(t),n&&n[Oc]?n.O(e,t,sa(r)?!!r.capture:!!r,i):ep(n,e,t,!0,r,i)}function tp(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)tp(n,e[a],t,r,i);else r=sa(r)?!!r.capture:!!r,t=rp(t),n&&n[Oc]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Xf(a=n.g[e],t,r,i))&&(Jf(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=yu(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Xf(e,t,r,i)),(t=-1<n?e[n]:null)&&np(t))}function np(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Oc])em(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(oh(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=yu(e))?(em(t,n),0==t.h&&(t.src=null,e[ih]=null)):Jf(n)}}}function oh(n){return n in kc?kc[n]:kc[n]="on"+n}function tm(n,e){if(n.ba)n=!0;else{e=new nh(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&np(n),n=t.call(r,e)}return n}function yu(n){return(n=n[ih])instanceof rh?n:null}var ah="__closure_events_fn_"+(1e9*Math.random()>>>0);function rp(n){return"function"==typeof n?n:(n[ah]||(n[ah]=function(e){return n.handleEvent(e)}),n[ah])}function Nr(){L.call(this),this.i=new rh(this),this.P=this,this.I=null}function Ar(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Qe(e,n);else if(e instanceof Qe)e.target=e.target||n;else{var i=e;Uy(e=new Qe(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var c=e.g=t[a];i=lh(c,r,!0,e)&&i}if(i=lh(c=e.g=n,r,!0,e)&&i,i=lh(c,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=lh(c=e.g=t[a],r,!1,e)&&i}function lh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var c=e[a];if(c&&!c.ba&&c.capture==t){var p=c.listener,_=c.ha||c.src;c.ea&&em(n.i,c),i=!1!==p.call(_,r)&&i}}return i&&!r.defaultPrevented}x(Nr,L),Nr.prototype[Oc]=!0,Nr.prototype.removeEventListener=function(n,e,t,r){tp(this,n,e,t,r)},Nr.prototype.M=function(){if(Nr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Jf(t[r]);delete n.g[e],n.h--}}this.I=null},Nr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Nr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var ip=Dt.JSON.stringify;function Zr(){var n=op;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var bu,nm=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new xo,n=>n.reset());class xo{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Yr(n){Dt.setTimeout(()=>{throw n},0)}function vu(n,e){bu||function Hy(){var n=Dt.Promise.resolve(void 0);bu=function(){n.then(jy)}}(),Fc||(bu(),Fc=!0),op.add(n,e)}var Fc=!1,op=new class sp{constructor(){this.h=this.g=null}add(e,t){const r=nm.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function jy(){for(var n;n=Zr();){try{n.h.call(n.g)}catch(t){Yr(t)}var e=nm;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Fc=!1}function il(n,e){Nr.call(this),this.h=n||1,this.g=e||Dt,this.j=I(this.lb,this),this.l=Date.now()}function ap(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function uh(n,e,t){if("function"==typeof n)t&&(n=I(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=I(n.handleEvent,n)}return 2147483647<Number(e)?-1:Dt.setTimeout(n,e||0)}function ch(n){n.g=uh(()=>{n.g=null,n.i&&(n.i=!1,ch(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}x(il,Nr),(ut=il.prototype).ca=!1,ut.R=null,ut.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ar(this,"tick"),this.ca&&(ap(this),this.start()))}},ut.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ut.M=function(){il.X.M.call(this),ap(this),delete this.g};class Gy extends L{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ch(this)}M(){super.M(),this.g&&(Dt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sl(n){L.call(this),this.h=n,this.g={}}x(sl,L);var dh=[];function rm(n,e,t,r){Array.isArray(t)||(t&&(dh[0]=t.toString()),t=dh);for(var i=0;i<t.length;i++){var a=Pc(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function lp(n){Rc(n.g,function(e,t){this.g.hasOwnProperty(t)&&np(e)},n),n.g={}}function Lc(){this.g=!0}function wu(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Bc(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var c=1;c<i.length;c++)i[c]=""}}}return ip(t)}catch{return e}}(n,t)+(r?" "+r:"")})}sl.prototype.M=function(){sl.X.M.call(this),lp(this)},sl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Lc.prototype.Aa=function(){this.g=!1},Lc.prototype.info=function(){};var ua={},Wy=null;function es(){return Wy=Wy||new Nr}function hh(n){Qe.call(this,ua.Pa,n)}function Du(n){const e=es();Ar(e,new hh(e))}function im(n,e){Qe.call(this,ua.STAT_EVENT,n),this.stat=e}function xr(n){const e=es();Ar(e,new im(e,n))}function sm(n,e){Qe.call(this,ua.Qa,n),this.size=e}function Uc(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Dt.setTimeout(function(){n()},e)}ua.Pa="serverreachability",x(hh,Qe),ua.STAT_EVENT="statevent",x(im,Qe),ua.Qa="timingevent",x(sm,Qe);var fh={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},om={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function al(){}function ph(){}al.prototype.h=null;var up,ll={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function gh(){Qe.call(this,"d")}function Hc(){Qe.call(this,"c")}function jc(){}function ca(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new sl(this),this.O=da,this.T=new il(n=Qg?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Gc}function Gc(){this.i=null,this.g="",this.h=!1}x(gh,Qe),x(Hc,Qe),x(jc,al),jc.prototype.g=function(){return new XMLHttpRequest},jc.prototype.i=function(){return{}},up=new jc;var da=45e3,mh={},ul={};function cp(n,e,t){n.K=1,n.v=fa(ts(e)),n.s=t,n.P=!0,Li(n,null)}function Li(n,e){n.F=Date.now(),ha(n),n.A=ts(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),O(t.i,"t",r),n.C=0,t=n.l.H,n.h=new Gc,n.g=nv(n.l,t?e:null,!n.s),0<n.N&&(n.L=new Gy(I(n.La,n,n.g),n.N)),rm(n.S,n.g,"readystatechange",n.ib),e=n.H?Vy(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Du(),function ol(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var c="",p=a.split("&"),_=0;_<p.length;_++){var w=p[_].split("=");if(1<w.length){var C=w[0];w=w[1];var A=C.split("_");c=2<=A.length&&"type"==A[1]?c+(C+"=")+w+"&":c+(C+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Mo(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function dp(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=lm(n,t),i==ul){4==e&&(n.o=4,xr(14),r=!1),wu(n.j,n.m,null,"[Incomplete Response]");break}if(i==mh){n.o=4,xr(15),wu(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}wu(n.j,n.m,i,null),Vi(n,i)}Mo(n)&&i!=ul&&i!=mh&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,xr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),tv(e),e.K=!0,xr(11))):(wu(n.j,n.m,t,"[Invalid Chunked Response]"),no(n),cl(n))}function lm(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?ul:(t=Number(e.substring(t,r)),isNaN(t)?mh:(r+=1)+t>e.length?ul:(e=e.substr(r,t),n.C=r+t,e))}function ha(n){n.V=Date.now()+n.O,$c(n,n.O)}function $c(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Uc(I(n.gb,n),e)}function Eu(n){n.B&&(Dt.clearTimeout(n.B),n.B=null)}function cl(n){0==n.l.G||n.I||Mw(n.l,n)}function no(n){Eu(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,ap(n.T),lp(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Vi(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||or(t.h,n)))if(!n.J&&or(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;_m(t),fm(t)}ev(t),xr(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=Uc(I(t.cb,t),6e3));if(1>=sr(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Dh(t,11)}else if((n.J||t.g==n)&&_m(t),!Vt(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.T=w[0],w=w[1],2==t.G)if("c"==w[0]){t.I=w[1],t.ka=w[2];const C=w[3];null!=C&&(t.ma=C,t.j.info("VER="+t.ma));const A=w[4];null!=A&&(t.Ca=A,t.j.info("SVER="+t.Ca));const R=w[5];null!=R&&"number"==typeof R&&0<R&&(t.J=r=1.5*R,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const Z=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var a=r.h;a.g||-1==Z.indexOf("spdy")&&-1==Z.indexOf("quic")&&-1==Z.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(ro(a,a.h),a.h=null))}if(r.D){const te=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;te&&(r.za=te,un(r.F,r.D,te))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var c=n;if((r=t).sa=ym(r,r.H?r.ka:null,r.V),c.J){mp(r.h,c);var p=c,_=r.J;_&&p.setTimeout(_),p.B&&(Eu(p),ha(p)),r.g=c}else Xy(r);0<t.i.length&&gm(t)}else"stop"!=w[0]&&"close"!=w[0]||Dh(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?Dh(t,7):wh(t):"noop"!=w[0]&&t.l&&t.l.wa(w),t.A=0)}Du()}catch{}}function _h(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Di(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function fp(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Di(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function hp(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Di(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(ut=ca.prototype).setTimeout=function(n){this.O=n},ut.ib=function(n){n=n.target;const e=this.L;e&&3==ga(n)?e.l():this.La(n)},ut.La=function(n){try{if(n==this.g)e:{const C=ga(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>C)&&(3!=C||Qg||this.g&&(this.h.h||this.g.fa()||Sw(this.g)))){this.I||4!=C||7==e||Du(),Eu(this);var t=this.g.aa();this.Y=t;t:if(Mo(this)){var r=Sw(this.g);n="";var i=r.length,a=4==ga(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){no(this),cl(this);var c="";break t}this.h.i=new Dt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.fa();if(this.i=200==t,function $y(n,e,t,r,i,a,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+c})}(this.j,this.u,this.A,this.m,this.U,C,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var p,_=this.g;if((p=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vt(p)){var w=p;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,xr(12),no(this),cl(this);break e}wu(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Vi(this,t)}this.P?(dp(this,C,c),Qg&&this.i&&3==C&&(rm(this.S,this.T,"tick",this.hb),this.T.start())):(wu(this.j,this.m,c,null),Vi(this,c)),4==C&&no(this),this.i&&!this.I&&(4==C?Mw(this.l,this):(this.i=!1,ha(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,xr(12)):(this.o=0,xr(13)),no(this),cl(this)}}}catch{}},ut.hb=function(){if(this.g){var n=ga(this.g),e=this.g.fa();this.C<e.length&&(Eu(this),dp(this,n,e),this.i&&4!=n&&ha(this))}},ut.cancel=function(){this.I=!0,no(this)},ut.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Vc(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Du(),xr(17)),no(this),this.o=2,cl(this)):$c(this,this.V-n)};var yh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ir(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof ir){this.h=void 0!==e?e:n.h,Cu(this,n.j),this.s=n.s,this.g=n.g,vh(this,n.m),this.l=n.l,e=n.i;var t=new f;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Cs(this,t),this.o=n.o}else n&&(t=String(n).match(yh))?(this.h=!!e,Cu(this,t[1]||"",!0),this.s=pa(t[2]||""),this.g=pa(t[3]||"",!0),vh(this,t[4]),this.l=pa(t[5]||"",!0),Cs(this,t[6]||"",!0),this.o=pa(t[7]||"")):(this.h=!!e,this.i=new f(null,this.h))}function ts(n){return new ir(n)}function Cu(n,e,t){n.j=t?pa(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function vh(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Cs(n,e,t){e instanceof f?(n.i=e,function ge(n,e){e&&!n.j&&(m(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(b(this,r),O(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Ts(e,gp)),n.i=new f(e,n.h))}function un(n,e,t){n.i.set(e,t)}function fa(n){return un(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function pa(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ts(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,pp),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function pp(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ir.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ts(e,um,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ts(e,um,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ts(t,"/"==t.charAt(0)?zy:Cw,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ts(t,y)),n.join("")};var um=/[#\/\?@]/g,Cw=/[#\?:]/g,zy=/[#\?]/g,gp=/[#\?@]/g,y=/#/g;function f(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function m(n){n.g||(n.g=new Map,n.h=0,n.i&&function Iu(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function b(n,e){m(n),e=W(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function N(n,e){return m(n),e=W(n,e),n.g.has(e)}function O(n,e,t){b(n,e),0<t.length&&(n.i=null,n.g.set(W(n,e),Se(t)),n.h+=t.length)}function W(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function rt(n){this.l=n||Ct,n=Dt.PerformanceNavigationTiming?0<(n=Dt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Dt.g&&Dt.g.Ga&&Dt.g.Ga()&&Dt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ut=f.prototype).add=function(n,e){m(this),this.i=null,n=W(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ut.forEach=function(n,e){m(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},ut.oa=function(){m(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},ut.W=function(n){m(this);let e=[];if("string"==typeof n)N(this,n)&&(e=e.concat(this.g.get(W(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ut.set=function(n,e){return m(this),this.i=null,N(this,n=W(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ut.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},ut.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),c=this.W(r);for(r=0;r<c.length;r++){var i=a;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var Ct=10;function vt(n){return!!n.h||!!n.g&&n.g.size>=n.j}function sr(n){return n.h?1:n.g?n.g.size:0}function or(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function ro(n,e){n.g?n.g.add(e):n.h=e}function mp(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function _p(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Se(n.i)}function yp(){}function qy(){this.g=new yp}function cm(n,e,t){const r=t||"";try{_h(n,function(i,a){let c=i;sa(i)&&(c=ip(i)),e.push(r+a+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Tu(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function dl(n){this.l=n.ac||null,this.j=n.jb||!1}function Wc(n,e){Nr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=vp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}rt.prototype.cancel=function(){if(this.i=_p(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},yp.prototype.stringify=function(n){return Dt.JSON.stringify(n,void 0)},yp.prototype.parse=function(n){return Dt.JSON.parse(n,void 0)},x(dl,al),dl.prototype.g=function(){return new Wc(this.l,this.j)},dl.prototype.i=function(n){return function(){return n}}({}),x(Wc,Nr);var vp=0;function bh(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function hl(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ss(n)}function Ss(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ut=Wc.prototype).open=function(n,e){if(this.readyState!=vp)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ss(this)},ut.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Dt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ut.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,hl(this)),this.readyState=vp},ut.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ss(this)),this.g&&(this.readyState=3,Ss(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Dt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;bh(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},ut.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?hl(this):Ss(this),3==this.readyState&&bh(this)}},ut.Va=function(n){this.g&&(this.response=this.responseText=n,hl(this))},ut.Ua=function(n){this.g&&(this.response=n,hl(this))},ut.ga=function(){this.g&&hl(this)},ut.setRequestHeader=function(n,e){this.v.append(n,e)},ut.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ut.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Wc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var bp=Dt.JSON.parse;function Zn(n){Nr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Zy,this.K=this.L=!1}x(Zn,Nr);var Zy="",Tw=/^https?$/i,VN=["POST","PUT"];function F1(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,dm(n),Yy(n)}function dm(n){n.D||(n.D=!0,Ar(n,"complete"),Ar(n,"error"))}function hm(n){if(n.h&&typeof ra<"u"&&(!n.C[1]||4!=ga(n)||2!=n.aa()))if(n.v&&4==ga(n))uh(n.Ha,0,n);else if(Ar(n,"readystatechange"),4==ga(n)){n.h=!1;try{const p=n.aa();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var i=String(n.H).match(yh)[1]||null;if(!i&&Dt.self&&Dt.self.location){var a=Dt.self.location.protocol;i=a.substr(0,a.length-1)}r=!Tw.test(i?i.toLowerCase():"")}t=r}if(t)Ar(n,"complete"),Ar(n,"success");else{n.m=6;try{var c=2<ga(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.aa()+"]",dm(n)}}finally{Yy(n)}}}function Yy(n,e){if(n.g){L1(n);const t=n.g,r=n.C[0]?ia:null;n.g=null,n.C=null,e||Ar(n,"ready");try{t.onreadystatechange=r}catch{}}}function L1(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Dt.clearTimeout(n.A),n.A=null)}function ga(n){return n.g?n.g.readyState:0}function Sw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Zy:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Nw(n){let e="";return Rc(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Qy(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Nw(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):un(n,e,t))}function wp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Jy(n){this.Ca=0,this.i=[],this.j=new Lc,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=wp("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=wp("baseRetryDelayMs",5e3,n),this.bb=wp("retryDelaySeedMs",1e4,n),this.$a=wp("forwardChannelMaxRetries",2,n),this.ta=wp("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new rt(n&&n.concurrentRequestLimit),this.Fa=new qy,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function wh(n){if(pm(n),3==n.G){var e=n.U++,t=ts(n.F);un(t,"SID",n.I),un(t,"RID",e),un(t,"TYPE","terminate"),Dp(n,t),(e=new ca(n,n.j,e,void 0)).K=2,e.v=fa(ts(t)),t=!1,Dt.navigator&&Dt.navigator.sendBeacon&&(t=Dt.navigator.sendBeacon(e.v.toString(),"")),!t&&Dt.Image&&((new Image).src=e.v,t=!0),t||(e.g=nv(e.l,null),e.g.da(e.v)),e.F=Date.now(),ha(e)}Eh(n)}function fm(n){n.g&&(tv(n),n.g.cancel(),n.g=null)}function pm(n){fm(n),n.u&&(Dt.clearTimeout(n.u),n.u=null),_m(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Dt.clearTimeout(n.m),n.m=null)}function gm(n){vt(n.h)||n.m||(n.m=!0,vu(n.Ja,n),n.C=0)}function Aw(n,e){var t;t=e?e.m:n.U++;const r=ts(n.F);un(r,"SID",n.I),un(r,"RID",t),un(r,"AID",n.T),Dp(n,r),n.o&&n.s&&Qy(r,n.o,n.s),t=new ca(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=mm(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),ro(n.h,t),cp(t,r,e)}function Dp(n,e){n.ia&&Rc(n.ia,function(t,r){un(e,r,t)}),n.l&&_h({},function(t,r){un(e,r,t)})}function mm(n,e,t){t=Math.min(n.i.length,t);var r=n.l?I(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const c=["count="+t];-1==a?0<t?(a=i[0].h,c.push("ofs="+a)):a=0:c.push("ofs="+a);let p=!0;for(let _=0;_<t;_++){let w=i[_].h;const C=i[_].g;if(w-=a,0>w)a=Math.max(0,i[_].h-100),p=!1;else try{cm(C,c,"req"+w+"_")}catch{r&&r(C)}}if(p){r=c.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function Xy(n){n.g||n.u||(n.Z=1,vu(n.Ia,n),n.A=0)}function ev(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Uc(I(n.Ia,n),V1(n,n.A)),n.A++,0))}function tv(n){null!=n.B&&(Dt.clearTimeout(n.B),n.B=null)}function xw(n){n.g=new ca(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=ts(n.sa);un(e,"RID","rpc"),un(e,"SID",n.I),un(e,"CI",n.L?"0":"1"),un(e,"AID",n.T),un(e,"TYPE","xmlhttp"),Dp(n,e),n.o&&n.s&&Qy(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=fa(ts(e)),t.s=null,t.P=!0,Li(t,n)}function _m(n){null!=n.v&&(Dt.clearTimeout(n.v),n.v=null)}function Mw(n,e){var t=null;if(n.g==e){_m(n),tv(n),n.g=null;var r=2}else{if(!or(n.h,e))return;t=e.D,mp(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Ar(r=es(),new sm(r,t)),gm(n)}else Xy(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function Mr(n,e){return!(sr(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Uc(I(n.Ja,n,e),V1(n,n.C)),n.C++,0)))}(n,e)||2==r&&ev(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Dh(n,5);break;case 4:Dh(n,10);break;case 3:Dh(n,6);break;default:Dh(n,2)}}function V1(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Dh(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=I(n.kb,n);t||(t=new ir("//www.google.com/images/cleardot.gif"),Dt.location&&"http"==Dt.location.protocol||Cu(t,"https"),fa(t)),function Ky(n,e){const t=new Lc;if(Dt.Image){const r=new Image;r.onload=T(Tu,t,r,"TestLoadImage: loaded",!0,e),r.onerror=T(Tu,t,r,"TestLoadImage: error",!1,e),r.onabort=T(Tu,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=T(Tu,t,r,"TestLoadImage: timeout",!1,e),Dt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else xr(2);n.G=0,n.l&&n.l.va(e),Eh(n),pm(n)}function Eh(n){if(n.G=0,n.la=[],n.l){const e=_p(n.h);(0!=e.length||0!=n.i.length)&&(nt(n.la,e),nt(n.la,n.i),n.h.i.length=0,Se(n.i),n.i.length=0),n.l.ua()}}function ym(n,e,t){var r=t instanceof ir?ts(t):new ir(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),vh(r,r.m);else{var i=Dt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new ir(null,void 0);r&&Cu(a,r),e&&(a.g=e),i&&vh(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&un(r,t,e),un(r,"VER",n.ma),Dp(n,r),r}function nv(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Zn(t&&n.Da&&!n.ra?new dl({jb:!0}):n.ra)).Ka(n.H),e}function rv(){}function Ep(){if(rr&&!(10<=Number(Jg)))throw Error("Environmental error: no available transport.")}function Ns(n,e){Nr.call(this),this.g=new Jy(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Vt(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Vt(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Su(this)}function iv(n){gh.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function sv(){Hc.call(this),this.status=1}function Su(n){this.g=n}(ut=Zn.prototype).Ka=function(n){this.L=n},ut.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():up.g(),this.C=function am(n){return n.h||(n.h=n.i())}(this.u?this.u:up),this.g.onreadystatechange=I(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void F1(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Dt.FormData&&n instanceof Dt.FormData,!(0<=re(VN,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,c]of t)this.g.setRequestHeader(a,c);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{L1(this),0<this.B&&((this.K=function BN(n){return rr&&function Py(){return function la(n){var e=Mc;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=St(String(Xd)).split("."),t=St("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",a=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=Hn(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||Hn(0==i[2].length,0==a[2].length)||Hn(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=I(this.qa,this)):this.A=uh(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){F1(this,a)}},ut.qa=function(){typeof ra<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ar(this,"timeout"),this.abort(8))},ut.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ar(this,"complete"),Ar(this,"abort"),Yy(this))},ut.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Yy(this,!0)),Zn.X.M.call(this)},ut.Ha=function(){this.s||(this.F||this.v||this.l?hm(this):this.fb())},ut.fb=function(){hm(this)},ut.aa=function(){try{return 2<ga(this)?this.g.status:-1}catch{return-1}},ut.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ut.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),bp(e)}},ut.Ea=function(){return this.m},ut.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ut=Jy.prototype).ma=8,ut.G=1,ut.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new ca(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=Vy(a),Uy(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=mm(this,i,e),un(t=ts(this.F),"RID",n),un(t,"CVER",22),this.D&&un(t,"X-HTTP-Session-Id",this.D),Dp(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(Nw(a)))+"&"+e:this.o&&Qy(t,this.o,a)),ro(this.h,i),this.Ya&&un(t,"TYPE","init"),this.O?(un(t,"$req",e),un(t,"SID","null"),i.Z=!0,cp(i,t,null)):cp(i,t,e),this.G=2}}else 3==this.G&&(n?Aw(this,n):0==this.i.length||vt(this.h)||Aw(this))},ut.Ia=function(){if(this.u=null,xw(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Uc(I(this.eb,this),n)}},ut.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,xr(10),fm(this),xw(this))},ut.cb=function(){null!=this.v&&(this.v=null,fm(this),ev(this),xr(19))},ut.kb=function(n){n?(this.j.info("Successfully pinged google.com"),xr(2)):(this.j.info("Failed to ping google.com"),xr(1))},(ut=rv.prototype).xa=function(){},ut.wa=function(){},ut.va=function(){},ut.ua=function(){},ut.Ra=function(){},Ep.prototype.g=function(n,e){return new Ns(n,e)},x(Ns,Nr),Ns.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;xr(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=ym(n,null,n.V),gm(n)},Ns.prototype.close=function(){wh(this.g)},Ns.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=ip(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&gm(e)},Ns.prototype.M=function(){this.g.l=null,delete this.j,wh(this.g),delete this.g,Ns.X.M.call(this)},x(iv,gh),x(sv,Hc),x(Su,rv),Su.prototype.xa=function(){Ar(this.g,"a")},Su.prototype.wa=function(n){Ar(this.g,new iv(n))},Su.prototype.va=function(n){Ar(this.g,new sv)},Su.prototype.ua=function(){Ar(this.g,"b")},Ep.prototype.createWebChannel=Ep.prototype.g,Ns.prototype.send=Ns.prototype.u,Ns.prototype.open=Ns.prototype.m,Ns.prototype.close=Ns.prototype.close,fh.NO_ERROR=0,fh.TIMEOUT=8,fh.HTTP_ERROR=6,om.COMPLETE="complete",ph.EventType=ll,ll.OPEN="a",ll.CLOSE="b",ll.ERROR="c",ll.MESSAGE="d",Nr.prototype.listen=Nr.prototype.N,Zn.prototype.listenOnce=Zn.prototype.O,Zn.prototype.getLastError=Zn.prototype.Oa,Zn.prototype.getLastErrorCode=Zn.prototype.Ea,Zn.prototype.getStatus=Zn.prototype.aa,Zn.prototype.getResponseJson=Zn.prototype.Sa,Zn.prototype.getResponseText=Zn.prototype.fa,Zn.prototype.send=Zn.prototype.da,Zn.prototype.setWithCredentials=Zn.prototype.Ka;var UN=nr.createWebChannelTransport=function(){return new Ep},B1=nr.getStatEventTarget=function(){return es()},Ip=nr.ErrorCode=fh,Ow=nr.EventType=om,Rw=nr.Event=ua,Nu=nr.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},U1=nr.FetchXmlHttpFactory=dl,Ih=nr.WebChannel=ph,vm=nr.XhrIo=Zn;const kw="@firebase/firestore";class Or{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Or.UNAUTHENTICATED=new Or(null),Or.GOOGLE_CREDENTIALS=new Or("google-credentials-uid"),Or.FIRST_PARTY=new Or("first-party-uid"),Or.MOCK_USER=new Or("mock-user");let fl="9.15.0";const ns=new wi.Yd("@firebase/firestore");function bm(){return ns.logLevel}function Oe(n,...e){if(ns.logLevel<=wi.in.DEBUG){const t=e.map(xu);ns.debug(`Firestore (${fl}): ${n}`,...t)}}function br(n,...e){if(ns.logLevel<=wi.in.ERROR){const t=e.map(xu);ns.error(`Firestore (${fl}): ${n}`,...t)}}function Au(n,...e){if(ns.logLevel<=wi.in.WARN){const t=e.map(xu);ns.warn(`Firestore (${fl}): ${n}`,...t)}}function xu(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function at(n="Unexpected state"){const e=`FIRESTORE (${fl}) INTERNAL ASSERTION FAILED: `+n;throw br(e),new Error(e)}function mt(n,e){n||at()}function Xe(n,e){return n}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends Tt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Rr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Pw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Fw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Or.UNAUTHENTICATED))}shutdown(){}}class HN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class j1{constructor(e){this.t=e,this.currentUser=Or.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let c=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Rr,e.enqueueRetryable(()=>a(this.currentUser))};const p=()=>{const w=c;e.enqueueRetryable((0,_e.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},_=w=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(w=>_(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?_(w):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Rr)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(mt("string"==typeof r.accessToken),new Pw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return mt(null===e||"string"==typeof e),new Or(e)}}class Cp{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Or.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(mt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class G1{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new Cp(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Or.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Tp{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.A;return this.A=a.token,Oe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(mt("string"==typeof t.token),this.A=t.token,new zc(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function GN(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class av{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=GN(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Bt(n,e){return n<e?-1:n>e?1:0}function Ch(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Lw(n){return n+"\0"}class On{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Me(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return On.fromMillis(Date.now())}static fromDate(e){return On.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new On(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Bt(this.nanoseconds,e.nanoseconds):Bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bt(e)}static min(){return new bt(new On(0,0))}static max(){return new bt(new On(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class qc{constructor(e,t,r){void 0===t?t=0:t>e.length&&at(),void 0===r?r=e.length-t:r>e.length-t&&at(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===qc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),c=t.get(i);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jt extends qc{construct(e,t,r){return new Jt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Jt(t)}static emptyPath(){return new Jt([])}}const $1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jn extends qc{construct(e,t,r){return new jn(e,t,r)}static isValidIdentifier(e){return $1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new jn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Me(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new Me(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Me(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===p?(c=!c,i++):"."!==p||c?(r+=p,i++):(a(),i++)}if(a(),c)throw new Me(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jn(t)}static emptyPath(){return new jn([])}}class ze{constructor(e){this.path=e}static fromPath(e){return new ze(Jt.fromString(e))}static fromName(e){return new ze(Jt.fromString(e).popFirst(5))}static empty(){return new ze(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new Jt(e.slice()))}}class wm{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function lv(n){return n.fields.find(e=>2===e.kind)}function Kc(n){return n.fields.filter(e=>2!==e.kind)}wm.UNKNOWN_ID=-1;class Dm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Sp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Sp(0,As.min())}}function Zc(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=bt.fromTimestamp(1e9===r?new On(t+1,0):new On(t,r));return new As(i,ze.empty(),e)}function ma(n){return new As(n.readTime,n.key,-1)}class As{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new As(bt.min(),ze.empty(),-1)}static max(){return new As(bt.max(),ze.empty(),-1)}}function uv(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ze.comparator(n.documentKey,e.documentKey),0!==t?t:Bt(n.largestBatchId,e.largestBatchId))}const q1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class K1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function pl(n){return Vw.apply(this,arguments)}function Vw(){return Vw=(0,_e.Z)(function*(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==q1)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}),Vw.apply(this,arguments)}class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&at(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,r)=>{t(e)})}static reject(e){return new ae((t,r)=>{r(e)})}static waitFor(e){return new ae((t,r)=>{let i=0,a=0,c=!1;e.forEach(p=>{++i,p.next(()=>{++a,c&&a===i&&t()},_=>r(_))}),c=!0,a===i&&t()})}static or(e){let t=ae.resolve(!1);for(const r of e)t=t.next(i=>i?ae.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ae((r,i)=>{const a=e.length,c=new Array(a);let p=0;for(let _=0;_<a;_++){const w=_;t(e[w]).next(C=>{c[w]=C,++p,p===a&&r(c)},C=>i(C))}})}static doWhile(e,t){return new ae((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class cv{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Rr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Th(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=Em(r.target.error);this.P.reject(new Th(e,i))}}static open(e,t,r,i){try{return new cv(t,e.transaction(i,r))}catch(a){throw new Th(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Y1(t)}}class io{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===io.D((0,Tt.z$)())&&br("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),ui(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Tt.hl)())return!1;if(io.N())return!0;const e=(0,Tt.z$)(),t=io.D(e),r=0<t&&t<10,i=io.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,_e.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=c=>{r(c.target.result)},a.onblocked=()=>{i(new Th(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const p=c.target.error;i("VersionError"===p.name?new Me(ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Me(ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new Th(e,p))},a.onupgradeneeded=c=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.S.$(c.target.result,a.transaction,c.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,_e.Z)(function*(){const c="readonly"===t;let p=0;for(;;){++p;try{a.db=yield a.F(e);const _=cv.open(a.db,e,c?"readonly":"readwrite",r),w=i(_).next(C=>(_.V(),C)).catch(C=>(_.abort(C),ae.reject(C))).toPromise();return w.catch(()=>{}),yield _.v,w}catch(_){const w=_,C="FirebaseError"!==w.name&&p<3;if(Oe("SimpleDb","Transaction failed with error:",w.message,"Retrying:",C),a.close(),!C)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Z1{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return ui(this.q.delete())}}class Th extends Me{constructor(e,t){super(ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Mu(n){return"IndexedDbTransactionError"===n.name}class Y1{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ui(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),ui(this.store.add(e))}get(e){return ui(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),ui(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),ui(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(c,p)=>{a.push(p)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ae((a,c)=>{i.onerror=p=>{c(p.target.error)},i.onsuccess=p=>{a(p.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ae((i,a)=>{r.onerror=c=>{a(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Y(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(a,c,p)=>p.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new ae((r,i)=>{t.onerror=a=>{const c=Em(a.target.error);i(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(p=>{p?c.continue():r()}):r()}})}H(e,t){const r=[];return new ae((i,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const p=c.target.result;if(!p)return void i();const _=new Z1(p),w=t(p.primaryKey,p.value,_);if(w instanceof ae){const C=w.catch(A=>(_.done(),ae.reject(A)));r.push(C)}_.isDone?i():null===_.G?p.continue():p.continue(_.G)}}).next(()=>ae.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ui(n){return new ae((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Em(r.target.error);t(i)}})}let Bw=!1;function Em(n){const e=io.D((0,Tt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Bw||(Bw=!0,setTimeout(()=>{throw r},0)),r}}return n}class Q1{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Oe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,_e.Z)(function*(){t.task=null;try{Oe("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Mu(r)?Oe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield pl(r)}yield t.nt(6e4)}))}}class J1{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,_e.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return ae.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Oe("IndexBackiller",`Processing collection: ${c}`),this.rt(e,c,i).next(p=>{i-=p,r.add(c)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const c=a.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ot(i,a)).next(p=>(Oe("IndexBackiller",`Updating offset: ${p}`),this.localStore.indexManager.updateCollectionGroup(e,t,p))).next(()=>c.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const c=ma(a);uv(c,r)>0&&(r=c)}),new As(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let xs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>r.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class X1{constructor(e,t,r,i,a,c,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.useFetchStreams=_}}class gl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new gl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof gl&&e.projectId===this.projectId&&e.database===this.database}}function Uw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Yc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Hw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function kt(n){return null==n}function Sh(n){return 0===n&&1/n==-1/0}function dv(n){return"number"==typeof n&&Number.isInteger(n)&&!Sh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Br{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Br(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Br(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Br.EMPTY_BYTE_STRING=new Br("");const eC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ml(n){if(mt(!!n),"string"==typeof n){let e=0;const t=eC.exec(n);if(mt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ar(n.seconds),nanos:ar(n.nanos)}}function ar(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ou(n){return"string"==typeof n?Br.fromBase64String(n):Br.fromUint8Array(n)}function hv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Gw(n){const e=n.mapValue.fields.__previous_value__;return hv(e)?Gw(e):e}function Im(n){const e=ml(n.mapValue.fields.__local_write_time__.timestampValue);return new On(e.seconds,e.nanos)}const _l={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Np={nullValue:"NULL_VALUE"};function Ms(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?hv(n)?4:pv(n)?9007199254740991:10:at()}function _a(n,e){if(n===e)return!0;const t=Ms(n);if(t!==Ms(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Im(n).isEqual(Im(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=ml(r.timestampValue),c=ml(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Ou(n.bytesValue).isEqual(Ou(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return ar(r.geoPointValue.latitude)===ar(i.geoPointValue.latitude)&&ar(r.geoPointValue.longitude)===ar(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return ar(r.integerValue)===ar(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=ar(r.doubleValue),c=ar(i.doubleValue);return a===c?Sh(a)===Sh(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return Ch(n.arrayValue.values||[],e.arrayValue.values||[],_a);case 10:return function(r,i){const a=r.mapValue.fields||{},c=i.mapValue.fields||{};if(Uw(a)!==Uw(c))return!1;for(const p in a)if(a.hasOwnProperty(p)&&(void 0===c[p]||!_a(a[p],c[p])))return!1;return!0}(n,e);default:return at()}var i}function Qc(n,e){return void 0!==(n.values||[]).find(t=>_a(t,e))}function ya(n,e){if(n===e)return 0;const t=Ms(n),r=Ms(e);if(t!==r)return Bt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Bt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const c=ar(i.integerValue||i.doubleValue),p=ar(a.integerValue||a.doubleValue);return c<p?-1:c>p?1:c===p?0:isNaN(c)?isNaN(p)?0:-1:1}(n,e);case 3:return $w(n.timestampValue,e.timestampValue);case 4:return $w(Im(n),Im(e));case 5:return Bt(n.stringValue,e.stringValue);case 6:return function(i,a){const c=Ou(i),p=Ou(a);return c.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),p=a.split("/");for(let _=0;_<c.length&&_<p.length;_++){const w=Bt(c[_],p[_]);if(0!==w)return w}return Bt(c.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const c=Bt(ar(i.latitude),ar(a.latitude));return 0!==c?c:Bt(ar(i.longitude),ar(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const c=i.values||[],p=a.values||[];for(let _=0;_<c.length&&_<p.length;++_){const w=ya(c[_],p[_]);if(w)return w}return Bt(c.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===_l.mapValue&&a===_l.mapValue)return 0;if(i===_l.mapValue)return 1;if(a===_l.mapValue)return-1;const c=i.fields||{},p=Object.keys(c),_=a.fields||{},w=Object.keys(_);p.sort(),w.sort();for(let C=0;C<p.length&&C<w.length;++C){const A=Bt(p[C],w[C]);if(0!==A)return A;const R=ya(c[p[C]],_[w[C]]);if(0!==R)return R}return Bt(p.length,w.length)}(n.mapValue,e.mapValue);default:throw at()}}function $w(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Bt(n,e);const t=ml(n),r=ml(e),i=Bt(t.seconds,r.seconds);return 0!==i?i:Bt(t.nanos,r.nanos)}function Ap(n){return Ww(n)}function Ww(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=ml(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ou(n.bytesValue).toBase64():"referenceValue"in n?ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const c of r.values||[])a?a=!1:i+=",",i+=Ww(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const p of i)c?c=!1:a+=",",a+=`${p}:${Ww(r.fields[p])}`;return a+"}"}(n.mapValue):at();var e}function Nh(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function fv(n){return!!n&&"integerValue"in n}function Ah(n){return!!n&&"arrayValue"in n}function tC(n){return!!n&&"nullValue"in n}function zw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yl(n){return!!n&&"mapValue"in n}function xp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Yc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=xp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=xp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function pv(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Cm(n){return"nullValue"in n?Np:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Nh(gl.empty(),ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:at()}function nC(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Nh(gl.empty(),ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?_l:at()}function gv(n,e){const t=ya(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function qw(n,e){const t=ya(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ru{constructor(e,t){this.position=e,this.inclusive=t}}function Kw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(r=a.field.isKeyField()?ze.comparator(ze.fromName(c.referenceValue),t.key):ya(c,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Zw(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!_a(n.position[t],e.position[t]))return!1;return!0}class Yw{}class qt extends Yw{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Jw(e,t,r):"array-contains"===t?new eD(e,r):"in"===t?new tD(e,r):"not-in"===t?new mv(e,r):"array-contains-any"===t?new vl(e,r):new qt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Xw(e,r):new Am(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ya(t,this.value)):null!==t&&Ms(this.value)===Ms(t)&&this.matchesComparison(ya(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return at()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class vn extends Yw{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new vn(e,t)}matches(e){return Jc(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Jc(n){return"and"===n.op}function Tm(n){return"or"===n.op}function Sm(n){return rC(n)&&Jc(n)}function rC(n){for(const e of n.filters)if(e instanceof vn)return!1;return!0}function Nm(n){if(n instanceof qt)return n.field.canonicalString()+n.op.toString()+Ap(n.value);{const e=n.filters.map(t=>Nm(t)).join(",");return`${n.op}(${e})`}}function Qw(n,e){return n instanceof qt?(t=n,(r=e)instanceof qt&&t.op===r.op&&t.field.isEqual(r.field)&&_a(t.value,r.value)):n instanceof vn?function(t,r){return r instanceof vn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,c)=>i&&Qw(a,r.filters[c]),!0)}(n,e):void at();var t,r}function iC(n,e){const t=n.filters.concat(e);return vn.create(t,n.op)}function Xc(n){return n instanceof qt?`${(e=n).field.canonicalString()} ${e.op} ${Ap(e.value)}`:n instanceof vn?function(e){return e.op.toString()+" {"+e.getFilters().map(Xc).join(" ,")+"}"}(n):"Filter";var e}class Jw extends qt{constructor(e,t,r){super(e,t,r),this.key=ze.fromName(r.referenceValue)}matches(e){const t=ze.comparator(e.key,this.key);return this.matchesComparison(t)}}class Xw extends qt{constructor(e,t){super(e,"in",t),this.keys=so(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Am extends qt{constructor(e,t){super(e,"not-in",t),this.keys=so(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function so(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ze.fromName(r.referenceValue))}class eD extends qt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ah(t)&&Qc(t.arrayValue,this.value)}}class tD extends qt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Qc(this.value.arrayValue,t)}}class mv extends qt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Qc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Qc(this.value.arrayValue,t)}}class vl extends qt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ah(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Qc(this.value.arrayValue,r))}}class ku{constructor(e,t="asc"){this.field=e,this.dir=t}}function nD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Gn{constructor(e,t){this.comparator=e,this.root=t||Qr.EMPTY}insert(e,t){return new Gn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qr.BLACK,null,null))}remove(e){return new Gn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _v(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _v(this.root,e,this.comparator,!1)}getReverseIterator(){return new _v(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _v(this.root,e,this.comparator,!0)}}class _v{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qr{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Qr.RED,this.left=i??Qr.EMPTY,this.right=a??Qr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Qr(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Qr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Qr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw at();const e=this.left.check();if(e!==this.right.check())throw at();return e+(this.isRed()?0:1)}}Qr.EMPTY=null,Qr.RED=!0,Qr.BLACK=!1,Qr.EMPTY=new class{constructor(){this.size=0}get key(){throw at()}get value(){throw at()}get color(){throw at()}get left(){throw at()}get right(){throw at()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Qr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class In{constructor(e){this.comparator=e,this.data=new Gn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Mp(this.data.getIterator())}getIteratorFrom(e){return new Mp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof In)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new In(this.comparator);return t.data=e,t}}class Mp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function bl(n){return n.hasNext()?n.getNext():void 0}class Bi{constructor(e){this.fields=e,e.sort(jn.comparator)}static empty(){return new Bi([])}unionWith(e){let t=new In(jn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Bi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ch(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ur{constructor(e){this.value=e}static empty(){return new Ur({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!yl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=xp(t)}setAll(e){let t=jn.emptyPath(),r={},i=[];e.forEach((c,p)=>{if(!t.isImmediateParentOf(p)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=p.popLast()}c?r[p.lastSegment()]=xp(c):i.push(p.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());yl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return _a(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];yl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Yc(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Ur(xp(this.value))}}function xm(n){const e=[];return Yc(n.fields,(t,r)=>{const i=new jn([t]);if(yl(r)){const a=xm(r.mapValue).fields;if(0===a.length)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new Bi(e)}class $n{constructor(e,t,r,i,a,c,p){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=c,this.documentState=p}static newInvalidDocument(e){return new $n(e,0,bt.min(),bt.min(),bt.min(),Ur.empty(),0)}static newFoundDocument(e,t,r,i){return new $n(e,1,t,bt.min(),r,i,0)}static newNoDocument(e,t){return new $n(e,2,t,bt.min(),bt.min(),Ur.empty(),0)}static newUnknownDocument(e,t){return new $n(e,3,t,bt.min(),bt.min(),Ur.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(bt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ur.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ur.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof $n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class sC{constructor(e,t=null,r=[],i=[],a=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=p,this.ft=null}}function yv(n,e=null,t=[],r=[],i=null,a=null,c=null){return new sC(n,e,t,r,i,a,c)}function ed(n){const e=Xe(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Nm(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),kt(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ap(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ap(r)).join(",")),e.ft=t}return e.ft}function Op(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!nD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Qw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Zw(n.startAt,e.startAt)&&Zw(n.endAt,e.endAt)}function Rp(n){return ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function vv(n,e){return n.filters.filter(t=>t instanceof qt&&t.field.isEqual(e))}function rD(n,e,t){let r=Np,i=!0;for(const a of vv(n,e)){let c=Np,p=!0;switch(a.op){case"<":case"<=":c=Cm(a.value);break;case"==":case"in":case">=":c=a.value;break;case">":c=a.value,p=!1;break;case"!=":case"not-in":c=Np}gv({value:r,inclusive:i},{value:c,inclusive:p})<0&&(r=c,i=p)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];gv({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function oC(n,e,t){let r=_l,i=!0;for(const a of vv(n,e)){let c=_l,p=!0;switch(a.op){case">=":case">":c=nC(a.value),p=!1;break;case"==":case"in":case"<=":c=a.value;break;case"<":c=a.value,p=!1;break;case"!=":case"not-in":c=_l}qw({value:r,inclusive:i},{value:c,inclusive:p})>0&&(r=c,i=p)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];qw({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class va{constructor(e,t=null,r=[],i=[],a=null,c="F",p=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=p,this.endAt=_,this.dt=null,this._t=null}}function bv(n,e,t,r,i,a,c,p){return new va(n,e,t,r,i,a,c,p)}function xh(n){return new va(n)}function Mm(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function iD(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function wv(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function sD(n){return null!==n.collectionGroup}function Mh(n){const e=Xe(n);if(null===e.dt){e.dt=[];const t=wv(e),r=iD(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new ku(t)),e.dt.push(new ku(jn.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.dt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new ku(jn.keyField(),a))}}}return e.dt}function rs(n){const e=Xe(n);if(!e._t)if("F"===e.limitType)e._t=yv(e.path,e.collectionGroup,Mh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Mh(e))t.push(new ku(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Ru(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ru(e.startAt.position,e.startAt.inclusive):null;e._t=yv(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function oD(n,e){e.getFirstInequalityField(),wv(n);const t=n.filters.concat([e]);return new va(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Dv(n,e,t){return new va(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Om(n,e){return Op(rs(n),rs(e))&&n.limitType===e.limitType}function aC(n){return`${ed(rs(n))}|lt:${n.limitType}`}function aD(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Xc(r)).join(", ")}]`),kt(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ap(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ap(r)).join(",")),`Target(${t})`}(rs(n))}; limitType=${n.limitType})`}function ba(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):ze.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Mh(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,c){const p=Kw(i,a,c);return i.inclusive?p<=0:p<0}(t.startAt,Mh(t),r)||t.endAt&&!function(i,a,c){const p=Kw(i,a,c);return i.inclusive?p>=0:p>0}(t.endAt,Mh(t),r)));var t,r}function Rm(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function lD(n){return(e,t)=>{let r=!1;for(const i of Mh(n)){const a=uD(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function uD(n,e,t){const r=n.field.isKeyField()?ze.comparator(e.key,t.key):function(i,a,c){const p=a.data.field(i),_=c.data.field(i);return null!==p&&null!==_?ya(p,_):at()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return at()}}function km(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sh(e)?"-0":e}}function Ev(n){return{integerValue:""+n}}function Pm(n,e){return dv(e)?Ev(e):km(n,e)}class Fm{constructor(){this._=void 0}}function Pu(n,e,t){return n instanceof Oh?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Fu?hD(n,e):n instanceof td?kp(n,e):function(r,i){const a=dD(r,i),c=Lm(a)+Lm(r.gt);return fv(a)&&fv(r.gt)?Ev(c):km(r.yt,c)}(n,e)}function cD(n,e,t){return n instanceof Fu?hD(n,e):n instanceof td?kp(n,e):t}function dD(n,e){return n instanceof Oo?fv(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Oh extends Fm{}class Fu extends Fm{constructor(e){super(),this.elements=e}}function hD(n,e){const t=nd(e);for(const r of n.elements)t.some(i=>_a(i,r))||t.push(r);return{arrayValue:{values:t}}}class td extends Fm{constructor(e){super(),this.elements=e}}function kp(n,e){let t=nd(e);for(const r of n.elements)t=t.filter(i=>!_a(i,r));return{arrayValue:{values:t}}}class Oo extends Fm{constructor(e,t){super(),this.yt=e,this.gt=t}}function Lm(n){return ar(n.integerValue||n.doubleValue)}function nd(n){return Ah(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class rd{constructor(e,t){this.field=e,this.transform=t}}class fD{constructor(e,t){this.version=e,this.transformResults=t}}class Rn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Rn}static exists(e){return new Rn(void 0,e)}static updateTime(e){return new Rn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rh(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class kh{}function Iv(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Jr(n.key,Rn.none()):new id(n.key,n.data,Rn.none());{const t=n.data,r=Ur.empty();let i=new In(jn.comparator);for(let a of e.fields)if(!i.has(a)){let c=t.field(a);null===c&&a.length>1&&(a=a.popLast(),c=t.field(a)),null===c?r.delete(a):r.set(a,c),i=i.add(a)}return new wl(n.key,r,new Bi(i.toArray()),Rn.none())}}function Cv(n,e,t){n instanceof id?function(r,i,a){const c=r.value.clone(),p=Sv(r.fieldTransforms,i,a.transformResults);c.setAll(p),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof wl?function(r,i,a){if(!Rh(r.precondition,i))return void i.convertToUnknownDocument(a.version);const c=Sv(r.fieldTransforms,i,a.transformResults),p=i.data;p.setAll(Tv(r)),p.setAll(c),i.convertToFoundDocument(a.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Pp(n,e,t,r){return n instanceof id?function(i,a,c,p){if(!Rh(i.precondition,a))return c;const _=i.value.clone(),w=gD(i.fieldTransforms,p,a);return _.setAll(w),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof wl?function(i,a,c,p){if(!Rh(i.precondition,a))return c;const _=gD(i.fieldTransforms,p,a),w=a.data;return w.setAll(Tv(i)),w.setAll(_),a.convertToFoundDocument(a.version,w).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(C=>C.field))}(n,e,t,r):(c=t,Rh(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c);var a,c}function $N(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=dD(r.transform,i||null);null!=a&&(null===t&&(t=Ur.empty()),t.set(r.field,a))}return t||null}function pD(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Ch(t,r,(i,a)=>function Vm(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Fu&&r instanceof Fu||t instanceof td&&r instanceof td?Ch(t.elements,r.elements,_a):t instanceof Oo&&r instanceof Oo?_a(t.gt,r.gt):t instanceof Oh&&r instanceof Oh);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class id extends kh{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class wl extends kh{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Tv(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Sv(n,e,t){const r=new Map;mt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,p=e.data.field(a.field);r.set(a.field,cD(c,p,t[i]))}return r}function gD(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,Pu(a,c,e))}return r}class Jr extends kh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bm extends kh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class lC{constructor(e){this.count=e}}var Hr,on;function Um(n){switch(n){default:return at();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function Nv(n){if(void 0===n)return br("GRPC error has no .code"),ue.UNKNOWN;switch(n){case Hr.OK:return ue.OK;case Hr.CANCELLED:return ue.CANCELLED;case Hr.UNKNOWN:return ue.UNKNOWN;case Hr.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Hr.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Hr.INTERNAL:return ue.INTERNAL;case Hr.UNAVAILABLE:return ue.UNAVAILABLE;case Hr.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Hr.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Hr.NOT_FOUND:return ue.NOT_FOUND;case Hr.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Hr.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Hr.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Hr.ABORTED:return ue.ABORTED;case Hr.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Hr.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Hr.DATA_LOSS:return ue.DATA_LOSS;default:return at()}}(on=Hr||(Hr={}))[on.OK=0]="OK",on[on.CANCELLED=1]="CANCELLED",on[on.UNKNOWN=2]="UNKNOWN",on[on.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",on[on.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",on[on.NOT_FOUND=5]="NOT_FOUND",on[on.ALREADY_EXISTS=6]="ALREADY_EXISTS",on[on.PERMISSION_DENIED=7]="PERMISSION_DENIED",on[on.UNAUTHENTICATED=16]="UNAUTHENTICATED",on[on.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",on[on.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",on[on.ABORTED=10]="ABORTED",on[on.OUT_OF_RANGE=11]="OUT_OF_RANGE",on[on.UNIMPLEMENTED=12]="UNIMPLEMENTED",on[on.INTERNAL=13]="INTERNAL",on[on.UNAVAILABLE=14]="UNAVAILABLE",on[on.DATA_LOSS=15]="DATA_LOSS";class Lu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Yc(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return Hw(this.inner)}size(){return this.innerSize}}const uC=new Gn(ze.comparator);function is(){return uC}const Av=new Gn(ze.comparator);function Fp(...n){let e=Av;for(const t of n)e=e.insert(t.key,t);return e}function xv(n){let e=Av;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function wa(){return Ph()}function mD(){return Ph()}function Ph(){return new Lu(n=>n.toString(),(n,e)=>n.isEqual(e))}const _D=new Gn(ze.comparator),cC=new In(ze.comparator);function At(...n){let e=cC;for(const t of n)e=e.add(t);return e}const Mv=new In(Bt);function Hm(){return Mv}class Lp{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,jm.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Lp(bt.min(),i,Hm(),is(),At())}}class jm{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new jm(r,t,At(),At(),At())}}class Vp{constructor(e,t,r,i){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=i}}class yD{constructor(e,t){this.targetId=e,this.Et=t}}class vD{constructor(e,t,r=Br.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class bD{constructor(){this.At=0,this.Rt=DD(),this.bt=Br.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=At(),t=At(),r=At();return this.Rt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:at()}}),new jm(this.bt,this.Pt,e,t,r)}xt(){this.vt=!1,this.Rt=DD()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class Ov{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=is(),this.qt=wD(),this.Ut=new In(Bt)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const r=this.Wt(t);switch(e.state){case 0:this.zt(t)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:at()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,i)=>{this.zt(i)&&t(i)})}Jt(e){const t=e.targetId,r=e.Et.count,i=this.Yt(t);if(i){const a=i.target;if(Rp(a))if(0===r){const c=new ze(a.path);this.Qt(t,c,$n.newNoDocument(c,bt.min()))}else mt(1===r);else this.Xt(t)!==r&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((a,c)=>{const p=this.Yt(c);if(p){if(a.current&&Rp(p.target)){const _=new ze(p.target.path);null!==this.Lt.get(_)||this.te(c,_)||this.Qt(c,_,$n.newNoDocument(_,e))}a.St&&(t.set(c,a.Ct()),a.xt())}});let r=At();this.qt.forEach((a,c)=>{let p=!0;c.forEachWhile(_=>{const w=this.Yt(_);return!w||2===w.purpose||(p=!1,!1)}),p&&(r=r.add(a))}),this.Lt.forEach((a,c)=>c.setReadTime(e));const i=new Lp(e,t,this.Ut,this.Lt,r);return this.Lt=is(),this.qt=wD(),this.Ut=new In(Bt),i}Gt(e,t){if(!this.zt(e))return;const r=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.zt(e))return;const i=this.Wt(e);this.te(e,t)?i.Nt(t,1):i.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new bD,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new In(Bt),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new bD),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function wD(){return new Gn(ze.comparator)}function DD(){return new Gn(ze.comparator)}const Gm={asc:"ASCENDING",desc:"DESCENDING"},Rv={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$m={and:"AND",or:"OR"};class WN{constructor(e,t){this.databaseId=e,this.wt=t}}function Vu(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dC(n,e){return n.wt?e.toBase64():e.toUint8Array()}function ED(n,e){return Vu(n,e.toTimestamp())}function lr(n){return mt(!!n),bt.fromTimestamp(function(e){const t=ml(e);return new On(t.seconds,t.nanos)}(n))}function Wm(n,e){return(t=n,new Jt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function kv(n){const e=Jt.fromString(n);return mt(MD(e)),e}function sd(n,e){return Wm(n.databaseId,e.path)}function Xr(n,e){const t=kv(e);if(t.get(1)!==n.databaseId.projectId)throw new Me(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Me(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ze(ID(t))}function Fh(n,e){return Wm(n.databaseId,e)}function Bp(n){const e=kv(n);return 4===e.length?Jt.emptyPath():ID(e)}function Dl(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ID(n){return mt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function zm(n,e,t){return{name:sd(n,e),fields:t.value.mapValue.fields}}function Pv(n,e,t){const r=Xr(n,e.name),i=lr(e.updateTime),a=e.createTime?lr(e.createTime):bt.min(),c=new Ur({mapValue:{fields:e.fields}}),p=$n.newFoundDocument(r,i,a,c);return t&&p.setHasCommittedMutations(),t?p.setHasCommittedMutations():p}function El(n,e){let t;if(e instanceof id)t={update:zm(n,e.key,e.value)};else if(e instanceof Jr)t={delete:sd(n,e.key)};else if(e instanceof wl)t={update:zm(n,e.key,e.data),updateMask:mC(e.fieldMask)};else{if(!(e instanceof Bm))return at();t={verify:sd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof Oh)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Fu)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof td)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Oo)return{fieldPath:a.field.canonicalString(),increment:c.gt};throw at()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:ED(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:at()),t;var i}function Fv(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Rn.updateTime(lr(i.updateTime)):void 0!==i.exists?Rn.exists(i.exists):Rn.none():Rn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let p=null;"setToServerValue"in c?(mt("REQUEST_TIME"===c.setToServerValue),p=new Oh):"appendMissingElements"in c?p=new Fu(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new td(c.removeAllFromArray.values||[]):"increment"in c?p=new Oo(a,c.increment):at();const _=jn.fromServerFormat(c.fieldPath);return new rd(_,p)}(n,i)):[];var i;if(e.update){const i=Xr(n,e.update.name),a=new Ur({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Bi((e.updateMask.fieldPaths||[]).map(w=>jn.fromServerFormat(w)));return new wl(i,a,c,t,r)}return new id(i,a,t,r)}if(e.delete){const i=Xr(n,e.delete);return new Jr(i,t)}if(e.verify){const i=Xr(n,e.verify);return new Bm(i,t)}return at()}function CD(n,e){return{documents:[Fh(n,e.path)]}}function TD(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Fh(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Fh(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0!==_.length)return xD(vn.create(_,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(w=>{return{field:Bu((C=w).field),direction:AD(C.dir)};var C})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=(w=e.limit,n.wt||kt(w)?w:{value:w});var w,p,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function SD(n){let e=Bp(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){mt(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let a=[];t.where&&(a=function(C){const A=ND(C);return A instanceof vn&&Sm(A)?A.getFilters():[A]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(C=>{return new ku(Lh((A=C).field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let p=null;t.limit&&(p=function(C){let A;return A="object"==typeof C?C.value:C,kt(A)?null:A}(t.limit));let _=null;var C;t.startAt&&(_=new Ru((C=t.startAt).values||[],!!C.before));let w=null;return t.endAt&&(w=function(C){return new Ru(C.values||[],!C.before)}(t.endAt)),bv(e,i,c,a,p,"F",_,w)}function ND(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Lh(e.unaryFilter.field);return qt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Lh(e.unaryFilter.field);return qt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Lh(e.unaryFilter.field);return qt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Lh(e.unaryFilter.field);return qt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return at()}}(n):void 0!==n.fieldFilter?qt.create(Lh((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return at()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return vn.create(e.compositeFilter.filters.map(t=>ND(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return at()}}(e.compositeFilter.op))}(n):at();var e}function AD(n){return Gm[n]}function Lv(n){return Rv[n]}function gC(n){return $m[n]}function Bu(n){return{fieldPath:n.canonicalString()}}function Lh(n){return jn.fromServerFormat(n.fieldPath)}function xD(n){return n instanceof qt?function(e){if("=="===e.op){if(zw(e.value))return{unaryFilter:{field:Bu(e.field),op:"IS_NAN"}};if(tC(e.value))return{unaryFilter:{field:Bu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(zw(e.value))return{unaryFilter:{field:Bu(e.field),op:"IS_NOT_NAN"}};if(tC(e.value))return{unaryFilter:{field:Bu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bu(e.field),op:Lv(e.op),value:e.value}}}(n):n instanceof vn?function(e){const t=e.getFilters().map(r=>xD(r));return 1===t.length?t[0]:{compositeFilter:{op:gC(e.op),filters:t}}}(n):at()}function mC(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function MD(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ui(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Up(e)),e=_C(n.get(t),e);return Up(e)}function _C(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function Up(n){return n+"\x01\x01"}function Ei(n){const e=n.length;if(mt(e>=2),2===e)return mt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Jt.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const c=n.indexOf("\x01",a);switch((c<0||c>t)&&at(),n.charAt(c+1)){case"\x01":const p=n.substring(a,c);let _;0===i.length?_=p:(i+=p,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,c),i+="\0";break;case"\x11":i+=n.substring(a,c+1);break;default:at()}a=c+2}return new Jt(r)}const yC=["userId","batchId"];function Uu(n,e){return[n,Ui(e)]}function OD(n,e,t){return[n,Ui(e),t]}const vC={},Vv=["prefixPath","collectionGroup","readTime","documentId"],bC=["prefixPath","collectionGroup","documentId"],Da=["collectionGroup","readTime","prefixPath","documentId"],Hp=["canonicalId","targetId"],Ii=["targetId","path"],od=["path","targetId"],qm=["collectionId","parent"],oo=["indexId","uid"],Bv=["uid","sequenceNumber"],Vh=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Bh=["indexId","uid","orderedDocumentKey"],Uh=["userId","collectionPath","documentId"],Hh=["userId","collectionPath","largestBatchId"],jh=["userId","collectionGroup","largestBatchId"],ad=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Gh=[...ad,"documentOverlays"],ld=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ud=ld,RD=[...ud,"indexConfiguration","indexState","indexEntries"];class Km extends K1{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function jr(n,e){const t=Xe(n);return io.M(t.se,e)}class Zm{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Cv(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Pp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Pp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=mD();return this.mutations.forEach(i=>{const a=e.get(i.key),c=a.overlayedDocument;let p=this.applyToLocalView(c,a.mutatedFields);p=t.has(i.key)?null:p;const _=Iv(c,p);null!==_&&r.set(i.key,_),c.isValidDocument()||c.convertToNoDocument(bt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),At())}isEqual(e){return this.batchId===e.batchId&&Ch(this.mutations,e.mutations,(t,r)=>pD(t,r))&&Ch(this.baseMutations,e.baseMutations,(t,r)=>pD(t,r))}}class Ym{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){mt(e.mutations.length===r.length);let i=_D;const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new Ym(e,t,r,i)}}class Qm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Il{constructor(e,t,r,i,a=bt.min(),c=bt.min(),p=Br.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p}withSequenceNumber(e){return new Il(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Il(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Il(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Uv{constructor(e){this.ie=e}}function PD(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Jm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:sd(i=n.ie,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Vu(i,a.version.toTimestamp()),createTime:Vu(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Hu(e.version)};else{if(!e.isUnknownDocument())return at();r.unknownDocument={path:t.path.toArray(),version:Hu(e.version)}}var i,a;return r}function Jm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Hu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function cd(n){const e=new On(n.seconds,n.nanoseconds);return bt.fromTimestamp(e)}function ju(n,e){const t=(e.baseMutations||[]).map(a=>Fv(n.ie,a));for(let a=0;a<e.mutations.length-1;++a){const c=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(c.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>Fv(n.ie,a)),i=On.fromMillis(e.localWriteTimeMs);return new Zm(e.batchId,i,t,r)}function dd(n){const e=cd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?cd(n.lastLimboFreeSnapshotVersion):bt.min();let r;var i;return void 0!==n.query.documents?(mt(1===(i=n.query).documents.length),r=rs(xh(Bp(i.documents[0])))):r=rs(SD(n.query)),new Il(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Br.fromBase64String(n.resumeToken))}function Xm(n,e){const t=Hu(e.snapshotVersion),r=Hu(e.lastLimboFreeSnapshotVersion);let i;i=Rp(e.target)?CD(n.ie,e.target):TD(n.ie,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ed(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Hv(n){const e=SD({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Dv(e,e.limit,"L"):e}function $h(n,e){return new Qm(e.largestBatchId,Fv(n.ie,e.overlayMutation))}function jp(n,e){const t=e.path.lastSegment();return[n,Ui(e.path.popLast()),t]}function e_(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Hu(r.readTime),documentKey:Ui(r.documentKey.path),largestBatchId:r.largestBatchId}}class wC{getBundleMetadata(e,t){return t_(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:cd(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return t_(e).put({bundleId:(r=t).id,createTime:Hu(lr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return n_(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Hv(i.bundledQuery),readTime:cd(i.readTime)};var i})}saveNamedQuery(e,t){return n_(e).put({name:(r=t).name,readTime:Hu(lr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function t_(n){return jr(n,"bundles")}function n_(n){return jr(n,"namedQueries")}class Gp{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new Gp(e,t.uid||"")}getOverlay(e,t){return Wh(e).get(jp(this.userId,t)).next(r=>r?$h(this.yt,r):null)}getOverlays(e,t){const r=wa();return ae.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,c)=>{const p=new Qm(t,c);i.push(this.oe(e,p))}),ae.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Ui(c.getCollectionPath())));const a=[];return i.forEach(c=>{const p=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);a.push(Wh(e).Y("collectionPathOverlayIndex",p))}),ae.waitFor(a)}getOverlaysForCollection(e,t,r){const i=wa(),a=Ui(t),c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Wh(e).W("collectionPathOverlayIndex",c).next(p=>{for(const _ of p){const w=$h(this.yt,_);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=wa();let c;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Wh(e).Z({index:"collectionGroupOverlayIndex",range:p},(_,w,C)=>{const A=$h(this.yt,w);a.size()<i||A.largestBatchId===c?(a.set(A.getKey(),A),c=A.largestBatchId):C.done()}).next(()=>a)}oe(e,t){return Wh(e).put(function(r,i,a){const[c,p,_]=jp(i,a.mutation.key);return{userId:i,collectionPath:p,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:El(r.ie,a.mutation)}}(this.yt,this.userId,t))}}function Wh(n){return jr(n,"documentOverlays")}class Cl{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(ar(e.integerValue));else if("doubleValue"in e){const r=ar(e.doubleValue);isNaN(r)?this.he(t,13):(this.he(t,15),Sh(r)?t.le(0):t.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe(`${r.seconds||""}`),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(Ou(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(t,45),t.le(r.latitude||0),t.le(r.longitude||0)}else"mapValue"in e?pv(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):at()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const r=e.fields||{};this.he(t,55);for(const i of Object.keys(r))this.de(i,t),this.ce(r[i],t)}ye(e,t){const r=e.values||[];this.he(t,50);for(const i of r)this.ce(i,t)}me(e,t){this.he(t,37),ze.fromName(e).path.forEach(r=>{this.he(t,60),this.pe(r,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function FD(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function jv(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=FD(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Cl.Ie=new Cl;class Gv{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ee(r.value),r=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Pe()}ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const i=t.codePointAt(0);this.Ee(240|i>>>18),this.Ee(128|63&i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i)}}this.Ae()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const i=t.codePointAt(0);this.be(240|i>>>18),this.be(128|63&i>>>12),this.be(128|63&i>>>6),this.be(128|63&i)}}this.Pe()}Se(e){const t=this.De(e),r=jv(t);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}xe(e){const t=this.De(e),r=jv(t);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class LD{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class DC{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class zh{constructor(){this.$e=new Gv,this.Be=new LD(this.$e),this.Le=new DC(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class Gu{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Gu(this.indexId,this.documentKey,this.arrayValue,r)}}function Tl(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=$v(n.arrayValue,e.arrayValue),0!==t?t:(t=$v(n.directionalValue,e.directionalValue),0!==t?t:ze.comparator(n.documentKey,e.documentKey)))}function $v(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class EC{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const r=t;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){mt(e.collectionGroup===this.collectionId);const t=lv(e);if(void 0!==t&&!this.We(t))return!1;const r=Kc(e);let i=0,a=0;for(;i<r.length&&this.We(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Qe){const c=r[i];if(!this.ze(this.Qe,c)||!this.He(this.Ke[a++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(a>=this.Ke.length||!this.He(this.Ke[a++],c))return!1}return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Wv(n){var e,t;if(mt(n instanceof qt||n instanceof vn),n instanceof qt){if(n instanceof tD){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>qt.create(n.field,"==",a)))||[];return vn.create(i,"or")}return n}const r=n.filters.map(i=>Wv(i));return vn.create(r,n.op)}function VD(n){if(0===n.getFilters().length)return[];const e=r_(Wv(n));return mt(zv(e)),$p(e)||qh(e)?[e]:e.getFilters()}function $p(n){return n instanceof qt}function qh(n){return n instanceof vn&&Sm(n)}function zv(n){return $p(n)||qh(n)||function(e){if(e instanceof vn&&Tm(e)){for(const t of e.getFilters())if(!$p(t)&&!qh(t))return!1;return!0}return!1}(n)}function r_(n){if(mt(n instanceof qt||n instanceof vn),n instanceof qt)return n;if(1===n.filters.length)return r_(n.filters[0]);const e=n.filters.map(r=>r_(r));let t=vn.create(e,n.op);return t=Wp(t),zv(t)?t:(mt(t instanceof vn),mt(Jc(t)),mt(t.filters.length>1),t.filters.reduce((r,i)=>i_(r,i)))}function i_(n,e){let t;return mt(n instanceof qt||n instanceof vn),mt(e instanceof qt||e instanceof vn),t=n instanceof qt?e instanceof qt?vn.create([n,e],"and"):qv(n,e):e instanceof qt?qv(e,n):function(r,i){if(mt(r.filters.length>0&&i.filters.length>0),Jc(r)&&Jc(i))return iC(r,i.getFilters());const a=Tm(r)?r:i,c=Tm(r)?i:r,p=a.filters.map(_=>i_(_,c));return vn.create(p,"or")}(n,e),Wp(t)}function qv(n,e){if(Jc(e))return iC(e,n.getFilters());{const t=e.filters.map(r=>i_(n,r));return vn.create(t,"or")}}function Wp(n){if(mt(n instanceof qt||n instanceof vn),n instanceof qt)return n;const e=n.getFilters();if(1===e.length)return Wp(e[0]);if(rC(n))return n;const t=e.map(i=>Wp(i)),r=[];return t.forEach(i=>{i instanceof qt?r.push(i):i instanceof vn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:vn.create(r,n.op)}class BD{constructor(){this.Je=new s_}addToCollectionParentIndex(e,t){return this.Je.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(As.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(As.min())}updateCollectionGroup(e,t,r){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class s_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new In(Jt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new In(Jt.comparator)).toArray()}}const zp=new Uint8Array(0);class qN{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new s_,this.Xe=new Lu(r=>ed(r),(r,i)=>Op(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const a={collectionId:r,parent:Ui(i)};return UD(e).put(a)}return ae.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Lw(t),""],!1,!0);return UD(e).W(i).next(a=>{for(const c of a){if(c.collectionId!==t)break;r.push(Ei(c.parent))}return r})}addFieldIndex(e,t){const r=Kp(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(p=>[p.fieldPath.canonicalString(),p.kind])};var c;delete i.indexId;const a=r.add(i);if(t.indexState){const c=Zp(e);return a.next(p=>{c.put(e_(p,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=Kp(e),i=Zp(e),a=qp(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=qp(e);let i=!0;const a=new Map;return ae.forEach(this.Ze(t),c=>this.tn(e,c).next(p=>{i&&(i=!!p),a.set(c,p)})).next(()=>{if(i){let c=At();const p=[];return ae.forEach(a,(_,w)=>{var C;Oe("IndexedDbIndexManager",`Using index ${C=_,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map($e=>`${$e.fieldPath}:${$e.kind}`).join(",")}`} to execute ${ed(t)}`);const A=function($e,Pe){const Ge=lv(Pe);if(void 0===Ge)return null;for(const Ye of vv($e,Ge.fieldPath))switch(Ye.op){case"array-contains-any":return Ye.value.arrayValue.values||[];case"array-contains":return[Ye.value]}return null}(w,_),R=function($e,Pe){const Ge=new Map;for(const Ye of Kc(Pe))for(const Pt of vv($e,Ye.fieldPath))switch(Pt.op){case"==":case"in":Ge.set(Ye.fieldPath.canonicalString(),Pt.value);break;case"not-in":case"!=":return Ge.set(Ye.fieldPath.canonicalString(),Pt.value),Array.from(Ge.values())}return null}(w,_),V=function($e,Pe){const Ge=[];let Ye=!0;for(const Pt of Kc(Pe)){const $t=0===Pt.kind?rD($e,Pt.fieldPath,$e.startAt):oC($e,Pt.fieldPath,$e.startAt);Ge.push($t.value),Ye&&(Ye=$t.inclusive)}return new Ru(Ge,Ye)}(w,_),Z=function($e,Pe){const Ge=[];let Ye=!0;for(const Pt of Kc(Pe)){const $t=0===Pt.kind?oC($e,Pt.fieldPath,$e.endAt):rD($e,Pt.fieldPath,$e.endAt);Ge.push($t.value),Ye&&(Ye=$t.inclusive)}return new Ru(Ge,Ye)}(w,_),te=this.en(_,w,V),le=this.en(_,w,Z),He=this.nn(_,w,R),Be=this.sn(_.indexId,A,te,V.inclusive,le,Z.inclusive,He);return ae.forEach(Be,$e=>r.J($e,t.limit).next(Pe=>{Pe.forEach(Ge=>{const Ye=ze.fromSegments(Ge.documentKey);c.has(Ye)||(c=c.add(Ye),p.push(Ye))})}))}).next(()=>p)}return ae.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:VD(vn.create(e.filters,"and")).map(r=>yv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,r,i,a,c,p){const _=(null!=t?t.length:1)*Math.max(r.length,a.length),w=_/(null!=t?t.length:1),C=[];for(let A=0;A<_;++A){const R=t?this.rn(t[A/w]):zp,V=this.on(e,R,r[A%w],i),Z=this.un(e,R,a[A%w],c),te=p.map(le=>this.on(e,R,le,!0));C.push(...this.createRange(V,Z,te))}return C}on(e,t,r,i){const a=new Gu(e,ze.empty(),t,r);return i?a:a.Ue()}un(e,t,r,i){const a=new Gu(e,ze.empty(),t,r);return i?a.Ue():a}tn(e,t){const r=new EC(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let c=null;for(const p of a)r.je(p)&&(!c||p.fields.length>c.fields.length)&&(c=p);return c})}getIndexType(e,t){let r=2;const i=this.Ze(t);return ae.forEach(i,a=>this.tn(e,a).next(c=>{c?0!==r&&c.fields.length<function(p){let _=new In(jn.comparator),w=!1;for(const C of p.filters)for(const A of C.getFlattenedFilters())A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?w=!0:_=_.add(A.field));for(const C of p.orderBy)C.field.isKeyField()||(_=_.add(C.field));return _.size+(w?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}cn(e,t){const r=new zh;for(const i of Kc(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const c=r.qe(i.kind);Cl.Ie.ue(a,c)}return r.Fe()}rn(e){const t=new zh;return Cl.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const r=new zh;return Cl.Ie.ue(Nh(this.databaseId,t),r.qe(function(i){const a=Kc(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Fe()}nn(e,t,r){if(null===r)return[];let i=[];i.push(new zh);let a=0;for(const c of Kc(e)){const p=r[a++];for(const _ of i)if(this.hn(t,c.fieldPath)&&Ah(p))i=this.ln(i,c,p);else{const w=_.qe(c.kind);Cl.Ie.ue(p,w)}}return this.fn(i)}en(e,t,r){return this.nn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Fe();return t}ln(e,t,r){const i=[...e],a=[];for(const c of r.arrayValue.values||[])for(const p of i){const _=new zh;_.seed(p.Fe()),Cl.Ie.ue(c,_.qe(t.kind)),a.push(_)}return a}hn(e,t){return!!e.filters.find(r=>r instanceof qt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Kp(e),i=Zp(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const c=[];return ae.forEach(a,p=>i.get([p.indexId,this.uid]).next(_=>{c.push(function(w,C){const A=C?new Sp(C.sequenceNumber,new As(cd(C.readTime),new ze(Ei(C.documentKey)),C.largestBatchId)):Sp.empty(),R=w.fields.map(([V,Z])=>new Dm(jn.fromServerFormat(V),Z));return new wm(w.indexId,w.collectionGroup,R,A)}(p,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Bt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Kp(e),a=Zp(e);return this.dn(e).next(c=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>ae.forEach(p,_=>a.put(e_(_.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ae.forEach(t,(i,a)=>{const c=r.get(i.collectionGroup);return(c?ae.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(p=>(r.set(i.collectionGroup,p),ae.forEach(p,_=>this._n(e,i,_).next(w=>{const C=this.wn(a,_);return w.isEqual(C)?ae.resolve():this.mn(e,a,_,w,C)}))))})}gn(e,t,r,i){return qp(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.an(r,t.key),documentKey:t.key.path.toArray()})}yn(e,t,r,i){return qp(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.an(r,t.key),t.key.path.toArray()])}_n(e,t,r){const i=qp(e);let a=new In(Tl);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,t)])},(c,p)=>{a=a.add(new Gu(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>a)}wn(e,t){let r=new In(Tl);const i=this.cn(t,e);if(null==i)return r;const a=lv(t);if(null!=a){const c=e.data.field(a.fieldPath);if(Ah(c))for(const p of c.arrayValue.values||[])r=r.add(new Gu(t.indexId,e.key,this.rn(p),i))}else r=r.add(new Gu(t.indexId,e.key,zp,i));return r}mn(e,t,r,i,a){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(p,_,w,C,A){const R=p.getIterator(),V=_.getIterator();let Z=bl(R),te=bl(V);for(;Z||te;){let le=!1,He=!1;if(Z&&te){const Be=w(Z,te);Be<0?He=!0:Be>0&&(le=!0)}else null!=Z?He=!0:le=!0;le?(C(te),te=bl(V)):He?(A(Z),Z=bl(R)):(Z=bl(R),te=bl(V))}}(i,a,Tl,p=>{c.push(this.gn(e,t,r,p))},p=>{c.push(this.yn(e,t,r,p))}),ae.waitFor(c)}dn(e){let t=1;return Zp(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,p)=>Tl(c,p)).filter((c,p,_)=>!p||0!==Tl(c,_[p-1]));const i=[];i.push(e);for(const c of r){const p=Tl(c,e),_=Tl(c,t);if(0===p)i[0]=e.Ue();else if(p>0&&_<0)i.push(c),i.push(c.Ue());else if(_>0)break}i.push(t);const a=[];for(let c=0;c<i.length;c+=2){if(this.pn(i[c],i[c+1]))return[];a.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,zp,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,zp,[]]))}return a}pn(e,t){return Tl(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(kr)}getMinOffset(e,t){return ae.mapArray(this.Ze(t),r=>this.tn(e,r).next(i=>i||at())).next(kr)}}function UD(n){return jr(n,"collectionParents")}function qp(n){return jr(n,"indexEntries")}function Kp(n){return jr(n,"indexConfiguration")}function Zp(n){return jr(n,"indexState")}function kr(n){mt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;uv(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new As(e.readTime,e.documentKey,t)}const Kv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ss{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ss(e,ss.DEFAULT_COLLECTION_PERCENTILE,ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function HD(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],c=IDBKeyRange.only(t.batchId);let p=0;const _=r.Z({range:c},(C,A,R)=>(p++,R.delete()));a.push(_.next(()=>{mt(1===p)}));const w=[];for(const C of t.mutations){const A=OD(e,C.key.path,t.batchId);a.push(i.delete(A)),w.push(C.key)}return ae.waitFor(a).next(()=>w)}function Yp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw at();e=n.noDocument}return JSON.stringify(e).length}ss.DEFAULT_COLLECTION_PERCENTILE=10,ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ss.DEFAULT=new ss(41943040,ss.DEFAULT_COLLECTION_PERCENTILE,ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ss.DISABLED=new ss(-1,0,0);class o_{constructor(e,t,r,i){this.userId=e,this.yt=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static re(e,t,r,i){mt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new o_(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Sl(e).Z({index:"userMutationsIndex",range:r},(i,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Ro(e),c=Sl(e);return c.add({}).next(p=>{mt("number"==typeof p);const _=new Zm(p,t,r,i),w=function(R,V,Z){const te=Z.baseMutations.map(He=>El(R.ie,He)),le=Z.mutations.map(He=>El(R.ie,He));return{userId:V,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:te,mutations:le}}(this.yt,this.userId,_),C=[];let A=new In((R,V)=>Bt(R.canonicalString(),V.canonicalString()));for(const R of i){const V=OD(this.userId,R.key.path,p);A=A.add(R.key.path.popLast()),C.push(c.put(w)),C.push(a.put(V,vC))}return A.forEach(R=>{C.push(this.indexManager.addToCollectionParentIndex(e,R))}),e.addOnCommittedListener(()=>{this.In[p]=_.keys()}),ae.waitFor(C).next(()=>_)})}lookupMutationBatch(e,t){return Sl(e).get(t).next(r=>r?(mt(r.userId===this.userId),ju(this.yt,r)):null)}Tn(e,t){return this.In[t]?ae.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Sl(e).Z({index:"userMutationsIndex",range:i},(c,p,_)=>{p.userId===this.userId&&(mt(p.batchId>=r),a=ju(this.yt,p)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Sl(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,c)=>{r=a.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Sl(e).W("userMutationsIndex",t).next(r=>r.map(i=>ju(this.yt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Uu(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Ro(e).Z({range:i},(c,p,_)=>{const[w,C,A]=c,R=Ei(C);if(w===this.userId&&t.path.isEqual(R))return Sl(e).get(A).next(V=>{if(!V)throw at();mt(V.userId===this.userId),a.push(ju(this.yt,V))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new In(Bt);const i=[];return t.forEach(a=>{const c=Uu(this.userId,a.path),p=IDBKeyRange.lowerBound(c),_=Ro(e).Z({range:p},(w,C,A)=>{const[R,V,Z]=w,te=Ei(V);R===this.userId&&a.path.isEqual(te)?r=r.add(Z):A.done()});i.push(_)}),ae.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Uu(this.userId,r),c=IDBKeyRange.lowerBound(a);let p=new In(Bt);return Ro(e).Z({range:c},(_,w,C)=>{const[A,R,V]=_,Z=Ei(R);A===this.userId&&r.isPrefixOf(Z)?Z.length===i&&(p=p.add(V)):C.done()}).next(()=>this.En(e,p))}En(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Sl(e).get(a).next(c=>{if(null===c)throw at();mt(c.userId===this.userId),r.push(ju(this.yt,c))}))}),ae.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return HD(e.se,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ae.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ae.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Ro(e).Z({range:r},(a,c,p)=>{if(a[0]===this.userId){const _=Ei(a[1]);i.push(_)}else p.done()}).next(()=>{mt(0===i.length)})})}containsKey(e,t){return Zv(e,this.userId,t)}Rn(e){return jD(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Zv(n,e,t){const r=Uu(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let c=!1;return Ro(n).Z({range:a,X:!0},(p,_,w)=>{const[C,A,R]=p;C===e&&A===i&&(c=!0),w.done()}).next(()=>c)}function Sl(n){return jr(n,"mutations")}function Ro(n){return jr(n,"documentMutations")}function jD(n){return jr(n,"mutationQueues")}class hd{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new hd(0)}static vn(){return new hd(-1)}}class GD{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new hd(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>bt.fromTimestamp(new On(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Kh(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(mt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Kh(e).Z((c,p)=>{const _=dd(p);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>ae.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Kh(e).Z((r,i)=>{const a=dd(i);t(a)})}Vn(e){return Yv(e).get("targetGlobalKey").next(t=>(mt(null!==t),t))}Sn(e,t){return Yv(e).put("targetGlobalKey",t)}Dn(e,t){return Kh(e).put(Xm(this.yt,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ed(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Kh(e).Z({range:i,index:"queryTargetsIndex"},(c,p,_)=>{const w=dd(p);Op(t,w.target)&&(a=w,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=fd(e);return t.forEach(c=>{const p=Ui(c.path);i.push(a.put({targetId:r,path:p})),i.push(this.referenceDelegate.addReference(e,r,c))}),ae.waitFor(i)}removeMatchingKeys(e,t,r){const i=fd(e);return ae.forEach(t,a=>{const c=Ui(a.path);return ae.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=fd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=fd(e);let a=At();return i.Z({range:r,X:!0},(c,p,_)=>{const w=Ei(c[1]),C=new ze(w);a=a.add(C)}).next(()=>a)}containsKey(e,t){const r=Ui(t.path),i=IDBKeyRange.bound([r],[Lw(r)],!1,!0);let a=0;return fd(e).Z({index:"documentTargetsIndex",X:!0,range:i},([c,p],_,w)=>{0!==c&&(a++,w.done())}).next(()=>a>0)}ne(e,t){return Kh(e).get(t).next(r=>r?dd(r):null)}}function Kh(n){return jr(n,"targets")}function Yv(n){return jr(n,"targetGlobal")}function fd(n){return jr(n,"targetDocuments")}function a_([n,e],[t,r]){const i=Bt(n,t);return 0===i?Bt(e,r):i}class Qv{constructor(e){this.xn=e,this.buffer=new In(a_),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();a_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ea{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,_e.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Mu(r)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield pl(r)}yield t.Fn(3e5)}))}}class IC{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ae.resolve(xs.at);const r=new Qv(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(Kv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kv):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let r,i,a,c,p,_,w;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),i=this.params.maximumSequenceNumbersToCollect):i=A,c=Date.now(),this.nthSequenceNumber(e,i))).next(A=>(r=A,p=Date.now(),this.removeTargets(e,r,t))).next(A=>(a=A,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(A=>(w=Date.now(),bm()<=wi.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-C}ms\n\tDetermined least recently used ${i} in `+(p-c)+`ms\n\tRemoved ${a} targets in `+(_-p)+`ms\n\tRemoved ${A} documents in `+(w-_)+`ms\nTotal Duration: ${w-C}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:A})))}}class $D{constructor(e,t){this.db=e,this.garbageCollector=new IC(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Un(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return Os(e,r)}removeReference(e,t,r){return Os(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Os(e,t)}Gn(e,t){return function(r,i){let a=!1;return jD(r).tt(c=>Zv(r,c,i).next(p=>(p&&(a=!0),ae.resolve(!p)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Kn(e,(c,p)=>{if(p<=t){const _=this.Gn(e,c).next(w=>{if(!w)return a++,r.getEntry(e,c).next(()=>(r.removeEntry(c,bt.min()),fd(e).delete([0,Ui(c.path)])))});i.push(_)}}).next(()=>ae.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Os(e,t)}Kn(e,t){const r=fd(e);let i,a=xs.at;return r.Z({index:"documentTargetsIndex"},([c,p],{path:_,sequenceNumber:w})=>{0===c?(a!==xs.at&&t(new ze(Ei(i)),a),a=w,i=_):a=xs.at}).next(()=>{a!==xs.at&&t(new ze(Ei(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Os(n,e){return fd(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ui(e.path),sequenceNumber:r}));var r}class ao{constructor(){this.changes=new Lu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$n.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ae.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ko{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return pd(e).put(r)}removeEntry(e,t,r){return pd(e).delete(function(i,a){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Jm(a),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=$n.newInvalidDocument(t);return pd(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Qp(t))},(i,a)=>{r=this.jn(t,a)}).next(()=>r)}Wn(e,t){let r={size:0,document:$n.newInvalidDocument(t)};return pd(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Qp(t))},(i,a)=>{r={document:this.jn(t,a),size:Yp(a)}}).next(()=>r)}getEntries(e,t){let r=is();return this.zn(e,t,(i,a)=>{const c=this.jn(i,a);r=r.insert(i,c)}).next(()=>r)}Hn(e,t){let r=is(),i=new Gn(ze.comparator);return this.zn(e,t,(a,c)=>{const p=this.jn(a,c);r=r.insert(a,p),i=i.insert(a,Yp(c))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return ae.resolve();let i=new In(l_);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(Qp(i.first()),Qp(i.last())),c=i.getIterator();let p=c.getNext();return pd(e).Z({index:"documentKeyIndex",range:a},(_,w,C)=>{const A=ze.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;p&&l_(p,A)<0;)r(p,null),p=c.getNext();p&&p.isEqual(A)&&(r(p,w),p=c.hasNext()?c.getNext():null),p?C.j(Qp(p)):C.done()}).next(()=>{for(;p;)r(p,null),p=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),Jm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pd(e).W(IDBKeyRange.bound(i,a,!0)).next(c=>{let p=is();for(const _ of c){const w=this.jn(ze.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);p=p.insert(w.key,w)}return p})}getAllFromCollectionGroup(e,t,r,i){let a=is();const c=qD(t,r),p=qD(t,As.max());return pd(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,p,!0)},(_,w,C)=>{const A=this.jn(ze.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(A.key,A),a.size===i&&C.done()}).next(()=>a)}newChangeBuffer(e){return new WD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return zD(e).get("remoteDocumentGlobalKey").next(t=>(mt(!!t),t))}Qn(e,t){return zD(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function kD(n,e){let t;if(e.document)t=Pv(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ze.fromSegments(e.noDocument.path),i=cd(e.noDocument.readTime);t=$n.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return at();{const r=ze.fromSegments(e.unknownDocument.path),i=cd(e.unknownDocument.version);t=$n.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new On(r[0],r[1]);return bt.fromTimestamp(i)}(e.readTime)),t}(this.yt,t);if(!r.isNoDocument()||!r.version.isEqual(bt.min()))return r}return $n.newInvalidDocument(e)}}function Jv(n){return new ko(n)}class WD extends ao{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Lu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new In((a,c)=>Bt(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const p=this.Xn.get(a);if(t.push(this.Yn.removeEntry(e,a,p.readTime)),c.isValidDocument()){const _=PD(this.Yn.yt,c);i=i.add(a.path.popLast()),r+=Yp(_)-p.size,t.push(this.Yn.addEntry(e,a,_))}else if(r-=p.size,this.trackRemovals){const _=PD(this.Yn.yt,c.convertToNoDocument(bt.min()));t.push(this.Yn.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Yn.updateMetadata(e,r)),ae.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((a,c)=>{this.Xn.set(a,{size:c,readTime:r.get(a).readTime})}),r))}}function zD(n){return jr(n,"remoteDocumentGlobal")}function pd(n){return jr(n,"remoteDocumentsV14")}function Qp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function qD(n,e){const t=e.documentKey.path.toArray();return[n,Jm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function l_(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Bt(t[a],r[a]),i)return i;return i=Bt(t.length,r.length),i||(i=Bt(t[t.length-2],r[r.length-2]),i||Bt(t[t.length-1],r[r.length-1]))}class Jp{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class KD{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Pp(r.mutation,i,Bi.empty(),On.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,At()).next(()=>r))}getLocalViewOfDocuments(e,t,r=At()){const i=wa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let c=Fp();return a.forEach((p,_)=>{c=c.insert(p,_.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=wa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,At()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((c,p)=>{t.set(c,p)})})}computeViews(e,t,r,i){let a=is();const c=Ph(),p=Ph();return t.forEach((_,w)=>{const C=r.get(w.key);i.has(w.key)&&(void 0===C||C.mutation instanceof wl)?a=a.insert(w.key,w):void 0!==C&&(c.set(w.key,C.mutation.getFieldMask()),Pp(C.mutation,w,C.mutation.getFieldMask(),On.now()))}),this.recalculateAndSaveOverlays(e,a).next(_=>(_.forEach((w,C)=>c.set(w,C)),t.forEach((w,C)=>{var A;return p.set(w,new Jp(C,null!==(A=c.get(w))&&void 0!==A?A:null))}),p))}recalculateAndSaveOverlays(e,t){const r=Ph();let i=new Gn((c,p)=>c-p),a=At();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const p of c)p.keys().forEach(_=>{const w=t.get(_);if(null===w)return;let C=r.get(_)||Bi.empty();C=p.applyToLocalView(w,C),r.set(_,C);const A=(i.get(p.batchId)||At()).add(_);i=i.insert(p.batchId,A)})}).next(()=>{const c=[],p=i.getReverseIterator();for(;p.hasNext();){const _=p.getNext(),w=_.key,C=_.value,A=mD();C.forEach(R=>{if(!a.has(R)){const V=Iv(t.get(R),r.get(R));null!==V&&A.set(R,V),a=a.add(R)}}),c.push(this.documentOverlayCache.saveOverlays(e,w,A))}return ae.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return ze.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):sD(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ae.resolve(wa());let p=-1,_=a;return c.next(w=>ae.forEach(w,(C,A)=>(p<A.largestBatchId&&(p=A.largestBatchId),a.get(C)?ae.resolve():this.remoteDocumentCache.getEntry(e,C).next(R=>{_=_.insert(C,R)}))).next(()=>this.populateOverlays(e,w,a)).next(()=>this.computeViews(e,_,w,At())).next(C=>({batchId:p,changes:xv(C)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ze(t)).next(r=>{let i=Fp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=Fp();return this.indexManager.getCollectionParents(e,i).next(c=>ae.forEach(c,p=>{const _=(w=t,C=p.child(i),new va(C,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,C;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(w=>{w.forEach((C,A)=>{a=a.insert(C,A)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((p,_)=>{const w=_.getKey();null===i.get(w)&&(i=i.insert(w,$n.newInvalidDocument(w)))});let c=Fp();return i.forEach((p,_)=>{const w=a.get(p);void 0!==w&&Pp(w.mutation,_,Bi.empty(),On.now()),ba(t,_)&&(c=c.insert(p,_))}),c})}}class ZD{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ae.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:lr(r.createTime)}),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:Hv(r.bundledQuery),readTime:lr(r.readTime)}),ae.resolve();var r}}class CC{constructor(){this.overlays=new Gn(ze.comparator),this.es=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const r=wa();return ae.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.oe(e,t,a)}),ae.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),ae.resolve()}getOverlaysForCollection(e,t,r){const i=wa(),a=t.length+1,c=new ze(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const _=p.getNext().value,w=_.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return ae.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Gn((w,C)=>w-C);const c=this.overlays.getIterator();for(;c.hasNext();){const w=c.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let C=a.get(w.largestBatchId);null===C&&(C=wa(),a=a.insert(w.largestBatchId,C)),C.set(w.getKey(),w)}}const p=wa(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((w,C)=>p.set(w,C)),!(p.size()>=i)););return ae.resolve(p)}oe(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Qm(t,r));let a=this.es.get(t);void 0===a&&(a=At(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class u_{constructor(){this.ns=new In(Gr.ss),this.rs=new In(Gr.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Gr(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Gr(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new ze(new Jt([])),r=new Gr(t,e),i=new Gr(t,e+1),a=[];return this.rs.forEachInRange([r,i],c=>{this.cs(c),a.push(c.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new ze(new Jt([])),r=new Gr(t,e),i=new Gr(t,e+1);let a=At();return this.rs.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new Gr(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Gr{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return ze.comparator(e.key,t.key)||Bt(e._s,t._s)}static os(e,t){return Bt(e._s,t._s)||ze.comparator(e.key,t.key)}}class c_{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new In(Gr.ss)}checkEmpty(e){return ae.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const c=new Zm(a,t,r,i);this.mutationQueue.push(c);for(const p of i)this.gs=this.gs.add(new Gr(p.key,a)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ae.resolve(c)}lookupMutationBatch(e,t){return ae.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),a=i<0?0:i;return ae.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Gr(t,0),i=new Gr(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],c=>{const p=this.ys(c._s);a.push(p)}),ae.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new In(Bt);return t.forEach(i=>{const a=new Gr(i,0),c=new Gr(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,c],p=>{r=r.add(p._s)})}),ae.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;ze.isDocumentKey(a)||(a=a.child(""));const c=new Gr(new ze(a),0);let p=new In(Bt);return this.gs.forEachWhile(_=>{const w=_.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(p=p.add(_._s)),!0)},c),ae.resolve(this.Is(p))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){mt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ae.forEach(t.mutations,i=>{const a=new Gr(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Gr(t,0),i=this.gs.firstAfterOrEqual(r);return ae.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ae.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class TC{constructor(e){this.Es=e,this.docs=new Gn(ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ae.resolve(r?r.document.mutableCopy():$n.newInvalidDocument(t))}getEntries(e,t){let r=is();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():$n.newInvalidDocument(i))}),ae.resolve(r)}getAllFromCollection(e,t,r){let i=is();const a=new ze(t.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:p,value:{document:_}}=c.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||uv(ma(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return ae.resolve(i)}getAllFromCollectionGroup(e,t,r,i){at()}As(e,t){return ae.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new YD(this)}getSize(e){return ae.resolve(this.size)}}class YD extends ao{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),ae.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class QD{constructor(e){this.persistence=e,this.Rs=new Lu(t=>ed(t),Op),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new u_,this.targetCount=0,this.vs=hd.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ae.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new hd(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.Dn(t),ae.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Rs.forEach((c,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Rs.delete(c),a.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),ae.waitFor(a).next(()=>i)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ae.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ae.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),ae.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ae.resolve(r)}containsKey(e,t){return ae.resolve(this.Ps.containsKey(t))}}class Xv{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new xs(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new QD(this),this.indexManager=new BD,this.remoteDocumentCache=new TC(r=>this.referenceDelegate.xs(r)),this.yt=new Uv(t),this.Ns=new ZD(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new CC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new c_(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const i=new d_(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ms(e,t){return ae.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class d_ extends K1{constructor(e){super(),this.currentSequenceNumber=e}}class Xp{constructor(e){this.persistence=e,this.Fs=new u_,this.$s=null}static Bs(e){return new Xp(e)}get Ls(){if(this.$s)return this.$s;throw at()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ae.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.Ls,r=>{const i=ze.fromPath(r);return this.qs(e,i).next(a=>{a||t.removeEntry(i,bt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return ae.or([()=>ae.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class JD{constructor(e){this.yt=e}$(e,t,r,i){const a=new cv("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yC,{unique:!0}),p.createObjectStore("documentMutations"),e0(e),function(p){p.createObjectStore("remoteDocuments")}(e));let c=ae.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),e0(e)),c=c.next(()=>function(p){const _=p.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:bt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(p,_){return _.store("mutations").W().next(w=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yC,{unique:!0});const C=_.store("mutations"),A=w.map(R=>C.put(R));return ae.waitFor(A)})}(e,a))),c=c.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Us(a))),r<6&&i>=6&&(c=c.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(a)))),r<7&&i>=7&&(c=c.next(()=>this.Gs(a))),r<8&&i>=8&&(c=c.next(()=>this.Qs(e,a))),r<9&&i>=9&&(c=c.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.js(a))),r<11&&i>=11&&(c=c.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(p){const _=p.createObjectStore("documentOverlays",{keyPath:Uh});_.createIndex("collectionPathOverlayIndex",Hh,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",jh,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(p){const _=p.createObjectStore("remoteDocumentsV14",{keyPath:Vv});_.createIndex("documentKeyIndex",bC),_.createIndex("collectionGroupIndex",Da)}(e)).next(()=>this.Ws(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.zs(e,a))),r<15&&i>=15&&(c=c.next(()=>function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:oo}).createIndex("sequenceNumberIndex",Bv,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:Vh}).createIndex("documentKeyIndex",Bh,{unique:!1})}(e))),c}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=Yp(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>ae.forEach(i,a=>{const c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",c).next(p=>ae.forEach(p,_=>{mt(_.userId===a.userId);const w=ju(this.yt,_);return HD(e,a.userId,w).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((c,p)=>{const _=new Jt(c),w=[0,Ui(_)];a.push(t.get(w).next(C=>C?ae.resolve():t.put({targetId:0,path:Ui(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ae.waitFor(a))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:qm});const r=t.store("collectionParents"),i=new s_,a=c=>{if(i.add(c)){const p=c.lastSegment(),_=c.popLast();return r.put({collectionId:p,parent:Ui(_)})}};return t.store("remoteDocuments").Z({X:!0},(c,p)=>{const _=new Jt(c);return a(_.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([c,p,_],w)=>{const C=Ei(p);return a(C.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const a=dd(i),c=Xm(this.yt,a);return t.put(c)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,c)=>{const p=t.store("remoteDocumentsV14"),_=(w=c,w.document?new ze(Jt.fromString(w.document.name).popFirst(5)):w.noDocument?ze.fromSegments(w.noDocument.path):w.unknownDocument?ze.fromSegments(w.unknownDocument.path):at()).path.toArray();var w;const C={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(p.put(C))}).next(()=>ae.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=Jv(this.yt),a=new Xv(Xp.Bs,this.yt.ie);return r.W().next(c=>{const p=new Map;return c.forEach(_=>{var w;let C=null!==(w=p.get(_.userId))&&void 0!==w?w:At();ju(this.yt,_).keys().forEach(A=>C=C.add(A)),p.set(_.userId,C)}),ae.forEach(p,(_,w)=>{const C=new Or(w),A=Gp.re(this.yt,C),R=a.getIndexManager(C),V=o_.re(C,this.yt,R,a.referenceDelegate);return new KD(i,V,A,R).recalculateAndSaveOverlaysForDocumentKeys(new Km(t,xs.at),_).next()})})}}function e0(n){n.createObjectStore("targetDocuments",{keyPath:Ii}).createIndex("documentTargetsIndex",od,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Hp,{unique:!0}),n.createObjectStore("targetGlobal")}const h_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class f_{constructor(e,t,r,i,a,c,p,_,w,C,A=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=a,this.window=c,this.document=p,this.Js=w,this.Ys=C,this.Xs=A,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=R=>Promise.resolve(),!f_.C())throw new Me(ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new $D(this,i),this.ii=t+"main",this.yt=new Uv(_),this.ri=new io(this.ii,this.Xs,new JD(this.yt)),this.Cs=new GD(this.referenceDelegate,this.yt),this.remoteDocumentCache=Jv(this.yt),this.Ns=new wC,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===C&&br("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(ue.FAILED_PRECONDITION,h_);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new xs(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,_e.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,_e.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>eg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Mu(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Zh(e).get("owner").next(t=>ae.resolve(this.mi(t)))}gi(e){return eg(e).delete(this.clientId)}yi(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=jr(r,"clientMetadata");return i.W().next(a=>{const c=e.Ii(a,18e5),p=a.filter(_=>-1===c.indexOf(_));return ae.forEach(p,_=>i.delete(_.clientId)).next(()=>p)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ae.resolve(!0):Zh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Me(ue.FAILED_PRECONDITION,h_);return!1}}return!(!this.networkEnabled||!this.inForeground)||eg(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,p=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Km(t,xs.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>eg(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return o_.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new qN(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return Gp.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(c=this.Xs)?RD:14===c?ud:13===c?ld:12===c?Gh:11===c?ad:void at();var c;let p;return this.ri.runTransaction(e,i,a,_=>(p=new Km(_,this.Ss?this.Ss.next():xs.at),"readwrite-primary"===t?this.fi(p).next(w=>!!w||this.di(p)).next(w=>{if(!w)throw br(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Me(ue.FAILED_PRECONDITION,q1);return r(p)}).next(w=>this.wi(p).next(()=>w)):this.Vi(p).next(()=>r(p)))).then(_=>(p.raiseOnCommittedEvent(),_))}Vi(e){return Zh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Me(ue.FAILED_PRECONDITION,h_)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Zh(e).put("owner",t)}static C(){return io.C()}_i(e){const t=Zh(e);return t.get("owner").next(r=>this.mi(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ae.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(br(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Tt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return br("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){br("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Zh(n){return jr(n,"owner")}function eg(n){return jr(n,"clientMetadata")}function p_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class t0{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=At(),i=At();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new t0(e,t.fromCache,r,i)}}class XD{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(a=>a||this.Oi(e,t,i,r)).next(a=>a||this.Mi(e,t))}ki(e,t){if(Mm(t))return ae.resolve(null);let r=rs(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Dv(t,null,"F"),r=rs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=At(...a);return this.Ni.getDocuments(e,c).next(p=>this.indexManager.getMinOffset(e,r).next(_=>{const w=this.Fi(t,p);return this.$i(t,w,c,_.readTime)?this.ki(e,Dv(t,null,"F")):this.Bi(e,w,t,_)}))})))}Oi(e,t,r,i){return Mm(t)||i.isEqual(bt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(a=>{const c=this.Fi(t,a);return this.$i(t,c,r,i)?this.Mi(e,t):(bm()<=wi.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),aD(t)),this.Bi(e,c,t,Zc(i,-1)))})}Fi(e,t){let r=new In(lD(e));return t.forEach((i,a)=>{ba(e,a)&&(r=r.add(a))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Mi(e,t){return bm()<=wi.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",aD(t)),this.Ni.getDocumentsMatchingQuery(e,t,As.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}class SC{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.yt=i,this.qi=new Gn(Bt),this.Ui=new Lu(a=>ed(a),Op),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KD(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function eE(n,e,t,r){return new SC(n,e,t,r)}function tE(n,e){return n0.apply(this,arguments)}function n0(){return n0=(0,_e.Z)(function*(n,e){const t=Xe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],p=[];let _=At();for(const w of i){c.push(w.batchId);for(const C of w.mutations)_=_.add(C.key)}for(const w of a){p.push(w.batchId);for(const C of w.mutations)_=_.add(C.key)}return t.localDocuments.getDocuments(r,_).next(w=>({ji:w,removedBatchIds:c,addedBatchIds:p}))})})}),n0.apply(this,arguments)}function NC(n,e){const t=Xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(c,p,_,w){const C=_.batch,A=C.keys();let R=ae.resolve();return A.forEach(V=>{R=R.next(()=>w.getEntry(p,V)).next(Z=>{const te=_.docVersions.get(V);mt(null!==te),Z.version.compareTo(te)<0&&(C.applyToRemoteDocument(Z,_),Z.isValidDocument()&&(Z.setReadTime(_.commitVersion),w.addEntry(Z)))})}),R.next(()=>c.mutationQueue.removeMutationBatch(p,C))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let p=At();for(let _=0;_<c.mutationResults.length;++_)c.mutationResults[_].transformResults.length>0&&(p=p.add(c.batch.mutations[_].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function nE(n){const e=Xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function AC(n,e){const t=Xe(n),r=e.snapshotVersion;let i=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.qi;const p=[];e.targetChanges.forEach((C,A)=>{const R=i.get(A);if(!R)return;p.push(t.Cs.removeMatchingKeys(a,C.removedDocuments,A).next(()=>t.Cs.addMatchingKeys(a,C.addedDocuments,A)));let V=R.withSequenceNumber(a.currentSequenceNumber);var Z,te,le;e.targetMismatches.has(A)?V=V.withResumeToken(Br.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):C.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(C.resumeToken,r)),i=i.insert(A,V),te=V,le=C,(0===(Z=R).resumeToken.approximateByteSize()||te.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8||le.addedDocuments.size+le.modifiedDocuments.size+le.removedDocuments.size>0)&&p.push(t.Cs.updateTargetData(a,V))});let _=is(),w=At();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(a,C))}),p.push(rE(a,c,e.documentUpdates).next(C=>{_=C.Wi,w=C.zi})),!r.isEqual(bt.min())){const C=t.Cs.getLastRemoteSnapshotVersion(a).next(A=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));p.push(C)}return ae.waitFor(p).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,_,w)).next(()=>_)}).then(a=>(t.qi=i,a))}function rE(n,e,t){let r=At(),i=At();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=is();return t.forEach((p,_)=>{const w=a.get(p);_.isFoundDocument()!==w.isFoundDocument()&&(i=i.add(p)),_.isNoDocument()&&_.version.isEqual(bt.min())?(e.removeEntry(p,_.readTime),c=c.insert(p,_)):!w.isValidDocument()||_.version.compareTo(w.version)>0||0===_.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(_),c=c.insert(p,_)):Oe("LocalStore","Ignoring outdated watch update for ",p,". Current version:",w.version," Watch version:",_.version)}),{Wi:c,zi:i}})}function xC(n,e){const t=Xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Yh(n,e){const t=Xe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(a=>a?(i=a,ae.resolve(i)):t.Cs.allocateTargetId(r).next(c=>(i=new Il(e,c,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.qi.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.qi=t.qi.insert(r.targetId,r),t.Ui.set(e,r.targetId)),r})}function Qh(n,e,t){return r0.apply(this,arguments)}function r0(){return r0=(0,_e.Z)(function*(n,e,t){const r=Xe(n),i=r.qi.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Mu(c))throw c;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.qi=r.qi.remove(e),r.Ui.delete(i.target)}),r0.apply(this,arguments)}function g_(n,e,t){const r=Xe(n);let i=bt.min(),a=At();return r.persistence.runTransaction("Execute query","readonly",c=>function(p,_,w){const C=Xe(p),A=C.Ui.get(w);return void 0!==A?ae.resolve(C.qi.get(A)):C.Cs.getTargetData(_,w)}(r,c,rs(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(c,p.targetId).next(_=>{a=_})}).next(()=>r.Li.getDocumentsMatchingQuery(c,e,t?i:bt.min(),t?a:At())).next(p=>(oE(r,Rm(e),p),{documents:p,Hi:a})))}function iE(n,e){const t=Xe(n),r=Xe(t.Cs),i=t.qi.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.ne(a,e).next(c=>c?c.target:null))}function sE(n,e){const t=Xe(n),r=t.Ki.get(e)||bt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,Zc(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(oE(t,e,i),i))}function oE(n,e,t){let r=n.Ki.get(e)||bt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}function m_(){return m_=(0,_e.Z)(function*(n,e,t,r){const i=Xe(n);let a=At(),c=is();for(const w of t){const C=e.Ji(w.metadata.name);w.document&&(a=a.add(C));const A=e.Yi(w);A.setReadTime(e.Xi(w.metadata.readTime)),c=c.insert(C,A)}const p=i.Gi.newChangeBuffer({trackRemovals:!0}),_=yield Yh(i,(w=r,rs(xh(Jt.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>rE(w,p,c).next(C=>(p.apply(w),C)).next(C=>i.Cs.removeMatchingKeysForTargetId(w,_.targetId).next(()=>i.Cs.addMatchingKeys(w,a,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(w,C.Wi,C.zi)).next(()=>C.Wi)))}),m_.apply(this,arguments)}function lE(n,e){return __.apply(this,arguments)}function __(){return __=(0,_e.Z)(function*(n,e,t=At()){const r=yield Yh(n,rs(Hv(e.bundledQuery))),i=Xe(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const c=lr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ns.saveNamedQuery(a,e);const p=r.withResumeToken(Br.EMPTY_BYTE_STRING,c);return i.qi=i.qi.insert(p.targetId,p),i.Cs.updateTargetData(a,p).next(()=>i.Cs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Cs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(a,e))})}),__.apply(this,arguments)}function s0(n,e){return`firestore_clients_${n}_${e}`}function o0(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function y_(n,e){return`firestore_targets_${n}_${e}`}class tg{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new Me(i.error.code,i.error.message))),c?new tg(e,t,i.state,a):(br("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Jh{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Me(r.error.code,r.error.message))),a?new Jh(e,r.state,i):(br("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Xh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Hm();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=dv(r.activeTargetIds[c]),a=a.add(r.activeTargetIds[c]);return i?new Xh(e,a):(br("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class v_{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new v_(t.clientId,t.onlineState):(br("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Nl{constructor(){this.activeTargetIds=Hm()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class a0{constructor(e,t,r,i,a){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Gn(Bt),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=s0(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Nl),this.lr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const a=e.getItem(s0(e.persistenceKey,i));if(a){const c=Xh.Zi(i,a);c&&(e.ur=e.ur.insert(c.clientId,c))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(y_(this.persistenceKey,e));if(r){const i=Jh.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(y_(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void br("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(a){let c=xs.at;if(null!=a)try{const p=JSON.parse(a);mt("number"==typeof p),c=p}catch(p){br("SharedClientState","Failed to read sequence number from WebStorage",p)}return c}(r.newValue);i!==xs.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Mr(a)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new tg(this.currentUser,e,t,r),a=o0(this.persistenceKey,this.currentUser,e);this.setItem(a,i.tr())}Er(e){const t=o0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=y_(this.persistenceKey,e),a=new Jh(e,t,r);this.setItem(i,a.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return Xh.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return tg.Zi(new Or(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return Jh.Zi(i,t)}yr(e){return v_.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),c=[],p=[];return a.forEach(_=>{i.has(_)||c.push(_)}),i.forEach(_=>{a.has(_)||p.push(_)}),this.syncEngine.Br(c,p).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Hm();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class uE{constructor(){this.Lr=new Nl,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Nl,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ef{Ur(e){}shutdown(){}}class MC{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const l0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class KN{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class cE extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,a){const c=this.ho(e,t);Oe("RestConnection","Sending: ",c,r);const p={};return this.lo(p,i,a),this.fo(e,c,p,r).then(_=>(Oe("RestConnection","Received: ",_),_),_=>{throw Au("RestConnection",`${e} failed with error: `,_,"url: ",c,"request:",r),_})}_o(e,t,r,i,a,c){return this.ao(e,t,r,i,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+fl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ho(e,t){return`${this.oo}/v1/${t}:${l0[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((a,c)=>{const p=new vm;p.setWithCredentials(!0),p.listenOnce(Ow.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Ip.NO_ERROR:const w=p.getResponseJson();Oe("Connection","XHR received:",JSON.stringify(w)),a(w);break;case Ip.TIMEOUT:Oe("Connection",'RPC "'+e+'" timed out'),c(new Me(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Ip.HTTP_ERROR:const C=p.getStatus();if(Oe("Connection",'RPC "'+e+'" failed with status:',C,"response text:",p.getResponseText()),C>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const R=A?.error;if(R&&R.status&&R.message){const V=function(Z){const te=Z.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(te)>=0?te:ue.UNKNOWN}(R.status);c(new Me(V,R.message))}else c(new Me(ue.UNKNOWN,"Server responded with status "+p.getStatus()))}else c(new Me(ue.UNAVAILABLE,"Connection failed."));break;default:at()}}finally{Oe("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);p.send(t,"POST",_,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=UN(),c=B1(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new U1({})),this.lo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const _=i.join("");Oe("Connection","Creating WebChannel: "+_,p);const w=a.createWebChannel(_,p);let C=!1,A=!1;const R=new KN({Hr:Z=>{A?Oe("Connection","Not sending because WebChannel is closed:",Z):(C||(Oe("Connection","Opening WebChannel transport."),w.open(),C=!0),Oe("Connection","WebChannel sending:",Z),w.send(Z))},Jr:()=>w.close()}),V=(Z,te,le)=>{Z.listen(te,He=>{try{le(He)}catch(Be){setTimeout(()=>{throw Be},0)}})};return V(w,Ih.EventType.OPEN,()=>{A||Oe("Connection","WebChannel transport opened.")}),V(w,Ih.EventType.CLOSE,()=>{A||(A=!0,Oe("Connection","WebChannel transport closed"),R.io())}),V(w,Ih.EventType.ERROR,Z=>{A||(A=!0,Au("Connection","WebChannel transport errored:",Z),R.io(new Me(ue.UNAVAILABLE,"The operation could not be completed")))}),V(w,Ih.EventType.MESSAGE,Z=>{var te;if(!A){const le=Z.data[0];mt(!!le);const He=le,Be=He.error||(null===(te=He[0])||void 0===te?void 0:te.error);if(Be){Oe("Connection","WebChannel received error:",Be);const $e=Be.status;let Pe=function(Ye){const Pt=Hr[Ye];if(void 0!==Pt)return Nv(Pt)}($e),Ge=Be.message;void 0===Pe&&(Pe=ue.INTERNAL,Ge="Unknown error status: "+$e+" with message "+Be.message),A=!0,R.io(new Me(Pe,Ge)),w.close()}else Oe("Connection","WebChannel received:",le),R.ro(le)}}),V(c,Rw.STAT_EVENT,Z=>{Z.stat===Nu.PROXY?Oe("Connection","Detected buffering proxy"):Z.stat===Nu.NOPROXY&&Oe("Connection","Detected no buffering proxy")}),setTimeout(()=>{R.so()},0),R}}function u0(){return typeof window<"u"?window:null}function c0(){return typeof document<"u"?document:null}function Et(n){return new WN(n,!0)}class d0{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class dE{constructor(e,t,r,i,a,c,p,_){this.Hs=e,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=_,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new d0(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,_e.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,_e.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,_e.Z)(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(br(t.toString()),br("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===ue.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Me(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,_e.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OC extends dE{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.yt=a}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function fC(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:at(),i=e.targetChange.targetIds||[],a=function(_,w){return _.wt?(mt(void 0===w||"string"==typeof w),Br.fromBase64String(w||"")):(mt(void 0===w||w instanceof Uint8Array),Br.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&function(_){const w=void 0===_.code?ue.UNKNOWN:Nv(_.code);return new Me(w,_.message||"")}(c);t=new vD(r,i,a,p||null)}else if("documentChange"in e){const r=e.documentChange,i=Xr(n,r.document.name),a=lr(r.document.updateTime),c=r.document.createTime?lr(r.document.createTime):bt.min(),p=new Ur({mapValue:{fields:r.document.fields}}),_=$n.newFoundDocument(i,a,c,p);t=new Vp(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,i=Xr(n,r.document),a=r.readTime?lr(r.readTime):bt.min(),c=$n.newNoDocument(i,a);t=new Vp([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Xr(n,r.document);t=new Vp([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return at();{const r=e.filter,a=new lC(r.count||0);t=new yD(r.targetId,a)}}var _;return t}(this.yt,e),r=function(i){if(!("targetChange"in i))return bt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?bt.min():a.readTime?lr(a.readTime):bt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Dl(this.yt),t.addTarget=function(i,a){let c;const p=a.target;return c=Rp(p)?{documents:CD(i,p)}:{query:TD(i,p)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?c.resumeToken=dC(i,a.resumeToken):a.snapshotVersion.compareTo(bt.min())>0&&(c.readTime=Vu(i,a.snapshotVersion.toTimestamp())),c}(this.yt,e);const r=function pC(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return at()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Dl(this.yt),t.removeTarget=e,this.Bo(t)}}class tf extends dE{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.yt=a,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(mt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function zN(n,e){return n&&n.length>0?(mt(void 0!==e),n.map(t=>function(r,i){let a=lr(r.updateTime?r.updateTime:i);return a.isEqual(bt.min())&&(a=lr(i)),new fD(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=lr(e.commitTime);return this.listener.Zo(r,t)}return mt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Dl(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>El(this.yt,r))};this.Bo(t)}}class RC extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.yt=i,this.nu=!1}su(){if(this.nu)throw new Me(ue.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.ao(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Me(ue.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection._o(e,t,r,a,c,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Me(ue.UNKNOWN,a.toString())})}terminate(){this.nu=!0}}class ur{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(br(t),this.ou=!1):Oe("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class ZN{constructor(e,t,r,i,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.Ur(p=>{r.enqueueAndForget((0,_e.Z)(function*(){var _;Rs(c)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,_e.Z)(function*(w){const C=Xe(w);C._u.add(4),yield sf(C),C.gu.set("Unknown"),C._u.delete(4),yield rf(C)}),function(w){return _.apply(this,arguments)})(c))}))}),this.gu=new ur(r,i)}}function rf(n){return w_.apply(this,arguments)}function w_(){return w_=(0,_e.Z)(function*(n){if(Rs(n))for(const e of n.wu)yield e(!0)}),w_.apply(this,arguments)}function sf(n){return D_.apply(this,arguments)}function D_(){return D_=(0,_e.Z)(function*(n){for(const e of n.wu)yield e(!1)}),D_.apply(this,arguments)}function ng(n,e){const t=Xe(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),f0(t)?h0(t):md(t).ko()&&E_(t,e))}function af(n,e){const t=Xe(n),r=md(t);t.du.delete(e),r.ko()&&hE(t,e),0===t.du.size&&(r.ko()?r.Fo():Rs(t)&&t.gu.set("Unknown"))}function E_(n,e){n.yu.Ot(e.targetId),md(n).zo(e)}function hE(n,e){n.yu.Ot(e),md(n).Ho(e)}function h0(n){n.yu=new Ov({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),md(n).start(),n.gu.uu()}function f0(n){return Rs(n)&&!md(n).No()&&n.du.size>0}function Rs(n){return 0===Xe(n)._u.size}function fE(n){n.yu=void 0}function kC(n){return p0.apply(this,arguments)}function p0(){return p0=(0,_e.Z)(function*(n){n.du.forEach((e,t)=>{E_(n,e)})}),p0.apply(this,arguments)}function I_(n,e){return C_.apply(this,arguments)}function C_(){return C_=(0,_e.Z)(function*(n,e){fE(n),f0(n)?(n.gu.hu(e),h0(n)):n.gu.set("Unknown")}),C_.apply(this,arguments)}function pE(n,e,t){return T_.apply(this,arguments)}function T_(){return T_=(0,_e.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof vD&&2===e.state&&e.cause)try{yield(r=(0,_e.Z)(function*(i,a){const c=a.cause;for(const p of a.targetIds)i.du.has(p)&&(yield i.remoteSyncer.rejectListen(p,c),i.du.delete(p),i.yu.removeTarget(p))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield S_(n,r)}else if(e instanceof Vp?n.yu.Kt(e):e instanceof yD?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(bt.min()))try{const r=yield nE(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const c=i.yu.Zt(a);return c.targetChanges.forEach((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const w=i.du.get(_);w&&i.du.set(_,w.withResumeToken(p.resumeToken,a))}}),c.targetMismatches.forEach(p=>{const _=i.du.get(p);if(!_)return;i.du.set(p,_.withResumeToken(Br.EMPTY_BYTE_STRING,_.snapshotVersion)),hE(i,p);const w=new Il(_.target,p,1,_.sequenceNumber);E_(i,w)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield S_(n,r)}var r}),T_.apply(this,arguments)}function S_(n,e,t){return gd.apply(this,arguments)}function gd(){return gd=(0,_e.Z)(function*(n,e,t){if(!Mu(e))throw e;n._u.add(1),yield sf(n),n.gu.set("Offline"),t||(t=()=>nE(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield rf(n)}))}),gd.apply(this,arguments)}function lf(n,e){return e().catch(t=>S_(n,t,e))}function uf(n){return g0.apply(this,arguments)}function g0(){return g0=(0,_e.Z)(function*(n){const e=Xe(n),t=lo(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;PC(e);)try{const i=yield xC(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,gE(e,i)}catch(i){yield S_(e,i)}m0(e)&&_0(e)}),g0.apply(this,arguments)}function PC(n){return Rs(n)&&n.fu.length<10}function gE(n,e){n.fu.push(e);const t=lo(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function m0(n){return Rs(n)&&!lo(n).No()&&n.fu.length>0}function _0(n){lo(n).start()}function FC(n){return N_.apply(this,arguments)}function N_(){return N_=(0,_e.Z)(function*(n){lo(n).eu()}),N_.apply(this,arguments)}function LC(n){return y0.apply(this,arguments)}function y0(){return y0=(0,_e.Z)(function*(n){const e=lo(n);for(const t of n.fu)e.Xo(t.mutations)}),y0.apply(this,arguments)}function YN(n,e,t){return mE.apply(this,arguments)}function mE(){return mE=(0,_e.Z)(function*(n,e,t){const r=n.fu.shift(),i=Ym.from(r,e,t);yield lf(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield uf(n)}),mE.apply(this,arguments)}function QN(n,e){return _E.apply(this,arguments)}function _E(){return _E=(0,_e.Z)(function*(n,e){var t;e&&lo(n).Yo&&(yield(t=(0,_e.Z)(function*(r,i){if(Um(a=i.code)&&a!==ue.ABORTED){const c=r.fu.shift();lo(r).Mo(),yield lf(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield uf(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),m0(n)&&_0(n)}),_E.apply(this,arguments)}function v0(n,e){return cf.apply(this,arguments)}function cf(){return cf=(0,_e.Z)(function*(n,e){const t=Xe(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=Rs(t);t._u.add(3),yield sf(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield rf(t)}),cf.apply(this,arguments)}function b0(n,e){return w0.apply(this,arguments)}function w0(){return w0=(0,_e.Z)(function*(n,e){const t=Xe(n);e?(t._u.delete(2),yield rf(t)):e||(t._u.add(2),yield sf(t),t.gu.set("Unknown"))}),w0.apply(this,arguments)}function md(n){return n.pu||(n.pu=function(e,t,r){const i=Xe(e);return i.su(),new OC(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:kC.bind(null,n),Zr:I_.bind(null,n),Wo:pE.bind(null,n)}),n.wu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.pu.Mo(),f0(n)?h0(n):n.gu.set("Unknown")):(yield n.pu.stop(),fE(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function lo(n){return n.Iu||(n.Iu=function(e,t,r){const i=Xe(e);return i.su(),new tf(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:FC.bind(null,n),Zr:QN.bind(null,n),tu:LC.bind(null,n),Zo:YN.bind(null,n)}),n.wu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Iu.Mo(),yield uf(n)):(yield n.Iu.stop(),n.fu.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class D0{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,p=new D0(e,t,c,i,a);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function df(n,e){if(br("AsyncQueue",`${e}: ${n}`),Mu(n))return new Me(ue.UNAVAILABLE,`${e}: ${n}`);throw n}class hf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ze.comparator(t.key,r.key):(t,r)=>ze.comparator(t.key,r.key),this.keyedMap=Fp(),this.sortedSet=new Gn(this.comparator)}static emptySet(e){return new hf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof hf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new hf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class yE{constructor(){this.Tu=new Gn(ze.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):at():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class ff{constructor(e,t,r,i,a,c,p,_,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=_,this.hasCachedResults=w}static fromInitialDocuments(e,t,r,i,a){const c=[];return t.forEach(p=>{c.push({type:0,doc:p})}),new ff(e,t,hf.emptySet(t),c,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Om(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class vE{constructor(){this.Au=void 0,this.listeners=[]}}class VC{constructor(){this.queries=new Lu(e=>aC(e),Om),this.onlineState="Unknown",this.Ru=new Set}}function E0(n,e){return _d.apply(this,arguments)}function _d(){return _d=(0,_e.Z)(function*(n,e){const t=Xe(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new vE),i)try{a.Au=yield t.onListen(r)}catch(c){const p=df(c,`Initialization of query '${aD(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Au&&e.Pu(a.Au)&&C0(t)}),_d.apply(this,arguments)}function I0(n,e){return A_.apply(this,arguments)}function A_(){return A_=(0,_e.Z)(function*(n,e){const t=Xe(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const c=a.listeners.indexOf(e);c>=0&&(a.listeners.splice(c,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),A_.apply(this,arguments)}function BC(n,e){const t=Xe(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const p of c.listeners)p.Pu(i)&&(r=!0);c.Au=i}}r&&C0(t)}function bE(n,e,t){const r=Xe(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function C0(n){n.Ru.forEach(e=>{e.next()})}class x_{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new ff(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=ff.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class UC{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class M_{constructor(e){this.yt=e}Ji(e){return Xr(this.yt,e)}Yi(e){return e.metadata.exists?Pv(this.yt,e.document,!1):$n.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return lr(e)}}class HC{constructor(e,t,r){this.Mu=e,this.localStore=t,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=T0(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=Jt.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new M_(this.yt);for(const i of e)if(i.metadata.queries){const a=r.Ji(i.metadata.name);for(const c of i.metadata.queries){const p=(t.get(c)||At()).add(a);t.set(c,p)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function aE(n,e,t,r){return m_.apply(this,arguments)}(e.localStore,new M_(e.yt),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield lE(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function T0(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class S0{constructor(e){this.key=e}}class wE{constructor(e){this.key=e}}class DE{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=At(),this.mutatedKeys=At(),this.Gu=lD(e),this.Qu=new hf(this.Gu)}get ju(){return this.qu}Wu(e,t){const r=t?t.zu:new yE,i=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,p=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,A)=>{const R=i.get(C),V=ba(this.query,A)?A:null,Z=!!R&&this.mutatedKeys.has(R.key),te=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let le=!1;R&&V?R.data.isEqual(V.data)?Z!==te&&(r.track({type:3,doc:V}),le=!0):this.Hu(R,V)||(r.track({type:2,doc:V}),le=!0,(_&&this.Gu(V,_)>0||w&&this.Gu(V,w)<0)&&(p=!0)):!R&&V?(r.track({type:0,doc:V}),le=!0):R&&!V&&(r.track({type:1,doc:R}),le=!0,(_||w)&&(p=!0)),le&&(V?(c=c.add(V),a=te?a.add(C):a.delete(C)):(c=c.delete(C),a=a.delete(C)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const C="F"===this.query.limitType?c.last():c.first();c=c.delete(C.key),a=a.delete(C.key),r.track({type:1,doc:C})}return{Qu:c,zu:r,$i:p,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Eu();a.sort((w,C)=>function(A,R){const V=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at()}};return V(A)-V(R)}(w.type,C.type)||this.Gu(w.doc,C.doc)),this.Ju(r);const c=t?this.Yu():[],p=0===this.Ku.size&&this.current?1:0,_=p!==this.Uu;return this.Uu=p,0!==a.length||_?{snapshot:new ff(this.query,e.Qu,i,a,e.mutatedKeys,0===p,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:c}:{Xu:c}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new yE,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=At(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new wE(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new S0(r))}),t}tc(e){this.qu=e.Hi,this.Ku=At();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return ff.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class jC{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class N0{constructor(e){this.key=e,this.nc=!1}}class GC{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.sc={},this.ic=new Lu(p=>aC(p),Om),this.rc=new Map,this.oc=new Set,this.uc=new Gn(ze.comparator),this.cc=new Map,this.ac=new u_,this.hc={},this.lc=new Map,this.fc=hd.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function EE(n,e){return A0.apply(this,arguments)}function A0(){return A0=(0,_e.Z)(function*(n,e){const t=B_(n);let r,i;const a=t.ic.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.ec();else{const c=yield Yh(t.localStore,rs(e));t.isPrimaryClient&&ng(t.remoteStore,c);const p=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield x0(t,e,r,"current"===p,c.resumeToken)}return i}),A0.apply(this,arguments)}function x0(n,e,t,r,i){return M0.apply(this,arguments)}function M0(){return M0=(0,_e.Z)(function*(n,e,t,r,i){n._c=(A,R,V)=>{return(Z=(0,_e.Z)(function*(te,le,He,Be){let $e=le.view.Wu(He);$e.$i&&($e=yield g_(te.localStore,le.query,!1).then(({documents:Ye})=>le.view.Wu(Ye,$e)));const Pe=Be&&Be.targetChanges.get(le.targetId),Ge=le.view.applyChanges($e,te.isPrimaryClient,Pe);return sg(te,le.targetId,Ge.Xu),Ge.snapshot}),function(te,le,He,Be){return Z.apply(this,arguments)})(n,A,R,V);var Z};const a=yield g_(n.localStore,e,!0),c=new DE(e,a.Hi),p=c.Wu(a.documents),_=jm.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),w=c.applyChanges(p,n.isPrimaryClient,_);sg(n,t,w.Xu);const C=new jC(e,t,c);return n.ic.set(e,C),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),w.snapshot}),M0.apply(this,arguments)}function $C(n,e){return O0.apply(this,arguments)}function O0(){return O0=(0,_e.Z)(function*(n,e){const t=Xe(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(a=>!Om(a,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Qh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),af(t.remoteStore,r.targetId),pf(t,r.targetId)}).catch(pl))):(pf(t,r.targetId),yield Qh(t.localStore,r.targetId,!0))}),O0.apply(this,arguments)}function R0(){return R0=(0,_e.Z)(function*(n,e,t){const r=W0(n);try{const i=yield function(a,c){const p=Xe(a),_=On.now(),w=c.reduce((R,V)=>R.add(V.key),At());let C,A;return p.persistence.runTransaction("Locally write mutations","readwrite",R=>{let V=is(),Z=At();return p.Gi.getEntries(R,w).next(te=>{V=te,V.forEach((le,He)=>{He.isValidDocument()||(Z=Z.add(le))})}).next(()=>p.localDocuments.getOverlayedDocuments(R,V)).next(te=>{C=te;const le=[];for(const He of c){const Be=$N(He,C.get(He.key).overlayedDocument);null!=Be&&le.push(new wl(He.key,Be,xm(Be.value.mapValue),Rn.exists(!0)))}return p.mutationQueue.addMutationBatch(R,_,le,c)}).next(te=>{A=te;const le=te.applyToLocalDocumentSet(C,Z);return p.documentOverlayCache.saveOverlays(R,te.batchId,le)})}).then(()=>({batchId:A.batchId,changes:xv(C)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,p){let _=a.hc[a.currentUser.toKey()];_||(_=new Gn(Bt)),_=_.insert(c,p),a.hc[a.currentUser.toKey()]=_}(r,i.batchId,t),yield os(r,i.changes),yield uf(r.remoteStore)}catch(i){const a=df(i,"Failed to persist write");t.reject(a)}}),R0.apply(this,arguments)}function IE(n,e){return O_.apply(this,arguments)}function O_(){return O_=(0,_e.Z)(function*(n,e){const t=Xe(n);try{const r=yield AC(t.localStore,e);e.targetChanges.forEach((i,a)=>{const c=t.cc.get(a);c&&(mt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.nc=!0:i.modifiedDocuments.size>0?mt(c.nc):i.removedDocuments.size>0&&(mt(c.nc),c.nc=!1))}),yield os(t,r,e)}catch(r){yield pl(r)}}),O_.apply(this,arguments)}function k0(n,e,t){const r=Xe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((a,c)=>{const p=c.view.bu(e);p.snapshot&&i.push(p.snapshot)}),function(a,c){const p=Xe(a);p.onlineState=c;let _=!1;p.queries.forEach((w,C)=>{for(const A of C.listeners)A.bu(c)&&(_=!0)}),_&&C0(p)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function CE(n,e,t){return P0.apply(this,arguments)}function P0(){return P0=(0,_e.Z)(function*(n,e,t){const r=Xe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),a=i&&i.key;if(a){let c=new Gn(ze.comparator);c=c.insert(a,$n.newNoDocument(a,bt.min()));const p=At().add(a),_=new Lp(bt.min(),new Map,new In(Bt),c,p);yield IE(r,_),r.uc=r.uc.remove(a),r.cc.delete(e),P_(r)}else yield Qh(r.localStore,e,!1).then(()=>pf(r,e,t)).catch(pl)}),P0.apply(this,arguments)}function F0(n,e){return R_.apply(this,arguments)}function R_(){return R_=(0,_e.Z)(function*(n,e){const t=Xe(n),r=e.batch.batchId;try{const i=yield NC(t.localStore,e);ig(t,r,null),k_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield os(t,i)}catch(i){yield pl(i)}}),R_.apply(this,arguments)}function zC(n,e,t){return L0.apply(this,arguments)}function L0(){return L0=(0,_e.Z)(function*(n,e,t){const r=Xe(n);try{const i=yield function(a,c){const p=Xe(a);return p.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return p.mutationQueue.lookupMutationBatch(_,c).next(C=>(mt(null!==C),w=C.keys(),p.mutationQueue.removeMutationBatch(_,C))).next(()=>p.mutationQueue.performConsistencyCheck(_)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(_,w,c)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,w)).next(()=>p.localDocuments.getDocuments(_,w))})}(r.localStore,e);ig(r,e,t),k_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield os(r,i)}catch(i){yield pl(i)}}),L0.apply(this,arguments)}function rg(){return rg=(0,_e.Z)(function*(n,e){const t=Xe(n);Rs(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const c=Xe(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>c.mutationQueue.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=df(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),rg.apply(this,arguments)}function k_(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function ig(n,e,t){const r=Xe(n);let i=r.hc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function pf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||TE(n,r)})}function TE(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(af(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),P_(n))}function sg(n,e,t){for(const r of t)r instanceof S0?(n.ac.addReference(r.key,e),qC(n,r)):r instanceof wE?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||TE(n,r.key)):at()}function qC(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.oc.add(r),P_(n))}function P_(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new ze(Jt.fromString(e)),r=n.fc.next();n.cc.set(r,new N0(t)),n.uc=n.uc.insert(t,r),ng(n.remoteStore,new Il(rs(xh(t.path)),r,2,xs.at))}}function os(n,e,t){return F_.apply(this,arguments)}function F_(){return F_=(0,_e.Z)(function*(n,e,t){const r=Xe(n),i=[],a=[],c=[];var p;r.ic.isEmpty()||(r.ic.forEach((p,_)=>{c.push(r._c(_,e,t).then(w=>{if((w||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,w?.fromCache?"not-current":"current"),w){i.push(w);const C=t0.Ci(_.targetId,w);a.push(C)}}))}),yield Promise.all(c),r.sc.Wo(i),yield(p=(0,_e.Z)(function*(_,w){const C=Xe(_);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>ae.forEach(w,R=>ae.forEach(R.Si,V=>C.persistence.referenceDelegate.addReference(A,R.targetId,V)).next(()=>ae.forEach(R.Di,V=>C.persistence.referenceDelegate.removeReference(A,R.targetId,V)))))}catch(A){if(!Mu(A))throw A;Oe("LocalStore","Failed to update sequence numbers: "+A)}for(const A of w){const R=A.targetId;if(!A.fromCache){const V=C.qi.get(R),te=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);C.qi=C.qi.insert(R,te)}}}),function(_,w){return p.apply(this,arguments)})(r.localStore,a))}),F_.apply(this,arguments)}function KC(n,e){return SE.apply(this,arguments)}function SE(){return SE=(0,_e.Z)(function*(n,e){const t=Xe(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield tE(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(c=>{c.forEach(p=>{p.reject(new Me(ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield os(t,r.ji)}var i}),SE.apply(this,arguments)}function NE(n,e){const t=Xe(n),r=t.cc.get(e);if(r&&r.nc)return At().add(r.key);{let i=At();const a=t.rc.get(e);if(!a)return i;for(const c of a){const p=t.ic.get(c);i=i.unionWith(p.view.ju)}return i}}function B0(n,e){return U0.apply(this,arguments)}function U0(){return U0=(0,_e.Z)(function*(n,e){const t=Xe(n),r=yield g_(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&sg(t,e.targetId,i.Xu),i}),U0.apply(this,arguments)}function H0(n,e){return j0.apply(this,arguments)}function j0(){return j0=(0,_e.Z)(function*(n,e){const t=Xe(n);return sE(t.localStore,e).then(r=>os(t,r))}),j0.apply(this,arguments)}function AE(n,e,t,r){return og.apply(this,arguments)}function og(){return og=(0,_e.Z)(function*(n,e,t,r){const i=Xe(n),a=yield function(c,p){const _=Xe(c),w=Xe(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",C=>w.Tn(C,p).next(A=>A?_.localDocuments.getDocuments(C,A):ae.resolve(null)))}(i.localStore,e);var p;null!==a?("pending"===t?yield uf(i.remoteStore):"acknowledged"===t||"rejected"===t?(ig(i,e,r||null),k_(i,e),p=e,Xe(Xe(i.localStore).mutationQueue).An(p)):at(),yield os(i,a)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),og.apply(this,arguments)}function L_(){return L_=(0,_e.Z)(function*(n,e){const t=Xe(n);if(B_(t),W0(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield G0(t,r.toArray());t.dc=!0,yield b0(t.remoteStore,!0);for(const a of i)ng(t.remoteStore,a)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((a,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(pf(t,c),Qh(t.localStore,c,!0))),af(t.remoteStore,c)}),yield i,yield G0(t,r),function(a){const c=Xe(a);c.cc.forEach((p,_)=>{af(c.remoteStore,_)}),c.ac.fs(),c.cc=new Map,c.uc=new Gn(ze.comparator)}(t),t.dc=!1,yield b0(t.remoteStore,!1)}}),L_.apply(this,arguments)}function G0(n,e,t){return V_.apply(this,arguments)}function V_(){return V_=(0,_e.Z)(function*(n,e,t){const r=Xe(n),i=[],a=[];for(const c of e){let p;const _=r.rc.get(c);if(_&&0!==_.length){p=yield Yh(r.localStore,rs(_[0]));for(const w of _){const C=r.ic.get(w),A=yield B0(r,C);A.snapshot&&a.push(A.snapshot)}}else{const w=yield iE(r.localStore,c);p=yield Yh(r.localStore,w),yield x0(r,ME(w),c,!1,p.resumeToken)}i.push(p)}return r.sc.Wo(a),i}),V_.apply(this,arguments)}function ME(n){return bv(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function ZC(n){const e=Xe(n);return Xe(Xe(e.localStore).persistence).vi()}function YC(n,e,t,r){return $0.apply(this,arguments)}function $0(){return $0=(0,_e.Z)(function*(n,e,t,r){const i=Xe(n);if(i.dc)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const a=i.rc.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const c=yield sE(i.localStore,Rm(a[0])),p=Lp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Br.EMPTY_BYTE_STRING);yield os(i,c,p);break}case"rejected":yield Qh(i.localStore,e,!0),pf(i,e,r);break;default:at()}}),$0.apply(this,arguments)}function OE(n,e,t){return RE.apply(this,arguments)}function RE(){return RE=(0,_e.Z)(function*(n,e,t){const r=B_(n);if(r.dc){for(const i of e){if(r.rc.has(i)){Oe("SyncEngine","Adding an already active target "+i);continue}const a=yield iE(r.localStore,i),c=yield Yh(r.localStore,a);yield x0(r,ME(a),c.targetId,!1,c.resumeToken),ng(r.remoteStore,c)}for(const i of t)r.rc.has(i)&&(yield Qh(r.localStore,i,!1).then(()=>{af(r.remoteStore,i),pf(r,i)}).catch(pl))}}),RE.apply(this,arguments)}function B_(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=IE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NE.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CE.bind(null,e),e.sc.Wo=BC.bind(null,e.eventManager),e.sc.wc=bE.bind(null,e.eventManager),e}function W0(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=F0.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zC.bind(null,e),e}class JC{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.yt=Et(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return eE(this.persistence,new XD,e.initialUser,this.yt)}yc(e){return new Xv(Xp.Bs,this.yt)}gc(e){return new uE}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class XC extends JC{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield W0(r.Ac.syncEngine),yield uf(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return eE(this.persistence,new XD,e.initialUser,this.yt)}Tc(e,t){return new Ea(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new J1(t,this.persistence);return new Q1(e.asyncQueue,r)}yc(e){const t=p_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ss.withCacheSize(this.cacheSizeBytes):ss.DEFAULT;return new f_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,u0(),c0(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new uE}}class eT extends XC{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof a0&&(r.sharedClientState.syncEngine={Fr:AE.bind(null,i),$r:YC.bind(null,i),Br:OE.bind(null,i),vi:ZC.bind(null,i),Mr:H0.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var a=(0,_e.Z)(function*(c){yield function xE(n,e){return L_.apply(this,arguments)}(r.Ac.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return a.apply(this,arguments)}}())})()}gc(e){const t=u0();if(!a0.C(t))throw new Me(ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=p_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new a0(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class z0{initialize(e,t){var r=this;return(0,_e.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>k0(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=KC.bind(null,r.syncEngine),yield b0(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new VC}createDatastore(e){const t=Et(e.databaseInfo.databaseId),r=new cE(e.databaseInfo);return new RC(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=p=>k0(this.syncEngine,p,0),c=MC.C()?new MC:new ef,new ZN(t,r,i,a,c);var t,r,i,a,c}createSyncEngine(e,t){return function(r,i,a,c,p,_,w){const C=new GC(r,i,a,c,p,_);return w&&(C.dc=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const r=Xe(t);Oe("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield sf(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function q0(n,e,t){if(!t)throw new Me(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function K0(n,e,t,r){if(!0===e&&!0===r)throw new Me(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Z0(n){if(!ze.isDocumentKey(n))throw new Me(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Y0(n){if(ze.isDocumentKey(n))throw new Me(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function U_(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":at()}function Xt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Me(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=U_(n);throw new Me(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function kE(n,e){if(e<=0)throw new Me(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const PE=new Map;class FE{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Me(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Me(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,K0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ag{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FE({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Me(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Me(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FE(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Fw;switch(t.type){case"gapi":return new G1(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Me(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=PE.get(e);t&&(Oe("ComponentProvider","Removing Datastore"),PE.delete(e),t.terminate())}(this),Promise.resolve()}}class Tn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Po(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tn(this.firestore,e,this._key)}}class ei{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ei(this.firestore,e,this._query)}}class Po extends ei{constructor(e,t,r){super(e,t,xh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tn(this.firestore,null,new ze(e))}withConverter(e){return new Po(this.firestore,e,this._path)}}function Q0(n,e,...t){if(n=(0,Tt.m9)(n),q0("collection","path",e),n instanceof ag){const r=Jt.fromString(e,...t);return Y0(r),new Po(n,null,r)}{if(!(n instanceof Tn||n instanceof Po))throw new Me(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return Y0(r),new Po(n.firestore,null,r)}}function H_(n,e,...t){if(n=(0,Tt.m9)(n),1===arguments.length&&(e=av.R()),q0("doc","path",e),n instanceof ag){const r=Jt.fromString(e,...t);return Z0(r),new Tn(n,null,new ze(r))}{if(!(n instanceof Tn||n instanceof Po))throw new Me(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return Z0(r),new Tn(n.firestore,n instanceof Po?n.converter:null,new ze(r))}}function VE(n,e){return n=(0,Tt.m9)(n),e=(0,Tt.m9)(e),(n instanceof Tn||n instanceof Po)&&(e instanceof Tn||e instanceof Po)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function BE(n,e){return n=(0,Tt.m9)(n),e=(0,Tt.m9)(e),n instanceof ei&&e instanceof ei&&n.firestore===e.firestore&&Om(n._query,e._query)&&n.converter===e.converter}function UE(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class j_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):br("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class tT{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new Rr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const a=yield e.Cc(i);return new UC(JSON.parse(a),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,_e.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class rT{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Me(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,_e.Z)(function*(a,c){const p=Xe(a),_=Dl(p.yt)+"/documents",w={documents:c.map(V=>sd(p.yt,V))},C=yield p._o("BatchGetDocuments",_,w,c.length),A=new Map;C.forEach(V=>{const Z=function hC(n,e){return"found"in e?function(t,r){mt(!!r.found);const i=Xr(t,r.found.name),a=lr(r.found.updateTime),c=r.found.createTime?lr(r.found.createTime):bt.min(),p=new Ur({mapValue:{fields:r.found.fields}});return $n.newFoundDocument(i,a,c,p)}(n,e):"missing"in e?function(t,r){mt(!!r.missing),mt(!!r.readTime);const i=Xr(t,r.missing),a=lr(r.readTime);return $n.newNoDocument(i,a)}(n,e):at()}(p.yt,V);A.set(Z.key.toString(),Z)});const R=[];return c.forEach(V=>{const Z=A.get(V.toString());mt(!!Z),R.push(Z)}),R}),function(a,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Jr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=ze.fromPath(i);e.mutations.push(new Bm(a,e.precondition(a)))}),yield(r=(0,_e.Z)(function*(i,a){const c=Xe(i),p=Dl(c.yt)+"/documents",_={writes:a.map(w=>El(c.yt,w))};yield c.ao("Commit",p,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw at();t=bt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Me(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(bt.min())?Rn.exists(!1):Rn.updateTime(t):Rn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(bt.min()))throw new Me(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rn.updateTime(t)}return Rn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class J0{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new d0(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,_e.Z)(function*(){const t=new rT(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Fc(a)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!kt(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Um(t)}return!1}}class Ia{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Or.UNAUTHENTICATED,this.clientId=av.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,_e.Z)(function*(p){Oe("FirestoreClient","Received user=",p.uid),yield a.authCredentialListener(p),a.user=p});return function(p){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Oe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=df(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function HE(n,e){return ug.apply(this,arguments)}function ug(){return ug=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,_e.Z)(function*(a){r.isEqual(a)||(yield tE(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),ug.apply(this,arguments)}function mf(n,e){return X0.apply(this,arguments)}function X0(){return X0=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield eb(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>v0(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>v0(e.remoteStore,a)),n.onlineComponents=e}),X0.apply(this,arguments)}function eb(n){return tb.apply(this,arguments)}function tb(){return tb=(0,_e.Z)(function*(n){return n.offlineComponents||(Oe("FirestoreClient","Using default OfflineComponentProvider"),yield HE(n,new JC)),n.offlineComponents}),tb.apply(this,arguments)}function yd(n){return _f.apply(this,arguments)}function _f(){return _f=(0,_e.Z)(function*(n){return n.onlineComponents||(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield mf(n,new z0)),n.onlineComponents}),_f.apply(this,arguments)}function jE(n){return eb(n).then(e=>e.persistence)}function G_(n){return eb(n).then(e=>e.localStore)}function $_(n){return yd(n).then(e=>e.remoteStore)}function W_(n){return yd(n).then(e=>e.syncEngine)}function vd(n){return nb.apply(this,arguments)}function nb(){return nb=(0,_e.Z)(function*(n){const e=yield yd(n),t=e.eventManager;return t.onListen=EE.bind(null,e.syncEngine),t.onUnlisten=$C.bind(null,e.syncEngine),t}),nb.apply(this,arguments)}function q_(n,e,t={}){const r=new Rr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(i,a,c,p,_){const w=new j_({next:A=>{a.enqueueAndForget(()=>I0(i,C));const R=A.docs.has(c);!R&&A.fromCache?_.reject(new Me(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&A.fromCache&&p&&"server"===p.source?_.reject(new Me(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(A)},error:A=>_.reject(A)}),C=new x_(xh(c.path),w,{includeMetadataChanges:!0,Nu:!0});return E0(i,C)}(yield vd(n),n.asyncQueue,e,t,r)})),r.promise}function K_(n,e,t={}){const r=new Rr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(i,a,c,p,_){const w=new j_({next:A=>{a.enqueueAndForget(()=>I0(i,C)),A.fromCache&&"server"===p.source?_.reject(new Me(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(A)},error:A=>_.reject(A)}),C=new x_(c,w,{includeMetadataChanges:!0,Nu:!0});return E0(i,C)}(yield vd(n),n.asyncQueue,e,t,r)})),r.promise}class aT{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new d0(this,"async_queue_retry"),this.Wc=()=>{const t=c0();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=c0();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=c0();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new Rr;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,_e.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Mu(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,br("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=D0.createAndSchedule(this,e,t,r,a=>this.Yc(a));return this.Uc.push(i),i}zc(){this.Kc&&at()}verifyOperationInProgress(){}Xc(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function sb(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class $E{constructor(){this._progressObserver={},this._taskCompletionResolver=new Rr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Sn extends ag{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new aT,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||WE(this),this._firestoreClient.terminate()}}function cr(n){return n._firestoreClient||WE(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function WE(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new X1(n._databaseId,a,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var a,p;n._firestoreClient=new Ia(n._authCredentials,n._appCheckCredentials,n._queue,r)}function KE(n,e,t){const r=new Rr;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield HE(n,t),yield mf(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(c=a).name?c.code===ue.FAILED_PRECONDITION||c.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw a;Au("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var c})).then(()=>r.promise)}function dT(n){if(n._initialized||n._terminated)throw new Me(ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Fo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fo(Br.fromBase64String(e))}catch(t){throw new Me(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Fo(Br.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ca{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Me(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bd{constructor(e){this._methodName=e}}class vf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Bt(this._lat,e._lat)||Bt(this._long,e._long)}}const hT=/^__.*__$/;class QE{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new wl(e,this.data,this.fieldMask,t,this.fieldTransforms):new id(e,this.data,t,this.fieldTransforms)}}class JE{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new wl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function XE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at()}}class Y_{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.yt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Y_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return dg(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(XE(this.sa)&&hT.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class ab{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=r||Et(e)}da(e,t,r,i=!1){return new Y_({sa:e,methodName:t,fa:r,path:jn.emptyPath(),oa:!1,la:i},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function $u(n){const e=n._freezeSettings(),t=Et(n._databaseId);return new ab(n._databaseId,!!e.ignoreUndefinedProperties,t)}function cg(n,e,t,r,i,a={}){const c=n.da(a.merge||a.mergeFields?2:0,e,t,i);iI("Data must be an object, but it was:",c,r);const p=pT(r,c);let _,w;if(a.merge)_=new Bi(c.fieldMask),w=c.fieldTransforms;else if(a.mergeFields){const C=[];for(const A of a.mergeFields){const R=cb(e,A,t);if(!c.contains(R))throw new Me(ue.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);db(C,R)||C.push(R)}_=new Bi(C),w=c.fieldTransforms.filter(A=>_.covers(A.field))}else _=null,w=c.fieldTransforms;return new QE(new Ur(p),_,w)}class Wu extends bd{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wu}}function Q_(n,e,t){return new Y_({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class eI extends bd{_toFieldTransform(e){return new rd(e.path,new Oh)}isEqual(e){return e instanceof eI}}class tI extends bd{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Q_(this,e,!0),r=this._a.map(a=>Al(a,t)),i=new Fu(r);return new rd(e.path,i)}isEqual(e){return this===e}}class fT extends bd{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Q_(this,e,!0),r=this._a.map(a=>Al(a,t)),i=new td(r);return new rd(e.path,i)}isEqual(e){return this===e}}class nI extends bd{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Oo(e.yt,Pm(e.yt,this.wa));return new rd(e.path,t)}isEqual(e){return this===e}}function zu(n,e,t,r){const i=n.da(1,e,t);iI("Data must be an object, but it was:",i,r);const a=[],c=Ur.empty();Yc(r,(_,w)=>{const C=J_(e,_,t);w=(0,Tt.m9)(w);const A=i.ca(C);if(w instanceof Wu)a.push(C);else{const R=Al(w,A);null!=R&&(a.push(C),c.set(C,R))}});const p=new Bi(a);return new JE(c,p,i.fieldTransforms)}function lb(n,e,t,r,i,a){const c=n.da(1,e,t),p=[cb(e,r,t)],_=[i];if(a.length%2!=0)throw new Me(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<a.length;R+=2)p.push(cb(e,a[R])),_.push(a[R+1]);const w=[],C=Ur.empty();for(let R=p.length-1;R>=0;--R)if(!db(w,p[R])){const V=p[R];let Z=_[R];Z=(0,Tt.m9)(Z);const te=c.ca(V);if(Z instanceof Wu)w.push(V);else{const le=Al(Z,te);null!=le&&(w.push(V),C.set(V,le))}}const A=new Bi(w);return new JE(C,A,c.fieldTransforms)}function ub(n,e,t,r=!1){return Al(t,n.da(r?4:3,e))}function Al(n,e){if(rI(n=(0,Tt.m9)(n)))return iI("Unsupported field value:",e,n),pT(n,e);if(n instanceof bd)return function(t,r){if(!XE(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const c of t){let p=Al(c,r.aa(a));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Tt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Pm(r.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=On.fromDate(t);return{timestampValue:Vu(r.yt,i)}}if(t instanceof On){const i=new On(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Vu(r.yt,i)}}if(t instanceof vf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Fo)return{bytesValue:dC(r.yt,t._byteString)};if(t instanceof Tn){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ha(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Wm(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${U_(t)}`)}(n,e)}function pT(n,e){const t={};return Hw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yc(n,(r,i)=>{const a=Al(i,e.ra(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function rI(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof On||n instanceof vf||n instanceof Fo||n instanceof Tn||n instanceof bd)}function iI(n,e,t){if(!rI(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=U_(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function cb(n,e,t){if((e=(0,Tt.m9)(e))instanceof Ca)return e._internalPath;if("string"==typeof e)return J_(n,e);throw dg("Field path arguments must be of type string or ",n,!1,void 0,t)}const gT=new RegExp("[~\\*/\\[\\]]");function J_(n,e,t){if(e.search(gT)>=0)throw dg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ca(...e.split("."))._internalPath}catch{throw dg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function dg(n,e,t,r,i){const a=r&&!r.isEmpty(),c=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let _="";return(a||c)&&(_+=" (found",a&&(_+=` in field ${r}`),c&&(_+=` in document ${i}`),_+=")"),new Me(ue.INVALID_ARGUMENT,p+n+_)}function db(n,e){return n.some(t=>t.isEqual(e))}class hg{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Tn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new sI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class sI extends hg{data(){return super.data()}}function fg(n,e){return"string"==typeof e?J_(n,e):e instanceof Ca?e._internalPath:e._delegate._internalPath}function oI(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Me(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hb{}class bf extends hb{}function qu(n,e,...t){let r=[];e instanceof hb&&r.push(e),r=r.concat(t),function(i){const a=i.filter(p=>p instanceof wd).length,c=i.filter(p=>p instanceof wf).length;if(a>1||a>0&&c>0)throw new Me(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class wf extends bf{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new wf(e,t,r)}_apply(e){const t=this._parse(e);return mg(e._query,t),new ei(e.firestore,e.converter,oD(e._query,t))}_parse(e){const t=$u(e.firestore);return function(i,a,c,p,_,w,C){let A;if(_.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Me(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){mb(C,w);const R=[];for(const V of C)R.push(_T(p,i,V));A={arrayValue:{values:R}}}else A=_T(p,i,C)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||mb(C,w),A=ub(c,"where",C,"in"===w||"not-in"===w);return qt.create(_,w,A)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class wd extends hb{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new wd(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:vn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const c=i.getFlattenedFilters();for(const p of c)mg(a,p),a=oD(a,p)}(e._query,t),new ei(e.firestore,e.converter,oD(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class fb extends bf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new fb(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Me(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Me(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new ku(i,a);return function(p,_){if(null===iD(p)){const w=wv(p);null!==w&&_b(0,w,_.field)}}(r,c),c}(e._query,this._field,this._direction);return new ei(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new va(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class pg extends bf{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new pg(e,t,r)}_apply(e){return new ei(e.firestore,e.converter,Dv(e._query,this._limit,this._limitType))}}class pb extends bf{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new pb(e,t,r)}_apply(e){const t=gg(e,this.type,this._docOrFields,this._inclusive);return new ei(e.firestore,e.converter,(i=t,new va((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class gb extends bf{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new gb(e,t,r)}_apply(e){const t=gg(e,this.type,this._docOrFields,this._inclusive);return new ei(e.firestore,e.converter,(i=t,new va((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function gg(n,e,t,r){if(t[0]=(0,Tt.m9)(t[0]),t[0]instanceof hg)return function(i,a,c,p,_){if(!p)throw new Me(ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const w=[];for(const C of Mh(i))if(C.field.isKeyField())w.push(Nh(a,p.key));else{const A=p.data.field(C.field);if(hv(A))throw new Me(ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===A){const R=C.field.canonicalString();throw new Me(ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}w.push(A)}return new Ru(w,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=$u(n.firestore);return function(a,c,p,_,w,C){const A=a.explicitOrderBy;if(w.length>A.length)throw new Me(ue.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let V=0;V<w.length;V++){const Z=w[V];if(A[V].field.isKeyField()){if("string"!=typeof Z)throw new Me(ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof Z}`);if(!sD(a)&&-1!==Z.indexOf("/"))throw new Me(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${Z}' contains a slash.`);const te=a.path.child(Jt.fromString(Z));if(!ze.isDocumentKey(te))throw new Me(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${te}' is not because it contains an odd number of segments.`);const le=new ze(te);R.push(Nh(c,le))}else{const te=ub(p,_,Z);R.push(te)}}return new Ru(R,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function _T(n,e,t){if("string"==typeof(t=(0,Tt.m9)(t))){if(""===t)throw new Me(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sD(e)&&-1!==t.indexOf("/"))throw new Me(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Jt.fromString(t));if(!ze.isDocumentKey(r))throw new Me(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Nh(n,new ze(r))}if(t instanceof Tn)return Nh(n,t._key);throw new Me(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${U_(t)}.`)}function mb(n,e){if(!Array.isArray(n)||0===n.length)throw new Me(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Me(ue.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function mg(n,e){if(e.isInequality()){const r=wv(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Me(ue.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=iD(n);null!==a&&_b(0,i,a)}const t=function(r,i){for(const a of r)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Me(ue.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function _b(n,e,t){if(!t.isEqual(e))throw new Me(ue.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class lI{convertValue(e,t="none"){switch(Ms(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ar(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ou(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw at()}}convertObject(e,t){const r={};return Yc(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new vf(ar(e.latitude),ar(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Gw(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Im(e));default:return null}}convertTimestamp(e){const t=ml(e);return new On(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Jt.fromString(e);mt(MD(r));const i=new gl(r.get(1),r.get(3)),a=new ze(r.popFirst(5));return i.isEqual(t)||br(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function Df(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class uI extends lI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tn(this.firestore,null,t)}}class Dd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ta extends hg{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new X_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(fg("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class X_ extends Ta{data(e={}){return super.data(e)}}class Ed{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Dd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new X_(this._firestore,this._userDataWriter,r.key,r,new Dd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new X_(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Dd(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const p=new X_(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Dd(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,w=-1;return 0!==c.type&&(_=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),1!==c.type&&(a=a.add(c.doc),w=a.indexOf(c.doc.key)),{type:yT(c.type),doc:p,oldIndex:_,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function yT(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at()}}function cI(n,e){return n instanceof Ta&&e instanceof Ta?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ed&&e instanceof Ed&&n._firestore===e._firestore&&BE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Ku extends lI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tn(this.firestore,null,t)}}function dI(n,e,t){n=Xt(n,Tn);const r=Xt(n.firestore,Sn),i=Df(n.converter,e,t);return Ci(r,[cg($u(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Rn.none())])}function wT(n,e,t,...r){n=Xt(n,Tn);const i=Xt(n.firestore,Sn),a=$u(i);let c;return c="string"==typeof(e=(0,Tt.m9)(e))||e instanceof Ca?lb(a,"updateDoc",n._key,e,t,r):zu(a,"updateDoc",n._key,e),Ci(i,[c.toMutation(n._key,Rn.exists(!0))])}function vb(n,...e){var t,r,i;n=(0,Tt.m9)(n);let a={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||sb(e[c])||(a=e[c],c++);const p={includeMetadataChanges:a.includeMetadataChanges};if(sb(e[c])){const A=e[c];e[c]=null===(t=A.next)||void 0===t?void 0:t.bind(A),e[c+1]=null===(r=A.error)||void 0===r?void 0:r.bind(A),e[c+2]=null===(i=A.complete)||void 0===i?void 0:i.bind(A)}let _,w,C;if(n instanceof Tn)w=Xt(n.firestore,Sn),C=xh(n._key.path),_={next:A=>{e[c]&&e[c](bb(w,n,A))},error:e[c+1],complete:e[c+2]};else{const A=Xt(n,ei);w=Xt(A.firestore,Sn),C=A._query;const R=new Ku(w);_={next:V=>{e[c]&&e[c](new Ed(w,R,A,V))},error:e[c+1],complete:e[c+2]},oI(n._query)}return function(A,R,V,Z){const te=new j_(Z),le=new x_(R,te,V);return A.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return E0(yield vd(A),le)})),()=>{te.bc(),A.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return I0(yield vd(A),le)}))}}(cr(w),C,p,_)}function Ci(n,e){return function(t,r){const i=new Rr;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function WC(n,e,t){return R0.apply(this,arguments)}(yield W_(t),r,i)})),i.promise}(cr(n),e)}function bb(n,e,t){const r=t.docs.get(e._key),i=new Ku(n);return new Ta(n,i,e._key,r,new Dd(t.hasPendingWrites,t.fromCache),e.converter)}const uo={maxAttempts:5};class pI{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=$u(e)}set(e,t,r){this._verifyNotCommitted();const i=Sa(e,this._firestore),a=Df(i.converter,t,r),c=cg(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Rn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Sa(e,this._firestore);let c;return c="string"==typeof(t=(0,Tt.m9)(t))||t instanceof Ca?lb(this._dataReader,"WriteBatch.update",a._key,t,r,i):zu(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,Rn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Sa(e,this._firestore);return this._mutations=this._mutations.concat(new Jr(t._key,Rn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Sa(n,e){if((n=(0,Tt.m9)(n)).firestore!==e)throw new Me(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class ET extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=$u(e)}get(e){const t=Sa(e,this._firestore),r=new uI(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return at();const a=i[0];if(a.isFoundDocument())return new hg(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new hg(this._firestore,r,t._key,null,t.converter);throw at()})}set(e,t,r){const i=Sa(e,this._firestore),a=Df(i.converter,t,r),c=cg(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const a=Sa(e,this._firestore);let c;return c="string"==typeof(t=(0,Tt.m9)(t))||t instanceof Ca?lb(this._dataReader,"Transaction.update",a._key,t,r,i):zu(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=Sa(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Sa(e,this._firestore),r=new Ku(this._firestore);return super.get(e).then(i=>new Ta(this._firestore,r,t._key,i._document,new Dd(!1,!1),t.converter))}}function Na(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Ib(){if(typeof Uint8Array>"u")throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function ty(){if(!function jw(){return typeof atob<"u"}())throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){fl=bi.SDK_VERSION,(0,bi._registerComponent)(new tl.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),c=new Sn(new j1(t.getProvider("auth-internal")),new Tp(t.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Me(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gl(p.options.projectId,_)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,bi.registerVersion)(kw,"3.8.0",n),(0,bi.registerVersion)(kw,"3.8.0","esm2017")}();class ks{constructor(e){this._delegate=e}static fromBase64String(e){return ty(),new ks(Fo.fromBase64String(e))}static fromUint8Array(e){return Ib(),new ks(Fo.fromUint8Array(e))}toBase64(){return ty(),this._delegate.toBase64()}toUint8Array(){return Ib(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Cb(n){return function mA(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class NT{enableIndexedDbPersistence(e,t){return function zE(n,e){dT(n=Xt(n,Sn));const t=cr(n),r=n._freezeSettings(),i=new z0;return KE(t,i,new XC(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function qE(n){dT(n=Xt(n,Sn));const e=cr(n),t=n._freezeSettings(),r=new z0;return KE(e,r,new eT(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function ZE(n){if(n._initialized&&!n._terminated)throw new Me(ue.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Rr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(r){if(!io.C())return Promise.resolve();const i=r+"main";yield io.delete(i)}),function(r){return t.apply(this,arguments)})(p_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class yI{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof gl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Au("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function gf(n,e,t,r={}){var i;const a=(n=Xt(n,ag))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Au("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,p;if("string"==typeof r.mockUserToken)c=r.mockUserToken,p=Or.MOCK_USER;else{c=(0,Tt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Me(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Or(_)}n._authCredentials=new HN(new Pw(c,p))}}(this._delegate,e,t,r)}enableNetwork(){return function Hi(n){return function iT(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield jE(n),t=yield $_(n);return e.setNetworkEnabled(!0),function(r){const i=Xe(r);return i._u.delete(0),rf(i)}(t)}))}(cr(n=Xt(n,Sn)))}(this._delegate)}disableNetwork(){return function yf(n){return function XN(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield jE(n),t=yield $_(n);return e.setNetworkEnabled(!1),(r=(0,_e.Z)(function*(i){const a=Xe(i);a._u.add(0),yield sf(a),a.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(cr(n=Xt(n,Sn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,K0("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function YE(n){return function(e){const t=new Rr;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function V0(n,e){return rg.apply(this,arguments)}(yield W_(e),t)})),t.promise}(cr(n=Xt(n,Sn)))}(this._delegate)}onSnapshotsInSync(e){return function fA(n,e){return function ib(n,e){const t=new j_(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield vd(n),i=t,Xe(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield vd(n),i=t,void Xe(r).Ru.delete(i);var r,i}))}}(cr(n=Xt(n,Sn)),sb(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new xl(this,Q0(this._delegate,e))}catch(t){throw Ti(t,"collection()","Firestore.collection()")}}doc(e){try{return new co(this,H_(this._delegate,e))}catch(t){throw Ti(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Si(this,function LE(n,e){if(n=Xt(n,ag),q0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Me(ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ei(n,null,(t=e,new va(Jt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ti(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function IT(n,e,t){n=Xt(n,Sn);const r=Object.assign(Object.assign({},uo),t);return function(i){if(i.maxAttempts<1)throw new Me(ue.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,c){const p=new Rr;return i.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const _=yield function z_(n){return yd(n).then(e=>e.datastore)}(i);new J0(i.asyncQueue,_,c,a,p).run()})),p.promise}(cr(n),i=>e(new ET(n,i)),r)}(this._delegate,t=>e(new Tb(this,t)))}batch(){return cr(this._delegate),new xT(new pI(this._delegate,e=>Ci(this._delegate,e)))}loadBundle(e){return function cT(n,e){const t=cr(n=Xt(n,Sn)),r=new $E;return function sT(n,e,t,r){const i=function(a,c){let p;return p="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,w){if(_ instanceof Uint8Array)return UE(_,w);if(_ instanceof ArrayBuffer)return UE(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new tT(_,c);var _}(t,Et(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function QC(n,e,t){const r=Xe(n);var i;(i=(0,_e.Z)(function*(a,c,p){try{const _=yield c.getMetadata();if(yield function(R,V){const Z=Xe(R),te=lr(V.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",le=>Z.Ns.getBundleMetadata(le,V.id)).then(le=>!!le&&le.createTime.compareTo(te)>=0)}(a.localStore,_))return yield c.close(),p._completeWith({taskState:"Success",documentsLoaded:(R=_).totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}),Promise.resolve(new Set);p._updateProgress(T0(_));const w=new HC(_,a.localStore,c.yt);let C=yield c.mc();for(;C;){const R=yield w.Fu(C);R&&p._updateProgress(R),C=yield c.mc()}const A=yield w.complete();return yield os(a,A.Lu,void 0),yield function(R,V){const Z=Xe(R);return Z.persistence.runTransaction("Save bundle","readwrite",te=>Z.Ns.saveBundleMetadata(te,V))}(a.localStore,_),p._completeWith(A.progress),Promise.resolve(A.Bu)}catch(_){return Au("SyncEngine",`Loading bundle failed with ${_}`),p._failWith(_),Promise.resolve(new Set)}var R}),function(a,c,p){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield W_(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function tA(n,e){return function oT(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,r){const i=Xe(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ns.getNamedQuery(a,r))}(yield G_(n),e)}))}(cr(n=Xt(n,Sn)),e).then(t=>t?new ei(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Si(this,t):null)}}class ny extends lI{constructor(e){super(),this.firestore=e}convertBytes(e){return new ks(new Fo(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return co.forKey(t,this.firestore,null)}}class Tb{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ny(e)}get(e){const t=Aa(e);return this._delegate.get(t).then(r=>new Ef(this._firestore,new Ta(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Aa(e);return r?(Na("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Aa(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Aa(e);return this._delegate.delete(t),this}}class xT{constructor(e){this._delegate=e}set(e,t,r){const i=Aa(e);return r?(Na("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Aa(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Aa(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Zu{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new X_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new If(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Zu.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Zu(e,new ny(e),t),i.set(t,a)),a}}Zu.INSTANCES=new WeakMap;class co{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ny(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new co(t,new Tn(t._delegate,r,new ze(e)))}static forKey(e,t,r){return new co(t,new Tn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new xl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new xl(this.firestore,Q0(this._delegate,e))}catch(t){throw Ti(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Tt.m9)(e))instanceof Tn&&VE(this._delegate,e)}set(e,t){t=Na("DocumentReference.set",t);try{return t?dI(this._delegate,e,t):dI(this._delegate,e)}catch(r){throw Ti(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?wT(this._delegate,e):wT(this._delegate,e,t,...r)}catch(i){throw Ti(i,"updateDoc()","DocumentReference.update()")}}delete(){return function DT(n){return Ci(Xt(n.firestore,Sn),[new Jr(n._key,Rn.none())])}(this._delegate)}onSnapshot(...e){const t=MT(e),r=ry(e,i=>new Ef(this.firestore,new Ta(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return vb(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function cA(n){n=Xt(n,Tn);const e=Xt(n.firestore,Sn),t=cr(e),r=new Ku(e);return function rb(n,e){const t=new Rr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(i,a,c){try{const p=yield function(_,w){const C=Xe(_);return C.persistence.runTransaction("read document","readonly",A=>C.localDocuments.getDocument(A,w))}(i,a);p.isFoundDocument()?c.resolve(p):p.isNoDocument()?c.resolve(null):c.reject(new Me(ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const _=df(p,`Failed to get document '${a} from cache`);c.reject(_)}}),function(i,a,c){return r.apply(this,arguments)})(yield G_(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Ta(e,r,n._key,i,new Dd(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function dA(n){n=Xt(n,Tn);const e=Xt(n.firestore,Sn);return q_(cr(e),n._key,{source:"server"}).then(t=>bb(e,n,t))}(this._delegate):function ey(n){n=Xt(n,Tn);const e=Xt(n.firestore,Sn);return q_(cr(e),n._key).then(t=>bb(e,n,t))}(this._delegate),t.then(r=>new Ef(this.firestore,new Ta(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new co(this.firestore,this._delegate.withConverter(e?Zu.getInstance(this.firestore,e):null))}}function Ti(n,e,t){return n.message=n.message.replace(e,t),n}function MT(n){for(const e of n)if("object"==typeof e&&!Cb(e))return e;return{}}function ry(n,e){var t,r;let i;return i=Cb(n[0])?n[0]:Cb(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Ef{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new co(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return cI(this._delegate,e._delegate)}}class If extends Ef{data(e){const t=this._delegate.data(e);return function H1(n,e){n||at()}(void 0!==t),t}}class Si{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ny(e)}where(e,t,r){try{return new Si(this.firestore,qu(this._delegate,function aI(n,e,t){const r=e,i=fg("where",n);return wf._create(i,r,t)}(e,t,r)))}catch(i){throw Ti(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Si(this.firestore,qu(this._delegate,function rA(n,e="asc"){const t=e,r=fg("orderBy",n);return fb._create(r,t)}(e,t)))}catch(r){throw Ti(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Si(this.firestore,qu(this._delegate,function iA(n){return kE("limit",n),pg._create("limit",n,"F")}(e)))}catch(t){throw Ti(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Si(this.firestore,qu(this._delegate,function sA(n){return kE("limitToLast",n),pg._create("limitToLast",n,"L")}(e)))}catch(t){throw Ti(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Si(this.firestore,qu(this._delegate,function oA(...n){return pb._create("startAt",n,!0)}(...e)))}catch(t){throw Ti(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Si(this.firestore,qu(this._delegate,function aA(...n){return pb._create("startAfter",n,!1)}(...e)))}catch(t){throw Ti(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Si(this.firestore,qu(this._delegate,function lA(...n){return gb._create("endBefore",n,!1)}(...e)))}catch(t){throw Ti(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Si(this.firestore,qu(this._delegate,function uA(...n){return gb._create("endAt",n,!0)}(...e)))}catch(t){throw Ti(t,"endAt()","Query.endAt()")}}isEqual(e){return BE(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function vT(n){n=Xt(n,ei);const e=Xt(n.firestore,Sn),t=cr(e),r=new Ku(e);return function GE(n,e){const t=new Rr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(i,a,c){try{const p=yield g_(i,a,!0),_=new DE(a,p.Hi),w=_.Wu(p.documents),C=_.applyChanges(w,!1);c.resolve(C.snapshot)}catch(p){const _=df(p,`Failed to execute query '${a} against cache`);c.reject(_)}}),function(i,a,c){return r.apply(this,arguments)})(yield G_(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Ed(e,r,n,i))}(this._delegate):"server"===e?.source?function bT(n){n=Xt(n,ei);const e=Xt(n.firestore,Sn),t=cr(e),r=new Ku(e);return K_(t,n._query,{source:"server"}).then(i=>new Ed(e,r,n,i))}(this._delegate):function hA(n){n=Xt(n,ei);const e=Xt(n.firestore,Sn),t=cr(e),r=new Ku(e);return oI(n._query),K_(t,n._query).then(i=>new Ed(e,r,n,i))}(this._delegate),t.then(r=>new iy(this.firestore,new Ed(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=MT(e),r=ry(e,i=>new iy(this.firestore,new Ed(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return vb(this._delegate,t,r)}withConverter(e){return new Si(this.firestore,this._delegate.withConverter(e?Zu.getInstance(this.firestore,e):null))}}class vI{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new If(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class iy{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Si(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new If(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new vI(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new If(this._firestore,r))})}isEqual(e){return cI(this._delegate,e._delegate)}}class xl extends Si{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new co(this.firestore,e):null}doc(e){try{return new co(this.firestore,void 0===e?H_(this._delegate):H_(this._delegate,e))}catch(t){throw Ti(t,"doc()","CollectionReference.doc()")}}add(e){return function hI(n,e){const t=Xt(n.firestore,Sn),r=H_(n),i=Df(n.converter,e);return Ci(t,[cg($u(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Rn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new co(this.firestore,t))}isEqual(e){return VE(this._delegate,e._delegate)}withConverter(e){return new xl(this.firestore,this._delegate.withConverter(e?Zu.getInstance(this.firestore,e):null))}}function Aa(n){return Xt(n,Tn)}class sy{constructor(...e){this._delegate=new Ca(...e)}static documentId(){return new sy(jn.keyField().canonicalString())}isEqual(e){return(e=(0,Tt.m9)(e))instanceof Ca&&this._delegate._internalPath.isEqual(e._internalPath)}}class Id{constructor(e){this._delegate=e}static serverTimestamp(){const e=function gI(){return new eI("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Id(e)}static delete(){const e=function wb(){return new Wu("deleteField")}();return e._methodName="FieldValue.delete",new Id(e)}static arrayUnion(...e){const t=function mI(...n){return new tI("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Id(t)}static arrayRemove(...e){const t=function CT(...n){return new fT("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Id(t)}static increment(e){const t=function _I(n){return new nI("increment",n)}(e);return t._methodName="FieldValue.increment",new Id(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const bI={Firestore:yI,GeoPoint:vf,Timestamp:On,Blob:ks,Transaction:Tb,WriteBatch:xT,DocumentReference:co,DocumentSnapshot:Ef,Query:Si,QueryDocumentSnapshot:If,QuerySnapshot:iy,CollectionReference:xl,FieldPath:sy,FieldValue:Id,setLogLevel:function AT(n){!function ov(n){ns.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function OT(n){(function wI(n,e){n.INTERNAL.registerComponent(new tl.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},bI)))})(n,(e,t)=>new yI(e,t,new NT)),n.registerVersion("@firebase/firestore-compat","0.3.0")}(na.Z);var dr=P(7579),_A=P(6451),Sb=P(5363),Lo=P(8421);function hr(n,e){return(0,tr.e)((t,r)=>{let i=null,a=0,c=!1;const p=()=>c&&!i&&r.complete();t.subscribe((0,pn.x)(r,_=>{i?.unsubscribe();let w=0;const C=a++;(0,Lo.Xf)(n(_,C)).subscribe(i=(0,pn.x)(r,A=>r.next(e?e(_,A,C,w++):A),()=>{i=null,p()}))},()=>{c=!0,p()}))})}var RT=P(6063);class kT extends dr.x{constructor(e=1/0,t=1/0,r=RT.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:c}=this;t||(r.push(e),!i&&r.push(a.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let c=0;c<a.length&&!e.closed;c+=r?1:2)e.next(a[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const c=t.now();let p=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)p=_;p&&r.splice(0,p+1)}}}var yA=P(3099);function PT(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,yA.B)({connector:()=>new kT(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const Nb=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Yu=P(515);function ci(n){return n<=0?()=>Yu.E:(0,tr.e)((e,t)=>{let r=0;e.subscribe((0,pn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Cd(n){return(0,tr.e)((e,t)=>{let r=!1;e.subscribe((0,pn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function DI(n=FT){return(0,tr.e)((e,t)=>{let r=!1;e.subscribe((0,pn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function FT(){return new Nb}function xa(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Bn((i,a)=>n(i,a,r)):li.y,ci(1),t?Cd(e):DI(()=>new Nb))}var Ni=P(576);function Ab(n,e){return(0,Ni.m)(e)?hr(()=>n,e):hr(()=>n)}var _g=P(9468);P(259);const Mb=new Map,Ob={activated:!1,tokenObservers:[]},Rb={initialized:!1,enabled:!1};function Ai(n){return Mb.get(n)||Object.assign({},Ob)}function Cf(){return Rb}class jT{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new Tt.BH,yield function NA(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Tt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const as=new Tt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function GT(n){if(!Ai(n).activated)throw as.create("use-before-activation",{appName:n.name})}function NI(n,e){return AI.apply(this,arguments)}function AI(){return AI=(0,_e.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const A=yield i.getHeartbeatsHeader();A&&(r["X-Firebase-Client"]=A)}const a={method:"POST",body:JSON.stringify(e),headers:r};let c,p;try{c=yield fetch(n,a)}catch(A){throw as.create("fetch-network-error",{originalErrorMessage:A?.message})}if(200!==c.status)throw as.create("fetch-status-error",{httpStatus:c.status});try{p=yield c.json()}catch(A){throw as.create("fetch-parse-error",{originalErrorMessage:A?.message})}const _=p.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw as.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const w=1e3*Number(_[1]),C=Date.now();return{token:p.token,expireTimeMillis:C+w,issuedAtTimeMillis:C}}),AI.apply(this,arguments)}function MA(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const l="firebase-app-check-store";let h=null;function g(){return h||(h=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(as.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(l,{keyPath:"compositeKey"})}}catch(t){e(as.create("storage-open",{originalErrorMessage:t?.message}))}}),h)}function F(){return F=(0,_e.Z)(function*(n,e){const r=(yield g()).transaction(l,"readwrite"),a=r.objectStore(l).put({compositeKey:n,value:e});return new Promise((c,p)=>{a.onsuccess=_=>{c()},r.onerror=_=>{var w;p(as.create("storage-set",{originalErrorMessage:null===(w=_.target.error)||void 0===w?void 0:w.message}))}})}),F.apply(this,arguments)}const Re=new wi.Yd("@firebase/app-check");function It(n,e){return(0,Tt.hl)()?function D(n,e){return function M(n,e){return F.apply(this,arguments)}(function ve(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Re.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function cn(){return Cf().enabled}function kn(){return Ml.apply(this,arguments)}function Ml(){return Ml=(0,_e.Z)(function*(){const n=Cf();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Ml.apply(this,arguments)}const Bb={error:"UNKNOWN_ERROR"};function Ub(n){return Tt.US.encodeString(JSON.stringify(n),!1)}function Tf(n){return yg.apply(this,arguments)}function yg(){return yg=(0,_e.Z)(function*(n,e=!1){const t=n.app;GT(t);const r=Ai(t);let a,i=r.token;if(i&&!cy(i)&&(r.token=void 0,i=void 0),!i){const _=yield r.cachedTokenPromise;_&&(cy(_)?i=_:yield It(t,void 0))}if(!e&&i&&cy(i))return{token:i.token};let p,c=!1;if(cn()){r.exchangeTokenPromise||(r.exchangeTokenPromise=NI(MA(t,yield kn()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const _=yield r.exchangeTokenPromise;return yield It(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield Ai(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Re.warn(_.message):Re.error(_),a=_}return i?a?p=cy(i)?{token:i.token,internalError:a}:RA(a):(p={token:i.token},r.token=i,yield It(t,i)):p=RA(a),c&&OA(t,p),p}),yg.apply(this,arguments)}function bg(n,e){const t=Ai(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function uy(n){const{app:e}=n,t=Ai(e);let r=t.tokenRefresher;r||(r=function Hb(n){const{app:e}=n;return new jT((0,_e.Z)(function*(){let r;if(r=Ai(e).token?yield Tf(n,!0):yield Tf(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Ai(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function OA(n,e){const t=Ai(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function cy(n){return n.expireTimeMillis-Date.now()>0}function RA(n){return{token:Ub(Bb),error:n}}class Uk{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ai(this.app);for(const t of e)bg(this.app,t.next);return Promise.resolve()}}const HA="app-check-internal";!function eP(){(0,bi._registerComponent)(new tl.wA("app-check",n=>function Hk(n,e){return new Uk(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(HA).initialize()})),(0,bi._registerComponent)(new tl.wA(HA,n=>function jk(n){return{getToken:e=>Tf(n,e),addTokenListener:e=>function vg(n,e,t,r){const{app:i}=n,a=Ai(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&cy(a.token)){const p=a.token;Promise.resolve().then(()=>{t({token:p.token}),uy(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>uy(n))}(n,"INTERNAL",e),removeTokenListener:e=>bg(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,bi.registerVersion)("@firebase/app-check","0.6.0")}();class MI{constructor(){return(0,yn.vb)("app-check")}}typeof window<"u"&&window;var ZT=P(9260);const GA=new d.OlP("angularfire2.auth.use-emulator"),$A=new d.OlP("angularfire2.auth.settings"),WA=new d.OlP("angularfire2.auth.tenant-id"),zA=new d.OlP("angularfire2.auth.langugage-code"),qA=new d.OlP("angularfire2.auth.use-device-language"),KA=new d.OlP("angularfire.auth.persistence"),ZA=(n,e,t,r,i,a,c,p)=>(0,vr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),c)for(const[w,C]of Object.entries(c))_.settings[w]=C;return p&&_.setPersistence(p),_},[t,r,i,a,c,p]);let YT=(()=>{class n{constructor(t,r,i,a,c,p,_,w,C,A,R,V){const Z=new dr.x,te=Je(void 0).pipe((0,Sb.Q)(c.outsideAngular),hr(()=>a.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,9169)))),(0,gt.U)(()=>(0,vr.on)(t,a,r)),(0,gt.U)(le=>ZA(le,a,p,w,C,A,_,R)),PT({bufferSize:1,refCount:!1}));if(Cr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Je(null);else{te.pipe(xa()).subscribe();const He=te.pipe(hr(Pe=>Pe.getRedirectResult().then(Ge=>Ge,()=>null)),yn.iC,PT({bufferSize:1,refCount:!1})),Be=te.pipe(hr(Pe=>new Tr.y(Ge=>({unsubscribe:a.runOutsideAngular(()=>Pe.onAuthStateChanged(Ye=>Ge.next(Ye),Ye=>Ge.error(Ye),()=>Ge.complete()))})))),$e=te.pipe(hr(Pe=>new Tr.y(Ge=>({unsubscribe:a.runOutsideAngular(()=>Pe.onIdTokenChanged(Ye=>Ge.next(Ye),Ye=>Ge.error(Ye),()=>Ge.complete()))}))));this.authState=He.pipe(Ab(Be),(0,_g.R)(c.outsideAngular),(0,Sb.Q)(c.insideAngular)),this.user=He.pipe(Ab($e),(0,_g.R)(c.outsideAngular),(0,Sb.Q)(c.insideAngular)),this.idToken=this.user.pipe(hr(Pe=>Pe?(0,Qt.D)(Pe.getIdToken()):Je(null))),this.idTokenResult=this.user.pipe(hr(Pe=>Pe?(0,Qt.D)(Pe.getIdTokenResult()):Je(null))),this.credential=(0,_A.T)(He,Z,this.authState.pipe(Bn(Pe=>!Pe))).pipe((0,gt.U)(Pe=>Pe?.user?Pe:null),(0,_g.R)(c.outsideAngular),(0,Sb.Q)(c.insideAngular))}return(0,vr.pX)(this,te,a,{spy:{apply:(le,He,Be)=>{(le.startsWith("signIn")||le.startsWith("createUser"))&&Be.then($e=>Z.next($e))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(vr.Dh),d.LFG(vr.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(yn.HU),d.LFG(GA,8),d.LFG($A,8),d.LFG(WA,8),d.LFG(zA,8),d.LFG(qA,8),d.LFG(KA,8),d.LFG(MI,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),oP=(()=>{class n{constructor(){ZT.Z.registerVersion("angularfire",yn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[YT]}),n})();function YA(n,e){return function aP(n,e=bs.z){return new Tr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function QT(n,e){return YA(n,e).pipe((0,gt.U)(t=>({payload:t,type:"query"})))}function OI(n,e){return QT(n,e).pipe(ws(void 0),Ds(),(0,gt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,p)=>{const _=i.find(C=>C.doc.ref.isEqual(c.ref)),w=t?.payload.docs.find(C=>C.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:c}})}),a}))}function QA(n,e,t){return OI(n,t).pipe(Es((r,i)=>function uP(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function cP(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return JT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return JT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return JT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),function Ao(n,e=li.y){return n=n??el,(0,tr.e)((t,r)=>{let i,a=!0;t.subscribe((0,pn.x)(r,c=>{const p=e(c);(a||!n(i,p))&&(a=!1,i=p,r.next(c))}))})}(),(0,gt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function JT(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function JA(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class XA{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=OI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,gt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ws(void 0),Ds(),Bn(([r,i])=>i.length>0||!r),(0,gt.U)(([r,i])=>i),yn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Es((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=JA(e);return QA(this.query,t,this.afs.schedulers.outsideAngular).pipe(yn.iC)}valueChanges(e={}){return QT(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),yn.iC)}get(e){return(0,Qt.D)(this.query.get(e)).pipe(yn.iC)}add(e){return this.ref.add(e)}doc(e){return new ex(this.ref.doc(e),this.afs)}}class ex{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=rx(r,t);return new XA(i,a,this.afs)}snapshotChanges(){return function lP(n,e){return YA(n,e).pipe(ws(void 0),Ds(),(0,gt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(yn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,gt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Qt.D)(this.ref.get(e)).pipe(yn.iC)}}class dP{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?OI(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Bn(t=>t.length>0),yn.iC):OI(this.query,this.afs.schedulers.outsideAngular).pipe(yn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Es((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=JA(e);return QA(this.query,t,this.afs.schedulers.outsideAngular).pipe(yn.iC)}valueChanges(e={}){return QT(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),yn.iC)}get(e){return(0,Qt.D)(this.query.get(e)).pipe(yn.iC)}}const tx=new d.OlP("angularfire2.enableFirestorePersistence"),nx=new d.OlP("angularfire2.firestore.persistenceSettings"),hP=new d.OlP("angularfire2.firestore.settings"),fP=new d.OlP("angularfire2.firestore.use-emulator");function rx(n,e=(t=>t)){return{query:e(n),ref:n}}let pP=(()=>{class n{constructor(t,r,i,a,c,p,_,w,C,A,R,V,Z,te,le,He,Be){this.schedulers=_;const $e=(0,vr.on)(t,p,r),Pe=C;A&&ZA($e,p,R,Z,te,le,V,He),[this.firestore,this.persistenceEnabled$]=(0,vr.cc)(`${$e.name}.firestore`,"AngularFirestore",$e.name,()=>{const Ge=p.runOutsideAngular(()=>$e.firestore());if(a&&Ge.settings(a),Pe&&Ge.useEmulator(...Pe),i&&!Cr(c)){const Ye=()=>{try{return(0,Qt.D)(Ge.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(Pt){return typeof console<"u"&&console.warn(Pt),Je(!1)}};return[Ge,p.runOutsideAngular(Ye)]}return[Ge,Je(!1)]},[a,Pe,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:c}=rx(i,r),p=this.schedulers.ngZone.run(()=>a);return new XA(p,c,this)}collectionGroup(t,r){const i=r||(c=>c),a=this.firestore.collectionGroup(t);return new dP(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new ex(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(vr.Dh),d.LFG(vr.xv,8),d.LFG(tx,8),d.LFG(hP,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(yn.HU),d.LFG(nx,8),d.LFG(fP,8),d.LFG(YT,8),d.LFG(GA,8),d.LFG($A,8),d.LFG(WA,8),d.LFG(zA,8),d.LFG(qA,8),d.LFG(KA,8),d.LFG(MI,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),gP=(()=>{class n{constructor(){ZT.Z.registerVersion("angularfire",yn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:tx,useValue:!0},{provide:nx,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[pP]}),n})();const ix="firebasestorage.googleapis.com",sx="storageBucket";class wr extends Tt.ZR{constructor(e,t,r=0){super(XT(e),`Firebase Storage: ${t} (${XT(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,wr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return XT(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function XT(n){return"storage/"+n}function eS(){return new wr("unknown","An unknown error occurred, please check the error payload for server response.")}function ox(){return new wr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function ax(){return new wr("canceled","User canceled the upload/download.")}function lx(){return new wr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function dy(n){return new wr("invalid-argument",n)}function ux(){return new wr("app-deleted","The Firebase app was deleted.")}function cx(n){return new wr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function jb(n,e){return new wr("invalid-format","String does not match format '"+n+"': "+e)}function Gb(n){throw new wr("internal-error","Internal error: "+n)}class ls{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ls.makeFromUrl(e,t)}catch{return new ls(e,"")}if(""===r.path)return r;throw function TP(n){return new wr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",p=new RegExp("^gs://"+i+"(/(.*))?$","i");function w(Pe){Pe.path_=decodeURIComponent(Pe.path)}const A=t.replace(/[.]/g,"\\."),$e=[{regex:p,indices:{bucket:1,path:3},postModify:function a(Pe){"/"===Pe.path.charAt(Pe.path.length-1)&&(Pe.path_=Pe.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${A}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===ix?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let Pe=0;Pe<$e.length;Pe++){const Ge=$e[Pe],Ye=Ge.regex.exec(e);if(Ye){let $t=Ye[Ge.indices.path];$t||($t=""),r=new ls(Ye[Ge.indices.bucket],$t),Ge.postModify(r);break}}if(null==r)throw function CP(n){return new wr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class MP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function RI(n){return"string"==typeof n||n instanceof String}function dx(n){return tS()&&n instanceof Blob}function tS(){return typeof Blob<"u"&&!(0,Tt.UG)()}function nS(n,e,t,r){if(r<e)throw dy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw dy(`Invalid value for '${n}'. Expected ${t} or less.`)}function Td(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function hx(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Sf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Sf||(Sf={})),Sf))();function fx(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class LP{constructor(e,t,r,i,a,c,p,_,w,C,A,R=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=p,this.errorCallback_=_,this.timeout_=w,this.progressCallback_=C,this.connectionFactory_=A,this.retry=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,Z)=>{this.resolve_=V,this.reject_=Z,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,c=this.reject_,p=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(p,p.getResponse());!function kP(n){return void 0!==n}(_)?a():a(_)}catch(_){c(_)}else if(null!==p){const _=eS();_.serverResponse=p.getErrorText(),c(this.errorCallback_?this.errorCallback_(p,_):_)}else c(i.canceled?this.appDelete_?ux():ax():ox())};this.canceled_?t(0,new kI(!1,null,!0)):this.backoffId_=function OP(n,e,t){let r=1,i=null,a=null,c=!1,p=0;function _(){return 2===p}let w=!1;function C(...le){w||(w=!0,e.apply(null,le))}function A(le){i=setTimeout(()=>{i=null,n(V,_())},le)}function R(){a&&clearTimeout(a)}function V(le,...He){if(w)return void R();if(le)return R(),void C.call(null,le,...He);if(_()||c)return R(),void C.call(null,le,...He);let $e;r<64&&(r*=2),1===p?(p=2,$e=0):$e=1e3*(r+Math.random()),A($e)}let Z=!1;function te(le){Z||(Z=!0,R(),!w&&(null!==i?(le||(p=2),clearTimeout(i),A(0)):le||(p=1)))}return A(0),a=setTimeout(()=>{c=!0,te(!0)},t),te}((r,i)=>{if(i)return void r(!1,new kI(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const c=p=>{null!==this.progressCallback_&&this.progressCallback_(p.loaded,p.lengthComputable?p.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const p=a.getErrorCode()===Sf.NO_ERROR,_=a.getStatus();if((!p||fx(_,this.additionalRetryCodes_))&&this.retry){const C=a.getErrorCode()===Sf.ABORT;return void r(!1,new kI(!1,null,C))}const w=-1!==this.successCodes_.indexOf(_);r(!0,new kI(w,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function RP(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class kI{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function $P(...n){const e=function GP(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(tS())return new Blob(n);throw new wr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Vo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class rS{constructor(e,t){this.data=e,this.contentType=t||null}}function iS(n,e){switch(n){case Vo.RAW:return new rS(px(e));case Vo.BASE64:case Vo.BASE64URL:return new rS(gx(n,e));case Vo.DATA_URL:return new rS(function KP(n){const e=new mx(n);return e.base64?gx(Vo.BASE64,e.rest):function qP(n){let e;try{e=decodeURIComponent(n)}catch{throw jb(Vo.DATA_URL,"Malformed data URL.")}return px(e)}(e.rest)}(e),function ZP(n){return new mx(n).contentType}(e))}throw eS()}function px(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function gx(n,e){switch(n){case Vo.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw jb(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Vo.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw jb(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function zP(n){if(typeof atob>"u")throw function xP(n){return new wr("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:jb(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class mx{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw jb(Vo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function YP(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Qu{constructor(e,t){let r=0,i="";dx(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(dx(this.data_)){const i=function WP(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Qu(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Qu(r,!0)}}static getBlob(...e){if(tS()){const t=e.map(r=>r instanceof Qu?r.data_:r);return new Qu($P.apply(null,t))}{const t=e.map(c=>RI(c)?iS(Vo.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(c=>{for(let p=0;p<c.length;p++)i[a++]=c[p]}),new Qu(i,!0)}}uploadData(){return this.data_}}function sS(n){let e;try{e=JSON.parse(n)}catch{return null}return function FP(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function _x(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function XP(n,e){return e}class Ps{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||XP}}let PI=null;function $b(){if(PI)return PI;const n=[];n.push(new Ps("bucket")),n.push(new Ps("generation")),n.push(new Ps("metageneration")),n.push(new Ps("name","fullPath",!0));const t=new Ps("name");t.xform=function e(a,c){return function eF(n){return!RI(n)||n.length<2?n:_x(n)}(c)},n.push(t);const i=new Ps("size");return i.xform=function r(a,c){return void 0!==c?Number(c):c},n.push(i),n.push(new Ps("timeCreated")),n.push(new Ps("updated")),n.push(new Ps("md5Hash",null,!0)),n.push(new Ps("cacheControl",null,!0)),n.push(new Ps("contentDisposition",null,!0)),n.push(new Ps("contentEncoding",null,!0)),n.push(new Ps("contentLanguage",null,!0)),n.push(new Ps("contentType",null,!0)),n.push(new Ps("metadata","customMetadata",!0)),PI=n,PI}function yx(n,e,t){const r=sS(e);return null===r?null:function nF(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const c=t[a];r[c.local]=c.xform(r,e[c.server])}return function tF(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new ls(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function oS(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const vx="prefixes";class Ju{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Xu(n){if(!n)throw eS()}function FI(n,e){return function t(r,i){const a=yx(n,i,e);return Xu(null!==a),a}}function hy(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function EP(){return new wr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function DP(){return new wr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function wP(n){return new wr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function IP(n){return new wr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function Wb(n){const e=hy(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function bP(n){return new wr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function wx(n,e,t){const i=Td(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,p=new Ju(i,"GET",FI(n,t),c);return p.errorHandler=Wb(e),p}function lF(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const p=Td(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,C=new Ju(p,"GET",function oF(n,e){return function t(r,i){const a=function sF(n,e,t){const r=sS(t);return null===r?null:function iF(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[vx])for(const i of t[vx]){const a=i.replace(/\/$/,""),c=n._makeStorageReference(new ls(e,a));r.prefixes.push(c)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new ls(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Xu(null!==a),a}}(n,e.bucket),w);return C.urlParams=a,C.errorHandler=hy(e),C}function Ex(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function hF(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class LI{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function aS(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Xu(!1)}return Xu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const mF={STATE_CHANGED:"state_changed"},Fs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function lS(n){switch(n){case"running":case"pausing":case"canceling":return Fs.RUNNING;case"paused":return Fs.PAUSED;case"success":return Fs.SUCCESS;case"canceled":return Fs.CANCELED;default:return Fs.ERROR}}class _F{constructor(e,t,r){if(function PP(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function fy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class vF extends class yF{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Sf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Sf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Sf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Gb("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Gb("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Gb("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Gb("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Gb("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Ol(){return new vF}class Sx{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=$b(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(fx(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=ox()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function fF(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c=Ex(e,r,i),p={name:c.fullPath},_=Td(a,n.host,n._protocol),C={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},A=oS(c,t),Z=new Ju(_,"POST",function V(te){let le;aS(te);try{le=te.getResponseHeader("X-Goog-Upload-URL")}catch{Xu(!1)}return Xu(RI(le)),le},n.maxUploadRetryTime);return Z.urlParams=p,Z.headers=C,Z.body=A,Z.errorHandler=hy(e),Z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ol,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function pF(n,e,t,r){const _=new Ju(t,"POST",function a(w){const C=aS(w,["active","final"]);let A=null;try{A=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Xu(!1)}A||Xu(!1);const R=Number(A);return Xu(!isNaN(R)),new LI(R,r.size(),"final"===C)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=hy(e),_}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Ol,t,r);this._request=a,a.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new LI(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let c;try{c=function gF(n,e,t,r,i,a,c,p){const _=new LI(0,0);if(c?(_.current=c.current,_.total=c.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function NP(){return new wr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const w=_.total-_.current;let C=w;i>0&&(C=Math.min(C,i));const A=_.current;let V="";V=0===C?"finalize":w===C?"upload, finalize":"upload";const Z={"X-Goog-Upload-Command":V,"X-Goog-Upload-Offset":`${_.current}`},te=r.slice(A,A+C);if(null===te)throw lx();const $e=new Ju(t,"POST",function le(Pe,Ge){const Ye=aS(Pe,["active","final"]),Pt=_.current+C,$t=r.size();let Dr;return Dr="final"===Ye?FI(e,a)(Pe,Ge):null,new LI(Pt,$t,"final"===Ye,Dr)},e.maxUploadRetryTime);return $e.headers=Z,$e.body=te.uploadData(),$e.progressCallback=p||null,$e.errorHandler=hy(n),$e}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const p=this._ref.storage._makeRequest(c,Ol,i,a,!1);this._request=p,p.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=wx(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Ol,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function Ix(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},_=function p(){let $e="";for(let Pe=0;Pe<2;Pe++)$e+=Math.random().toString().slice(2);return $e}();c["Content-Type"]="multipart/related; boundary="+_;const w=Ex(e,r,i),C=oS(w,t),V=Qu.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+C+"\r\n--"+_+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===V)throw lx();const Z={name:w.fullPath},te=Td(a,n.host,n._protocol),He=n.maxUploadRetryTime,Be=new Ju(te,"POST",FI(n,t),He);return Be.urlParams=Z,Be.headers=c,Be.body=V.uploadData(),Be.errorHandler=hy(e),Be}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ol,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=ax(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=lS(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new _F(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(lS(this._state)){case Fs.SUCCESS:fy(this._resolve.bind(null,this.snapshot))();break;case Fs.CANCELED:case Fs.ERROR:fy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(lS(this._state)){case Fs.RUNNING:case Fs.PAUSED:e.next&&fy(e.next.bind(e,this.snapshot))();break;case Fs.SUCCESS:e.complete&&fy(e.complete.bind(e))();break;default:e.error&&fy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class wg{constructor(e,t){this._service=e,this._location=t instanceof ls?t:ls.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new wg(e,t)}get root(){const e=new ls(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return _x(this._location.path)}get storage(){return this._service}get parent(){const e=function QP(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ls(this._location.bucket,e);return new wg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw cx(e)}}function Ax(n,e,t){return uS.apply(this,arguments)}function uS(){return uS=(0,_e.Z)(function*(n,e,t){const i=yield xx(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield Ax(n,e,i.nextPageToken))}),uS.apply(this,arguments)}function xx(n,e){null!=e&&"number"==typeof e.maxResults&&nS("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=lF(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Ol)}function MF(n){n._throwIfRoot("getDownloadURL");const e=function uF(n,e,t){const i=Td(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,p=new Ju(i,"GET",function aF(n,e){return function t(r,i){const a=yx(n,i,e);return Xu(null!==a),function rF(n,e,t,r){const i=sS(e);if(null===i||!RI(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const c=encodeURIComponent;return a.split(",").map(w=>{const A=n.fullPath;return Td("/b/"+c(n.bucket)+"/o/"+c(A),t,r)+hx({alt:"media",token:w})})[0]}(a,i,n.host,n._protocol)}}(n,t),c);return p.errorHandler=Wb(e),p}(n.storage,n._location,$b());return n.storage.makeRequestWithTokens(e,Ol).then(t=>{if(null===t)throw function AP(){return new wr("no-download-url","The given file does not have any download URLs.")}();return t})}function Mx(n,e){const t=function JP(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ls(n._location.bucket,t);return new wg(n.storage,r)}function Ox(n,e){if(n instanceof cS){const t=n;if(null==t._bucket)throw function SP(){return new wr("no-default-bucket","No default bucket found. Did you set the '"+sx+"' property when initializing the app?")}();const r=new wg(t,t._bucket);return null!=e?Ox(r,e):r}return void 0!==e?Mx(n,e):n}function PF(n,e){if(e&&function RF(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof cS)return function kF(n,e){return new wg(n,e)}(n,e);throw dy("To use ref(service, url), the first argument must be a Storage instance.")}return Ox(n,e)}function Rx(n,e){const t=e?.[sx];return null==t?null:ls.makeFromBucketSpec(t,n)}class cS{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=ix,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ls.makeFromBucketSpec(i,this._host):Rx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ls.makeFromBucketSpec(this._url,e):Rx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){nS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){nS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,_e.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,_e.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new wg(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new MP(ux());{const c=function jP(n,e,t,r,i,a,c=!0){const p=hx(n.urlParams),_=n.url+p,w=Object.assign({},n.headers);return function UP(n,e){e&&(n["X-Firebase-GMPID"]=e)}(w,e),function VP(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(w,t),function BP(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(w,a),function HP(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(w,r),new LP(_,n.method,w,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,t){var r=this;return(0,_e.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const kx="@firebase/storage";function Lx(n,e){return PF(n=(0,Tt.m9)(n),e)}function WF(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new cS(t,r,i,e,bi.SDK_VERSION)}!function zF(){(0,bi._registerComponent)(new tl.wA("storage",WF,"PUBLIC").setMultipleInstances(!0)),(0,bi.registerVersion)(kx,"0.10.0",""),(0,bi.registerVersion)(kx,"0.10.0","esm2017")}();class VI{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Bx{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new VI(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new VI(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?c=>t(new VI(c,this,this._ref)):{next:t.next?c=>t.next(new VI(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class Ux{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Sd(e,this._service))}get items(){return this._delegate.items.map(e=>new Sd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Sd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function $F(n,e){return Mx(n,e)}(this._delegate,e);return new Sd(t,this.storage)}get root(){return new Sd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Sd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Bx(function LF(n,e,t){return function TF(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Sx(n,new Qu(e),t)}(n=(0,Tt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Vo.RAW,r){this._throwIfRoot("putString");const i=iS(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new Bx(new Sx(this._delegate,new Qu(i.data,!0),a),this)}listAll(){return function HF(n){return function NF(n){const e={prefixes:[],items:[]};return Ax(n,e).then(()=>e)}(n=(0,Tt.m9)(n))}(this._delegate).then(e=>new Ux(e,this.storage))}list(e){return function UF(n,e){return xx(n=(0,Tt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new Ux(t,this.storage))}getMetadata(){return function VF(n){return function AF(n){n._throwIfRoot("getMetadata");const e=wx(n.storage,n._location,$b());return n.storage.makeRequestWithTokens(e,Ol)}(n=(0,Tt.m9)(n))}(this._delegate)}updateMetadata(e){return function BF(n,e){return function xF(n,e){n._throwIfRoot("updateMetadata");const t=function cF(n,e,t,r){const a=Td(e.fullServerUrl(),n.host,n._protocol),p=oS(t,r),w=n.maxOperationRetryTime,C=new Ju(a,"PATCH",FI(n,r),w);return C.headers={"Content-Type":"application/json; charset=utf-8"},C.body=p,C.errorHandler=Wb(e),C}(n.storage,n._location,e,$b());return n.storage.makeRequestWithTokens(t,Ol)}(n=(0,Tt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function jF(n){return MF(n=(0,Tt.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function GF(n){return function OF(n){n._throwIfRoot("deleteObject");const e=function dF(n,e){const r=Td(e.fullServerUrl(),n.host,n._protocol),p=new Ju(r,"DELETE",function c(_,w){},n.maxOperationRetryTime);return p.successCodes=[200,204],p.errorHandler=Wb(e),p}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Ol)}(n=(0,Tt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw cx(e)}}class Hx{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(jx(e))throw dy("ref() expected a child path but got a URL, use refFromURL instead.");return new Sd(Lx(this._delegate,e),this)}refFromURL(e){if(!jx(e))throw dy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ls.makeFromUrl(e,this._delegate.host)}catch{throw dy("refFromUrl() expected a valid full URL but got an invalid one.")}return new Sd(Lx(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function Vx(n,e,t,r={}){!function FF(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,Tt.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function jx(n){return/^[A-Za-z]+:\/\//.test(n)}function YF(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new Hx(t,r)}function Gx(n){const e=function JF(n){return new Tr.y(e=>{const t=c=>e.next(c);t(n.snapshot);const a=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){a()}}).pipe(function mP(n,e=bs.z){return(0,tr.e)((t,r)=>{let i=null,a=null,c=null;const p=()=>{if(i){i.unsubscribe(),i=null;const w=a;a=null,r.next(w)}};function _(){const w=c+n,C=e.now();if(C<w)return i=this.schedule(void 0,w-C),void r.add(i);p()}t.subscribe((0,pn.x)(r,w=>{a=w,c=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{p(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,gt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function BI(n){return{getDownloadURL:()=>Je(void 0).pipe(yn.fc,hr(()=>n.getDownloadURL()),yn.iC),getMetadata:()=>Je(void 0).pipe(yn.fc,hr(()=>n.getMetadata()),yn.iC),delete:()=>(0,Qt.D)(n.delete()),child:e=>BI(n.child(e)),updateMetadata:e=>(0,Qt.D)(n.updateMetadata(e)),put:(e,t)=>Gx(n.put(e,t)),putString:(e,t,r)=>Gx(n.putString(e,t,r)),list:e=>(0,Qt.D)(n.list(e)),listAll:()=>(0,Qt.D)(n.listAll())}}!function QF(n){const e={TaskState:Fs,TaskEvent:mF,StringFormat:Vo,Storage:Hx,Reference:Sd};n.INTERNAL.registerComponent(new tl.wA("storage-compat",YF,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.2.0")}(na.Z);const XF=new d.OlP("angularfire2.storageBucket"),eL=new d.OlP("angularfire2.storage.maxUploadRetryTime"),tL=new d.OlP("angularfire2.storage.maxOperationRetryTime"),nL=new d.OlP("angularfire2.storage.use-emulator");let rL=(()=>{class n{constructor(t,r,i,a,c,p,_,w,C,A){const R=(0,vr.on)(t,c,r);this.storage=(0,vr.cc)(`${R.name}.storage.${i}`,"AngularFireStorage",R.name,()=>{const V=c.runOutsideAngular(()=>R.storage(i||void 0)),Z=C;return Z&&V.useEmulator(...Z),_&&V.setMaxUploadRetryTime(_),w&&V.setMaxOperationRetryTime(w),V},[_,w])}ref(t){return BI(this.storage.ref(t))}refFromURL(t){return BI(this.storage.refFromURL(t))}upload(t,r,i){return BI(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(vr.Dh),d.LFG(vr.xv,8),d.LFG(XF,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(yn.HU),d.LFG(eL,8),d.LFG(tL,8),d.LFG(nL,8),d.LFG(MI,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),iL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),sL=(()=>{class n{constructor(){ZT.Z.registerVersion("angularfire",yn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[rL],imports:[iL]}),n})();const $x_firebase={apiKey:"AIzaSyDZILPwFnS7tECTun0UIaWbyeBKSa1XgSY",authDomain:"oshop-b3804.firebaseapp.com",projectId:"oshop-b3804",storageBucket:"oshop-b3804.appspot.com",messagingSenderId:"457118148565",appId:"1:457118148565:web:15d0ceb38019e435c53f5c"};class xi extends dr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:oL}=Array,{getPrototypeOf:aL,prototype:lL,keys:uL}=Object;const{isArray:dL}=Array;function dS(n){return(0,gt.U)(e=>function hL(n,e){return dL(e)?n(...e):n(e)}(n,e))}var fL=P(9672);function UI(...n){const e=(0,Vn.yG)(n),t=(0,Vn.jO)(n),{args:r,keys:i}=function Wx(n){if(1===n.length){const e=n[0];if(oL(e))return{args:e,keys:null};if(function cL(n){return n&&"object"==typeof n&&aL(n)===lL}(e)){const t=uL(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,Qt.D)([],e);const a=new Tr.y(function pL(n,e,t=li.y){return r=>{qx(e,()=>{const{length:i}=n,a=new Array(i);let c=i,p=i;for(let _=0;_<i;_++)qx(e,()=>{const w=(0,Qt.D)(n[_],e);let C=!1;w.subscribe((0,pn.x)(r,A=>{a[_]=A,C||(C=!0,p--),p||r.next(t(a.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>function zx(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,c):li.y));return t?a.pipe(dS(t)):a}function qx(n,e,t){n?(0,fL.f)(t,n,e):e()}function Kx(n){return new Tr.y(e=>{(0,Lo.Xf)(n()).subscribe(e)})}var gL=P(9635);function zb(n,e){const t=(0,Ni.m)(n)?n:()=>n,r=i=>i.error(t());return new Tr.y(e?i=>e.schedule(r,0,i):r)}var Zx=P(727);function hS(){return(0,tr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,pn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Yx extends Tr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,tr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Zx.w0;const t=this.getSubject();e.add(this.source.subscribe((0,pn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Zx.w0.EMPTY)}return e}refCount(){return hS()(this)}}var ji=P(5577);function Dg(n,e){return(0,Ni.m)(e)?(0,ji.z)(n,e,1):(0,ji.z)(n,1)}var Mi=P(8505);function Nf(n){return(0,tr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,pn.x)(t,void 0,void 0,c=>{a=(0,Lo.Xf)(n(c,Nf(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function fS(n){return n<=0?()=>Yu.E:(0,tr.e)((e,t)=>{let r=[];e.subscribe((0,pn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Qx(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Bn((i,a)=>n(i,a,r)):li.y,fS(1),t?Cd(e):DI(()=>new Nb))}function Jx(n){return(0,gt.U)(()=>n)}function pS(n){return(0,tr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Kt="primary",qb=Symbol("RouteTitle");class _L{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function py(n){return new _L(n)}function yL(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const c=r[a],p=n[a];if(c.startsWith(":"))i[c.substring(1)]=p;else if(c!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ec(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Xx(n[i],e[i]))return!1;return!0}function Xx(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function eM(n){return Array.prototype.concat.apply([],n)}function tM(n){return n.length>0?n[n.length-1]:null}function Gi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Af(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,Qt.D)(Promise.resolve(n)):Je(n)}const wL={exact:function iM(n,e,t){if(!Ig(n.segments,e.segments)||!HI(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!iM(n.children[r],e.children[r],t))return!1;return!0},subset:sM},nM={exact:function DL(n,e){return ec(n,e)},subset:function EL(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Xx(n[t],e[t]))},ignored:()=>!0};function rM(n,e,t){return wL[t.paths](n.root,e.root,t.matrixParams)&&nM[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function sM(n,e,t){return oM(n,e,e.segments,t)}function oM(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ig(i,t)||e.hasChildren()||!HI(i,t,r))}if(n.segments.length===t.length){if(!Ig(n.segments,t)||!HI(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!sM(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Ig(n.segments,i)&&HI(n.segments,i,r)&&n.children[Kt])&&oM(n.children[Kt],e,a,r)}}function HI(n,e,t){return e.every((r,i)=>nM[t](n[i].parameters,r.parameters))}class Eg{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=py(this.queryParams)),this._queryParamMap}toString(){return TL.serialize(this)}}class en{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Gi(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return jI(this)}}class Kb{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=py(this.parameters)),this._parameterMap}toString(){return cM(this)}}function Ig(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let aM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new mS},providedIn:"root"}),n})();class mS{parse(e){const t=new PL(e);return new Eg(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Zb(e.root,!0)}`,r=function AL(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${GI(t)}=${GI(i)}`).join("&"):`${GI(t)}=${GI(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function SL(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const TL=new mS;function jI(n){return n.segments.map(e=>cM(e)).join("/")}function Zb(n,e){if(!n.hasChildren())return jI(n);if(e){const t=n.children[Kt]?Zb(n.children[Kt],!1):"",r=[];return Gi(n.children,(i,a)=>{a!==Kt&&r.push(`${a}:${Zb(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function CL(n,e){let t=[];return Gi(n.children,(r,i)=>{i===Kt&&(t=t.concat(e(r,i)))}),Gi(n.children,(r,i)=>{i!==Kt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Kt?[Zb(n.children[Kt],!1)]:[`${i}:${Zb(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Kt]?`${jI(n)}/${t[0]}`:`${jI(n)}/(${t.join("//")})`}}function lM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function GI(n){return lM(n).replace(/%3B/gi,";")}function _S(n){return lM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $I(n){return decodeURIComponent(n)}function uM(n){return $I(n.replace(/\+/g,"%20"))}function cM(n){return`${_S(n.path)}${function NL(n){return Object.keys(n).map(e=>`;${_S(e)}=${_S(n[e])}`).join("")}(n.parameters)}`}const xL=/^[^\/()?;=#]+/;function WI(n){const e=n.match(xL);return e?e[0]:""}const ML=/^[^=?&#]+/,RL=/^[^&#]+/;class PL{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new en([],{}):new en([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Kt]=new en(e,t)),r}parseSegment(){const e=WI(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,!1);return this.capture(e),new Kb($I(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=WI(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=WI(this.remaining);i&&(r=i,this.capture(r))}e[$I(t)]=$I(r)}parseQueryParam(e){const t=function OL(n){const e=n.match(ML);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function kL(n){const e=n.match(RL);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=uM(t),a=uM(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=WI(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Kt);const c=this.parseChildren();t[a]=1===Object.keys(c).length?c[Kt]:new en([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,!1)}}function yS(n){return n.segments.length>0?new en([],{[Kt]:n}):n}function zI(n){const e={};for(const r of Object.keys(n.children)){const a=zI(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function FL(n){if(1===n.numberOfChildren&&n.children[Kt]){const e=n.children[Kt];return new en(n.segments.concat(e.segments),e.children)}return n}(new en(n.segments,e))}function Cg(n){return n instanceof Eg}function BL(n,e,t,r,i){if(0===t.length)return gy(e.root,e.root,e.root,r,i);const a=function fM(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new hM(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,c)=>{if("object"==typeof a&&null!=a){if(a.outlets){const p={};return Gi(a.outlets,(_,w)=>{p[w]="string"==typeof _?_.split("/"):_}),[...i,{outlets:p}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===c?(a.split("/").forEach((p,_)=>{0==_&&"."===p||(0==_&&""===p?t=!0:".."===p?e++:""!=p&&i.push(p))}),i):[...i,a]},[]);return new hM(t,e,r)}(t);return a.toRoot()?gy(e.root,e.root,new en([],{}),r,i):function c(_){const w=function HL(n,e,t,r){if(n.isAbsolute)return new my(e.root,!0,0);if(-1===r)return new my(t,t===e.root,0);return function pM(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new d.vHH(4005,!1);i=r.segments.length}return new my(r,!1,i-a)}(t,r+(Yb(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,_),C=w.processChildren?Jb(w.segmentGroup,w.index,a.commands):bS(w.segmentGroup,w.index,a.commands);return gy(e.root,w.segmentGroup,C,r,i)}(n.snapshot?._lastPathIndex)}function Yb(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Qb(n){return"object"==typeof n&&null!=n&&n.outlets}function gy(n,e,t,r,i){let c,a={};r&&Gi(r,(_,w)=>{a[w]=Array.isArray(_)?_.map(C=>`${C}`):`${_}`}),c=n===e?t:dM(n,e,t);const p=yS(zI(c));return new Eg(p,a,i)}function dM(n,e,t){const r={};return Gi(n.children,(i,a)=>{r[a]=i===e?t:dM(i,e,t)}),new en(n.segments,r)}class hM{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Yb(r[0]))throw new d.vHH(4003,!1);const i=r.find(Qb);if(i&&i!==tM(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class my{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function bS(n,e,t){if(n||(n=new en([],{})),0===n.segments.length&&n.hasChildren())return Jb(n,e,t);const r=function GL(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const c=n.segments[i],p=t[r];if(Qb(p))break;const _=`${p}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!mM(_,w,c))return a;r+=2}else{if(!mM(_,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new en(n.segments.slice(0,r.pathIndex),{});return a.children[Kt]=new en(n.segments.slice(r.pathIndex),n.children),Jb(a,0,i)}return r.match&&0===i.length?new en(n.segments,{}):r.match&&!n.hasChildren()?wS(n,e,t):r.match?Jb(n,0,i):wS(n,e,t)}function Jb(n,e,t){if(0===t.length)return new en(n.segments,{});{const r=function jL(n){return Qb(n[0])?n[0].outlets:{[Kt]:n}}(t),i={};return Gi(r,(a,c)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[c]=bS(n.children[c],e,a))}),Gi(n.children,(a,c)=>{void 0===r[c]&&(i[c]=a)}),new en(n.segments,i)}}function wS(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Qb(a)){const _=$L(a.outlets);return new en(r,_)}if(0===i&&Yb(t[0])){r.push(new Kb(n.segments[e].path,gM(t[0]))),i++;continue}const c=Qb(a)?a.outlets[Kt]:`${a}`,p=i<t.length-1?t[i+1]:null;c&&p&&Yb(p)?(r.push(new Kb(c,gM(p))),i+=2):(r.push(new Kb(c,{})),i++)}return new en(r,{})}function $L(n){const e={};return Gi(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=wS(new en([],{}),0,t))}),e}function gM(n){const e={};return Gi(n,(t,r)=>e[r]=`${t}`),e}function mM(n,e,t){return n==t.path&&ec(e,t.parameters)}class Nd{constructor(e,t){this.id=e,this.url=t}}class DS extends Nd{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Tg extends Nd{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class qI extends Nd{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class _M extends Nd{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class WL extends Nd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zL extends Nd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qL extends Nd{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class KL extends Nd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ZL extends Nd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class YL{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class QL{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class JL{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class XL{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class e2{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class t2{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yM{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class vM{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=ES(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=ES(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=IS(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return IS(e,this._root).map(t=>t.value)}}function ES(n,e){if(n===e.value)return e;for(const t of e.children){const r=ES(n,t);if(r)return r}return null}function IS(n,e){if(n===e.value)return[e];for(const t of e.children){const r=IS(n,t);if(r.length)return r.unshift(e),r}return[]}class Ad{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function _y(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class bM extends vM{constructor(e,t){super(e),this.snapshot=t,CS(this,e)}toString(){return this.snapshot.toString()}}function wM(n,e){const t=function r2(n,e){const c=new KI([],{},{},"",{},Kt,e,null,n.root,-1,{});return new EM("",new Ad(c,[]))}(n,e),r=new xi([new Kb("",{})]),i=new xi({}),a=new xi({}),c=new xi({}),p=new xi(""),_=new Sg(r,i,c,p,a,Kt,e,t.root);return _.snapshot=t.root,new bM(new Ad(_,[]),t)}class Sg{constructor(e,t,r,i,a,c,p,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=p,this.title=this.data?.pipe((0,gt.U)(w=>w[qb]))??Je(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,gt.U)(e=>py(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,gt.U)(e=>py(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function DM(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function s2(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class KI{constructor(e,t,r,i,a,c,p,_,w,C,A,R){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=p,this.title=this.data?.[qb],this.routeConfig=_,this._urlSegment=w,this._lastPathIndex=C,this._correctedLastPathIndex=R??C,this._resolve=A}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=py(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=py(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class EM extends vM{constructor(e,t){super(t),this.url=e,CS(this,t)}toString(){return IM(this._root)}}function CS(n,e){e.value._routerState=n,e.children.forEach(t=>CS(n,t))}function IM(n){const e=n.children.length>0?` { ${n.children.map(IM).join(", ")} } `:"";return`${n.value}${e}`}function TS(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ec(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ec(e.params,t.params)||n.params.next(t.params),function vL(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ec(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ec(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function SS(n,e){const t=ec(n.params,e.params)&&function IL(n,e){return Ig(n,e)&&n.every((t,r)=>ec(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||SS(n.parent,e.parent))}function Xb(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function a2(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Xb(n,r,i);return Xb(n,r)})}(n,e,t);return new Ad(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const c=a.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(p=>Xb(n,p)),c}}const r=function l2(n){return new Sg(new xi(n.url),new xi(n.params),new xi(n.queryParams),new xi(n.fragment),new xi(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Xb(n,a));return new Ad(r,i)}}const NS="ngNavigationCancelingError";function CM(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Cg(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=TM(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function TM(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[NS]=!0,r.cancellationCode=e,t&&(r.url=t),r}function SM(n){return NM(n)&&Cg(n.url)}function NM(n){return n&&n[NS]}class u2{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ew,this.attachRef=null}}let ew=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new u2,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ZI=!1;let AS=(()=>{class n{constructor(t,r,i,a,c){this.parentContexts=t,this.location=r,this.changeDetector=a,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=i||Kt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,ZI);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,ZI);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,ZI);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,ZI);this._activatedRoute=t;const i=this.location,c=t._futureSnapshot.component,p=this.parentContexts.getOrCreateContext(this.name).children,_=new c2(t,p,i.injector);if(r&&function d2(n){return!!n.resolveComponentFactory}(r)){const w=r.resolveComponentFactory(c);this.activated=i.createComponent(w,i.length,_)}else this.activated=i.createComponent(c,{index:i.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ew),d.Y36(d.s_b),d.$8M("name"),d.Y36(d.sBO),d.Y36(d.lqb))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class c2{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Sg?this.route:e===ew?this.childContexts:this.parent.get(e,t)}}let xS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[AS],encapsulation:2}),n})();function AM(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function OS(n){const e=n.children&&n.children.map(OS),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Kt&&(t.component=xS),t}function Ma(n){return n.outlet||Kt}function xM(n,e){const t=n.filter(r=>Ma(r)===e);return t.push(...n.filter(r=>Ma(r)!==e)),t}function tw(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class m2{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),TS(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=_y(t);e.children.forEach(a=>{const c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),Gi(i,(a,c)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=_y(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);if(r&&r.outlet){const c=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=_y(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=_y(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new t2(a.value.snapshot))}),e.children.length&&this.forwardEvent(new XL(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(TS(i),i===a)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(p.contexts),c.attachRef=p.componentRef,c.route=p.route.value,c.outlet&&c.outlet.attach(p.componentRef,p.route.value),TS(p.route.value),this.activateChildRoutes(e,null,c.children)}else{const p=tw(i.snapshot),_=p?.get(d._Vd)??null;c.attachRef=null,c.route=i,c.resolver=_,c.injector=p,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class MM{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class YI{constructor(e,t){this.component=e,this.route=t}}function _2(n,e,t){const r=n._root;return nw(r,e?e._root:null,t,[r.value])}function yy(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function nw(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=_y(e);return n.children.forEach(c=>{(function v2(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,c=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){const _=function b2(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ig(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ig(n.url,e.url)||!ec(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!SS(n,e)||!ec(n.queryParams,e.queryParams);default:return!SS(n,e)}}(c,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new MM(r)):(a.data=c.data,a._resolvedData=c._resolvedData),nw(n,e,a.component?p?p.children:null:t,r,i),_&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new YI(p.outlet.component,c))}else c&&rw(e,p,i),i.canActivateChecks.push(new MM(r)),nw(n,null,a.component?p?p.children:null:t,r,i)})(c,a[c.value.outlet],t,r.concat([c.value]),i),delete a[c.value.outlet]}),Gi(a,(c,p)=>rw(c,t.getContext(p),i)),i}function rw(n,e,t){const r=_y(n),i=n.value;Gi(r,(a,c)=>{rw(a,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new YI(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function iw(n){return"function"==typeof n}function RS(n){return n instanceof Nb||"EmptyError"===n?.name}const QI=Symbol("INITIAL_VALUE");function vy(){return hr(n=>UI(n.map(e=>e.pipe(ci(1),ws(QI)))).pipe((0,gt.U)(e=>{for(const t of e)if(!0!==t){if(t===QI)return QI;if(!1===t||t instanceof Eg)return t}return!0}),Bn(e=>e!==QI),ci(1)))}function OM(n){return(0,gL.z)((0,Mi.b)(e=>{if(Cg(e))throw CM(0,e)}),(0,gt.U)(e=>!0===e))}const kS={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function RM(n,e,t,r,i){const a=PS(n,e,t);return a.matched?function L2(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Je(i.map(c=>{const p=yy(c,n);return Af(function T2(n){return n&&iw(n.canMatch)}(p)?p.canMatch(e,t):n.runInContext(()=>p(e,t)))})).pipe(vy(),OM()):Je(!0)}(r=AM(e,r),e,t).pipe((0,gt.U)(c=>!0===c?a:{...kS})):Je(a)}function PS(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...kS}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||yL)(t,n,e);if(!i)return{...kS};const a={};Gi(i.posParams,(p,_)=>{a[_]=p.path});const c=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function JI(n,e,t,r,i="corrected"){if(t.length>0&&function U2(n,e,t){return t.some(r=>XI(n,e,r)&&Ma(r)!==Kt)}(n,t,r)){const c=new en(e,function B2(n,e,t,r){const i={};i[Kt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Ma(a)!==Kt){const c=new en([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[Ma(a)]=c}return i}(n,e,r,new en(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function H2(n,e,t){return t.some(r=>XI(n,e,r))}(n,t,r)){const c=new en(n.segments,function V2(n,e,t,r,i,a){const c={};for(const p of r)if(XI(n,t,p)&&!i[Ma(p)]){const _=new en([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===a?n.segments.length:e.length,c[Ma(p)]=_}return{...i,...c}}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const a=new en(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function XI(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function kM(n,e,t,r){return!!(Ma(n)===r||r!==Kt&&XI(e,t,n))&&("**"===n.path||PS(e,n,t).matched)}function PM(n,e,t){return 0===e.length&&!n.children[t]}const e1=!1;class t1{constructor(e){this.segmentGroup=e||null}}class FM{constructor(e){this.urlTree=e}}function sw(n){return zb(new t1(n))}function LM(n){return zb(new FM(n))}class W2{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=JI(this.urlTree.root,[],[],this.config).segmentGroup,t=new en(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Kt).pipe((0,gt.U)(a=>this.createUrlTree(zI(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Nf(a=>{if(a instanceof FM)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof t1?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Kt).pipe((0,gt.U)(i=>this.createUrlTree(zI(i),e.queryParams,e.fragment))).pipe(Nf(i=>{throw i instanceof t1?this.noMatchError(i):i}))}noMatchError(e){return new d.vHH(4002,e1)}createUrlTree(e,t,r){const i=yS(e);return new Eg(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,gt.U)(a=>new en([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Qt.D)(i).pipe(Dg(a=>{const c=r.children[a],p=xM(t,a);return this.expandSegmentGroup(e,p,c,a).pipe((0,gt.U)(_=>({segment:_,outlet:a})))}),Es((a,c)=>(a[c.outlet]=c.segment,a),{}),Qx())}expandSegment(e,t,r,i,a,c){return(0,Qt.D)(r).pipe(Dg(p=>this.expandSegmentAgainstRoute(e,t,r,p,i,a,c).pipe(Nf(w=>{if(w instanceof t1)return Je(null);throw w}))),xa(p=>!!p),Nf((p,_)=>{if(RS(p))return PM(t,i,a)?Je(new en([],{})):sw(t);throw p}))}expandSegmentAgainstRoute(e,t,r,i,a,c,p){return kM(i,t,a,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,c):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c):sw(t):sw(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?LM(a):this.lineralizeSegments(r,a).pipe((0,ji.z)(c=>{const p=new en(c,{});return this.expandSegment(e,p,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){const{matched:p,consumedSegments:_,remainingSegments:w,positionalParamSegments:C}=PS(t,i,a);if(!p)return sw(t);const A=this.applyRedirectCommands(_,i.redirectTo,C);return i.redirectTo.startsWith("/")?LM(A):this.lineralizeSegments(i,A).pipe((0,ji.z)(R=>this.expandSegment(e,t,r,R.concat(w),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=AM(r,e),r.loadChildren?(r._loadedRoutes?Je({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,gt.U)(p=>(r._loadedRoutes=p.routes,r._loadedInjector=p.injector,new en(i,{})))):Je(new en(i,{}))):RM(t,r,i,e).pipe(hr(({matched:c,consumedSegments:p,remainingSegments:_})=>c?this.getChildConfig(e=r._injector??e,r,i).pipe((0,ji.z)(C=>{const A=C.injector??e,R=C.routes,{segmentGroup:V,slicedSegments:Z}=JI(t,p,_,R),te=new en(V.segments,V.children);if(0===Z.length&&te.hasChildren())return this.expandChildren(A,R,te).pipe((0,gt.U)($e=>new en(p,$e)));if(0===R.length&&0===Z.length)return Je(new en(p,{}));const le=Ma(r)===a;return this.expandSegment(A,te,R,Z,le?Kt:a,!0).pipe((0,gt.U)(Be=>new en(p.concat(Be.segments),Be.children)))})):sw(t)))}getChildConfig(e,t,r){return t.children?Je({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Je({routes:t._loadedRoutes,injector:t._loadedInjector}):function F2(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Je(!0):Je(i.map(c=>{const p=yy(c,n);return Af(function D2(n){return n&&iw(n.canLoad)}(p)?p.canLoad(e,t):n.runInContext(()=>p(e,t)))})).pipe(vy(),OM())}(e,t,r).pipe((0,ji.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Mi.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function G2(n){return zb(TM(e1,3))}())):Je({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Je(r);if(i.numberOfChildren>1||!i.children[Kt])return zb(new d.vHH(4e3,e1));i=i.children[Kt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Eg(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Gi(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const p=i.substring(1);r[a]=t[p]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let c={};return Gi(t.children,(p,_)=>{c[_]=this.createSegmentGroup(e,p,r,i)}),new en(a,c)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,e1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class q2{}class Y2{constructor(e,t,r,i,a,c,p,_){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=p,this.urlSerializer=_}recognize(){const e=JI(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Kt).pipe((0,gt.U)(t=>{if(null===t)return null;const r=new KI([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Kt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ad(r,t),a=new EM(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=DM(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Qt.D)(Object.keys(r.children)).pipe(Dg(i=>{const a=r.children[i],c=xM(t,i);return this.processSegmentGroup(e,c,a,i)}),Es((i,a)=>i&&a?(i.push(...a),i):null),function mL(n,e=!1){return(0,tr.e)((t,r)=>{let i=0;t.subscribe((0,pn.x)(r,a=>{const c=n(a,i++);(c||e)&&r.next(a),!c&&r.complete()}))})}(i=>null!==i),Cd(null),Qx(),(0,gt.U)(i=>{if(null===i)return null;const a=VM(i);return function Q2(n){n.sort((e,t)=>e.value.outlet===Kt?-1:t.value.outlet===Kt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,Qt.D)(t).pipe(Dg(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,i,a)),xa(c=>!!c),Nf(c=>{if(RS(c))return PM(r,i,a)?Je([]):Je(null);throw c}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!kM(t,r,i,a))return Je(null);let c;if("**"===t.path){const p=i.length>0?tM(i).parameters:{},_=UM(r)+i.length;c=Je({snapshot:new KI(i,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,jM(t),Ma(t),t.component??t._loadedComponent??null,t,BM(r),_,GM(t),_),consumedSegments:[],remainingSegments:[]})}else c=RM(r,t,i,e).pipe((0,gt.U)(({matched:p,consumedSegments:_,remainingSegments:w,parameters:C})=>{if(!p)return null;const A=UM(r)+_.length;return{snapshot:new KI(_,C,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,jM(t),Ma(t),t.component??t._loadedComponent??null,t,BM(r),A,GM(t),A),consumedSegments:_,remainingSegments:w}}));return c.pipe(hr(p=>{if(null===p)return Je(null);const{snapshot:_,consumedSegments:w,remainingSegments:C}=p;e=t._injector??e;const A=t._loadedInjector??e,R=function J2(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:V,slicedSegments:Z}=JI(r,w,C,R.filter(le=>void 0===le.redirectTo),this.relativeLinkResolution);if(0===Z.length&&V.hasChildren())return this.processChildren(A,R,V).pipe((0,gt.U)(le=>null===le?null:[new Ad(_,le)]));if(0===R.length&&0===Z.length)return Je([new Ad(_,[])]);const te=Ma(t)===a;return this.processSegment(A,R,V,Z,te?Kt:a).pipe((0,gt.U)(le=>null===le?null:[new Ad(_,le)]))}))}}function X2(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function VM(n){const e=[],t=new Set;for(const r of n){if(!X2(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=VM(r.children);e.push(new Ad(r.value,i))}return e.filter(r=>!t.has(r))}function BM(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function UM(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function jM(n){return n.data||{}}function GM(n){return n.resolve||{}}function $M(n){return"string"==typeof n.title||null===n.title}function FS(n){return hr(e=>{const t=n(e);return t?(0,Qt.D)(t).pipe((0,gt.U)(()=>e)):Je(e)})}let WM=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Kt);return r}getResolvedTitleForRoute(t){return t.data[qb]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(zM)},providedIn:"root"}),n})(),zM=(()=>{class n extends WM{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ys))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class aV{}class uV extends class lV{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const r1=new d.OlP("",{providedIn:"root",factory:()=>({})}),LS=new d.OlP("ROUTES");let VS=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Je(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Af(t.loadComponent()).pipe((0,Mi.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),pS(()=>{this.componentLoaders.delete(t)})),i=new Yx(r,()=>new dr.x).pipe(hS());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Je({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,gt.U)(p=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,w,C=!1;Array.isArray(p)?w=p:(_=p.create(t).injector,w=eM(_.get(LS,[],d.XFs.Self|d.XFs.Optional)));return{routes:w.map(OS),injector:_}}),pS(()=>{this.childrenLoaders.delete(r)})),c=new Yx(a,()=>new dr.x).pipe(hS());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return Af(t()).pipe((0,ji.z)(r=>r instanceof d.YKP||Array.isArray(r)?Je(r):(0,Qt.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3),d.LFG(d.Sil))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class dV{}class hV{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function fV(n){throw n}function pV(n,e,t){return e.parse("/")}const gV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function KM(){const n=(0,d.f3M)(aM),e=(0,d.f3M)(ew),t=(0,d.f3M)(Ne),r=(0,d.f3M)(d.zs3),i=(0,d.f3M)(d.Sil),a=(0,d.f3M)(LS,{optional:!0})??[],c=(0,d.f3M)(r1,{optional:!0})??{},p=(0,d.f3M)(zM),_=(0,d.f3M)(WM,{optional:!0}),w=(0,d.f3M)(dV,{optional:!0}),C=(0,d.f3M)(aV,{optional:!0}),A=new $i(null,n,e,t,r,i,eM(a));return w&&(A.urlHandlingStrategy=w),C&&(A.routeReuseStrategy=C),A.titleStrategy=_??p,function _V(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,A),A}let $i=(()=>{class n{constructor(t,r,i,a,c,p,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new dr.x,this.errorHandler=fV,this.malformedUriErrorHandler=pV,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Je(void 0),this.urlHandlingStrategy=new hV,this.routeReuseStrategy=new uV,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(VS),this.configLoader.onLoadEndListener=R=>this.triggerEvent(new QL(R)),this.configLoader.onLoadStartListener=R=>this.triggerEvent(new YL(R)),this.ngModule=c.get(d.h0i),this.console=c.get(d.c2e);const A=c.get(d.R0b);this.isNgZoneEnabled=A instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function bL(){return new Eg(new en([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=wM(this.currentUrlTree,this.rootComponentType),this.transitions=new xi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Bn(i=>0!==i.id),(0,gt.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),hr(i=>{let a=!1,c=!1;return Je(i).pipe((0,Mi.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.rawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),hr(p=>{const _=this.browserUrlTree.toString(),w=!this.navigated||p.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return ZM(p.source)&&(this.browserUrlTree=p.extractedUrl),Je(p).pipe(hr(A=>{const R=this.transitions.getValue();return r.next(new DS(A.id,this.serializeUrl(A.extractedUrl),A.source,A.restoredState)),R!==this.transitions.getValue()?Yu.E:Promise.resolve(A)}),function z2(n,e,t,r){return hr(i=>function $2(n,e,t,r,i){return new W2(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,gt.U)(a=>({...i,urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Mi.b)(A=>{this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects},i.urlAfterRedirects=A.urlAfterRedirects}),function tV(n,e,t,r,i,a){return(0,ji.z)(c=>function Z2(n,e,t,r,i,a,c="emptyOnly",p="legacy"){return new Y2(n,e,t,r,i,c,p,a).recognize().pipe(hr(_=>null===_?function K2(n){return new Tr.y(e=>e.error(n))}(new q2):Je(_)))}(n,e,t,c.urlAfterRedirects,r.serialize(c.urlAfterRedirects),r,i,a).pipe((0,gt.U)(p=>({...c,targetSnapshot:p}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Mi.b)(A=>{if(i.targetSnapshot=A.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!A.extras.skipLocationChange){const V=this.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);this.setBrowserUrl(V,A)}this.browserUrlTree=A.urlAfterRedirects}const R=new WL(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);r.next(R)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:R,extractedUrl:V,source:Z,restoredState:te,extras:le}=p,He=new DS(R,this.serializeUrl(V),Z,te);r.next(He);const Be=wM(V,this.rootComponentType).snapshot;return Je(i={...p,targetSnapshot:Be,urlAfterRedirects:V,extras:{...le,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=p.rawUrl,p.resolve(null),Yu.E}),(0,Mi.b)(p=>{const _=new zL(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),(0,gt.U)(p=>i={...p,guards:_2(p.targetSnapshot,p.currentSnapshot,this.rootContexts)}),function N2(n,e){return(0,ji.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=t;return 0===c.length&&0===a.length?Je({...t,guardsResult:!0}):function A2(n,e,t,r){return(0,Qt.D)(n).pipe((0,ji.z)(i=>function P2(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?Je(a.map(p=>{const _=tw(e)??i,w=yy(p,_);return Af(function C2(n){return n&&iw(n.canDeactivate)}(w)?w.canDeactivate(n,e,t,r):_.runInContext(()=>w(n,e,t,r))).pipe(xa())})).pipe(vy()):Je(!0)}(i.component,i.route,t,e,r)),xa(i=>!0!==i,!0))}(c,r,i,n).pipe((0,ji.z)(p=>p&&function w2(n){return"boolean"==typeof n}(p)?function x2(n,e,t,r){return(0,Qt.D)(e).pipe(Dg(i=>to(function O2(n,e){return null!==n&&e&&e(new JL(n)),Je(!0)}(i.route.parent,r),function M2(n,e){return null!==n&&e&&e(new e2(n)),Je(!0)}(i.route,r),function k2(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(c=>function y2(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Kx(()=>Je(c.guards.map(_=>{const w=tw(c.node)??t,C=yy(_,w);return Af(function I2(n){return n&&iw(n.canActivateChild)}(C)?C.canActivateChild(r,n):w.runInContext(()=>C(r,n))).pipe(xa())})).pipe(vy())));return Je(a).pipe(vy())}(n,i.path,t),function R2(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Je(!0);const i=r.map(a=>Kx(()=>{const c=tw(e)??t,p=yy(a,c);return Af(function E2(n){return n&&iw(n.canActivate)}(p)?p.canActivate(e,n):c.runInContext(()=>p(e,n))).pipe(xa())}));return Je(i).pipe(vy())}(n,i.route,t))),xa(i=>!0!==i,!0))}(r,a,n,e):Je(p)),(0,gt.U)(p=>({...t,guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,Mi.b)(p=>{if(i.guardsResult=p.guardsResult,Cg(p.guardsResult))throw CM(0,p.guardsResult);const _=new qL(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(_)}),Bn(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,"",3),!1)),FS(p=>{if(p.guards.canActivateChecks.length)return Je(p).pipe((0,Mi.b)(_=>{const w=new KL(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}),hr(_=>{let w=!1;return Je(_).pipe(function nV(n,e){return(0,ji.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Je(t);let a=0;return(0,Qt.D)(i).pipe(Dg(c=>function rV(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!$M(i)&&(a[qb]=i.title),function iV(n,e,t,r){const i=function sV(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Je({});const a={};return(0,Qt.D)(i).pipe((0,ji.z)(c=>function oV(n,e,t,r){const i=tw(e)??r,a=yy(n,i);return Af(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[c],e,t,r).pipe(xa(),(0,Mi.b)(p=>{a[c]=p}))),fS(1),Jx(a),Nf(c=>RS(c)?Yu.E:zb(c)))}(a,n,e,r).pipe((0,gt.U)(c=>(n._resolvedData=c,n.data=DM(n,t).resolve,i&&$M(i)&&(n.data[qb]=i.title),null)))}(c.route,r,n,e)),(0,Mi.b)(()=>a++),fS(1),(0,ji.z)(c=>a===i.length?Je(t):Yu.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Mi.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(_),this.cancelNavigationTransition(_,"",2))}}))}),(0,Mi.b)(_=>{const w=new ZL(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}))}),FS(p=>{const _=w=>{const C=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&C.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,Mi.b)(A=>{w.component=A}),(0,gt.U)(()=>{})));for(const A of w.children)C.push(..._(A));return C};return UI(_(p.targetSnapshot.root)).pipe(Cd(),ci(1))}),FS(()=>this.afterPreactivation()),(0,gt.U)(p=>{const _=function o2(n,e,t){const r=Xb(n,e._root,t?t._root:void 0);return new bM(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return i={...p,targetRouterState:_}}),(0,Mi.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,gt.U)(r=>(new m2(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,Mi.b)({next(){a=!0},complete(){a=!0}}),pS(()=>{a||c||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Nf(p=>{if(c=!0,NM(p)){SM(p)||(this.navigated=!0,this.restoreHistory(i,!0));const _=new qI(i.id,this.serializeUrl(i.extractedUrl),p.message,p.cancellationCode);if(r.next(_),SM(p)){const w=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),C={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ZM(i.source)};this.scheduleNavigation(w,"imperative",null,C,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new _M(i.id,this.serializeUrl(i.extractedUrl),p,i.targetSnapshot??void 0);r.next(_);try{i.resolve(this.errorHandler(p))}catch(w){i.reject(w)}}return Yu.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(a){const p={...a};delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(i.state=p)}const c=this.parseUrl(t.url);this.scheduleNavigation(c,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(OS),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:p,preserveFragment:_}=r,w=i||this.routerState.root,C=_?this.currentUrlTree.fragment:c;let A=null;switch(p){case"merge":A={...this.currentUrlTree.queryParams,...a};break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=a||null}return null!==A&&(A=this.removeEmptyProps(A)),BL(w,this.currentUrlTree,t,A,C??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Cg(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function yV(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new d.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...gV}:!1===r?{...mV}:r,Cg(t))return rM(this.currentUrlTree,t,i);const a=this.parseUrl(t);return rM(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Tg(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,c){if(this.disposed)return Promise.resolve(!1);let p,_,w;c?(p=c.resolve,_=c.reject,w=c.promise):w=new Promise((R,V)=>{p=R,_=V});const C=++this.navigationId;let A;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),A=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):A=0,this.setTransition({id:C,targetPageId:A,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:p,reject:_,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(R=>Promise.reject(R))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const a=new qI(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:function(){return KM()},providedIn:"root"}),n})();function ZM(n){return"imperative"!==n}let s1=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new dr.x,this.subscription=t.events.subscribe(a=>{a instanceof Tg&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,d.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,d.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,d.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,c){return!!(0!==t||r||i||a||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36($i),d.Y36(Sg),d.Y36(ye))},n.\u0275dir=d.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&d.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&d.uIk("target",r.target)("href",r.href,d.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[d.TTD]}),n})();class YM{}let wV=(()=>{class n{constructor(t,r,i,a,c){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Bn(t=>t instanceof Tg),Dg(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,d.MMx)(a.providers,t,`Route: ${a.path}`));const c=a._injector??t,p=a._loadedInjector??c;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(c,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(p,a.children??a._loadedRoutes))}return(0,Qt.D)(i).pipe((0,Ji.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Je(null);const a=i.pipe((0,ji.z)(c=>null===c?Je(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,Qt.D)([a,c]).pipe((0,Ji.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG($i),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(YM),d.LFG(VS))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const US=new d.OlP("");let QM=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof DS?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Tg&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof yM&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new yM(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function by(n,e){return{\u0275kind:n,\u0275providers:e}}function HS(n){return[{provide:LS,multi:!0,useValue:n}]}function XM(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get($i),i=n.get(eO);1===n.get(jS)&&r.initialNavigation(),n.get(tO,null,d.XFs.Optional)?.setUpPreloading(),n.get(US,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const eO=new d.OlP("",{factory:()=>new dr.x}),jS=new d.OlP("",{providedIn:"root",factory:()=>1});const tO=new d.OlP("");function CV(n){return by(0,[{provide:tO,useExisting:wV},{provide:YM,useExisting:n}])}const nO=new d.OlP("ROUTER_FORROOT_GUARD"),TV=[Ne,{provide:aM,useClass:mS},{provide:$i,useFactory:KM},ew,{provide:Sg,useFactory:function JM(n){return n.routerState.root},deps:[$i]},VS];function SV(){return new d.PXZ("Router",$i)}let rO=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[TV,[],HS(t),{provide:nO,useFactory:MV,deps:[[$i,new d.FiY,new d.tp0]]},{provide:r1,useValue:r||{}},r?.useHash?{provide:ye,useClass:dt}:{provide:ye,useClass:it},{provide:US,useFactory:()=>{const n=(0,d.f3M)($i),e=(0,d.f3M)(Gl),t=(0,d.f3M)(r1);return t.scrollOffset&&e.setOffset(t.scrollOffset),new QM(n,e,t)}},r?.preloadingStrategy?CV(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:SV},r?.initialNavigation?OV(r):[],[{provide:iO,useFactory:XM},{provide:d.tb,multi:!0,useExisting:iO}]]}}static forChild(t){return{ngModule:n,providers:[HS(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(nO,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[xS]}),n})();function MV(n){return"guarded"}function OV(n){return["disabled"===n.initialNavigation?by(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)($i);return()=>{e.setUpLocationChangeListener()}}},{provide:jS,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?by(2,[{provide:jS,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(H,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(a=>{const c=e.get($i),p=e.get(eO);(function i(a){e.get($i).events.pipe(Bn(p=>p instanceof Tg||p instanceof qI||p instanceof _M),(0,gt.U)(p=>p instanceof Tg||p instanceof qI&&(0===p.code||1===p.code)&&null),Bn(p=>null!==p),ci(1)).subscribe(()=>{a()})})(()=>{a(!0),r=!0}),c.afterPreactivation=()=>(a(!0),r||p.closed?Je(void 0):p),c.initialNavigation()}))}}]).\u0275providers:[]]}const iO=new d.OlP(""),kV=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-home"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"home works!"),d.qZA())}}),n})()},{path:"products",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-products"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"products works!"),d.qZA())}}),n})()},{path:"shopping-cart",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-shopping-cart"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"shopping-cart works!"),d.qZA())}}),n})()},{path:"check-out",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-check-out"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"check-out works!"),d.qZA())}}),n})()},{path:"my-orders",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-my-orders"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"my-orders works!"),d.qZA())}}),n})()},{path:"order-success",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-order-success"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"order-success works!"),d.qZA())}}),n})()},{path:"login",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-login"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"login works!"),d.qZA())}}),n})()},{path:"admin/products",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-admin-products"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"admin-products works!"),d.qZA())}}),n})()},{path:"admin/orders",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-admin-orders"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"admin-orders works!"),d.qZA())}}),n})()}];let PV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[rO.forRoot(kV),rO]}),n})();var FV=P(1144);const LV=["addListener","removeListener"],VV=["addEventListener","removeEventListener"],BV=["on","off"];function Ls(n,e,t,r){if((0,Ni.m)(t)&&(r=t,t=void 0),r)return Ls(n,e,t).pipe(dS(r));const[i,a]=function jV(n){return(0,Ni.m)(n.addEventListener)&&(0,Ni.m)(n.removeEventListener)}(n)?VV.map(c=>p=>n[c](e,p,t)):function UV(n){return(0,Ni.m)(n.addListener)&&(0,Ni.m)(n.removeListener)}(n)?LV.map(sO(n,e)):function HV(n){return(0,Ni.m)(n.on)&&(0,Ni.m)(n.off)}(n)?BV.map(sO(n,e)):[];if(!i&&(0,FV.z)(n))return(0,ji.z)(c=>Ls(c,e,t))((0,Lo.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Tr.y(c=>{const p=(..._)=>c.next(1<_.length?_:_[0]);return i(p),()=>a(p)})}function sO(n,e){return t=>r=>n[t](e,r)}var GV=P(3532);function GS(n=0,e,t=bs.P){let r=-1;return null!=e&&((0,GV.K)(e)?t=e:r=e),new Tr.y(i=>{let a=function $V(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;a<0&&(a=0);let c=0;return t.schedule(function(){i.closed||(i.next(c++),0<=r?this.schedule(void 0,r):i.complete())},a)})}const{isArray:WV}=Array;function oO(n){return 1===n.length&&WV(n[0])?n[0]:n}function aO(...n){return 1===(n=oO(n)).length?(0,Lo.Xf)(n[0]):new Tr.y(function zV(n){return e=>{let t=[];for(let r=0;t&&!e.closed&&r<n.length;r++)t.push((0,Lo.Xf)(n[r]).subscribe((0,pn.x)(e,i=>{if(t){for(let a=0;a<t.length;a++)a!==r&&t[a].unsubscribe();t=null}e.next(i)})))}}(n))}var l1=P(4222);function u1(...n){const e=(0,Vn.jO)(n),t=oO(n);return t.length?new Tr.y(r=>{let i=t.map(()=>[]),a=t.map(()=>!1);r.add(()=>{i=a=null});for(let c=0;!r.closed&&c<t.length;c++)(0,Lo.Xf)(t[c]).subscribe((0,pn.x)(r,p=>{if(i[c].push(p),i.every(_=>_.length)){const _=i.map(w=>w.shift());r.next(e?e(..._):_),i.some((w,C)=>!w.length&&a[C])&&r.complete()}},()=>{a[c]=!0,!i[c].length&&r.complete()}));return()=>{i=a=null}}):Yu.E}function di(n){return(0,tr.e)((e,t)=>{(0,Lo.Xf)(n).subscribe((0,pn.x)(t,()=>t.complete(),l1.Z)),!t.closed&&e.subscribe(t)})}function $S(...n){const e=(0,Vn.jO)(n);return(0,tr.e)((t,r)=>{const i=n.length,a=new Array(i);let c=n.map(()=>!1),p=!1;for(let _=0;_<i;_++)(0,Lo.Xf)(n[_]).subscribe((0,pn.x)(r,w=>{a[_]=w,!p&&!c[_]&&(c[_]=!0,(p=c.every(li.y))&&(c=null))},l1.Z));t.subscribe((0,pn.x)(r,_=>{if(p){const w=[_,...a];r.next(e?e(...w):w)}}))})}function uO(n,e){return e?t=>to(e.pipe(ci(1),function KV(){return(0,tr.e)((n,e)=>{n.subscribe((0,pn.x)(e,l1.Z))})}()),t.pipe(uO(n))):(0,ji.z)((t,r)=>n(t,r).pipe(ci(1),Jx(t)))}new Tr.y(l1.Z);let XO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),YB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[XO]}),n})(),QB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[YB]}),n})();var XB={left:"right",right:"left",bottom:"top",top:"bottom"};function v1(n){return n.replace(/left|right|bottom|top/g,function(e){return XB[e]})}function nc(n){return n.split("-")[0]}var eU={start:"end",end:"start"};function _R(n){return n.replace(/start|end/g,function(e){return eU[e]})}var Bo="top",Rl="bottom",kl="right",Uo="left",dN="auto",cw=[Bo,Rl,kl,Uo],Dy="start",dw="end",yR="viewport",hw="popper",vR=cw.reduce(function(n,e){return n.concat([e+"-"+Dy,e+"-"+dw])},[]),bR=[].concat(cw,[dN]).reduce(function(n,e){return n.concat([e,e+"-"+Dy,e+"-"+dw])},[]),hU=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Oa(n){if(null==n)return window;if("[object Window]"!==n.toString()){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function xg(n){return n instanceof Oa(n).Element||n instanceof Element}function Ra(n){return n instanceof Oa(n).HTMLElement||n instanceof HTMLElement}function hN(n){return!(typeof ShadowRoot>"u")&&(n instanceof Oa(n).ShadowRoot||n instanceof ShadowRoot)}function Rf(n){return((xg(n)?n.ownerDocument:n.document)||window.document).documentElement}var Mg=Math.max,b1=Math.min,Ey=Math.round;function fN(){var n=navigator.userAgentData;return null!=n&&n.brands?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function wR(){return!/^((?!chrome|android).)*safari/i.test(fN())}function Iy(n,e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var r=n.getBoundingClientRect(),i=1,a=1;e&&Ra(n)&&(i=n.offsetWidth>0&&Ey(r.width)/n.offsetWidth||1,a=n.offsetHeight>0&&Ey(r.height)/n.offsetHeight||1);var p=(xg(n)?Oa(n):window).visualViewport,_=!wR()&&t,w=(r.left+(_&&p?p.offsetLeft:0))/i,C=(r.top+(_&&p?p.offsetTop:0))/a,A=r.width/i,R=r.height/a;return{width:A,height:R,top:C,right:w+A,bottom:C+R,left:w,x:w,y:C}}function pN(n){var e=Oa(n);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function gN(n){return Iy(Rf(n)).left+pN(n).scrollLeft}function xd(n){return Oa(n).getComputedStyle(n)}function rc(n){return n?(n.nodeName||"").toLowerCase():null}function w1(n){return"html"===rc(n)?n:n.assignedSlot||n.parentNode||(hN(n)?n.host:null)||Rf(n)}function mN(n){var e=xd(n);return/auto|scroll|overlay|hidden/.test(e.overflow+e.overflowY+e.overflowX)}function DR(n){return["html","body","#document"].indexOf(rc(n))>=0?n.ownerDocument.body:Ra(n)&&mN(n)?n:DR(w1(n))}function fw(n,e){var t;void 0===e&&(e=[]);var r=DR(n),i=r===(null==(t=n.ownerDocument)?void 0:t.body),a=Oa(r),c=i?[a].concat(a.visualViewport||[],mN(r)?r:[]):r,p=e.concat(c);return i?p:p.concat(fw(w1(c)))}function gU(n){return["table","td","th"].indexOf(rc(n))>=0}function ER(n){return Ra(n)&&"fixed"!==xd(n).position?n.offsetParent:null}function pw(n){for(var e=Oa(n),t=ER(n);t&&gU(t)&&"static"===xd(t).position;)t=ER(t);return t&&("html"===rc(t)||"body"===rc(t)&&"static"===xd(t).position)?e:t||function mU(n){var e=/firefox/i.test(fN());if(/Trident/i.test(fN())&&Ra(n)&&"fixed"===xd(n).position)return null;var i=w1(n);for(hN(i)&&(i=i.host);Ra(i)&&["html","body"].indexOf(rc(i))<0;){var a=xd(i);if("none"!==a.transform||"none"!==a.perspective||"paint"===a.contain||-1!==["transform","perspective"].indexOf(a.willChange)||e&&"filter"===a.willChange||e&&a.filter&&"none"!==a.filter)return i;i=i.parentNode}return null}(n)||e}function IR(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&hN(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function _N(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function CR(n,e,t){return e===yR?_N(function fU(n,e){var t=Oa(n),r=Rf(n),i=t.visualViewport,a=r.clientWidth,c=r.clientHeight,p=0,_=0;if(i){a=i.width,c=i.height;var w=wR();(w||!w&&"fixed"===e)&&(p=i.offsetLeft,_=i.offsetTop)}return{width:a,height:c,x:p+gN(n),y:_}}(n,t)):xg(e)?function _U(n,e){var t=Iy(n,!1,"fixed"===e);return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}(e,t):_N(function pU(n){var e,t=Rf(n),r=pN(n),i=null==(e=n.ownerDocument)?void 0:e.body,a=Mg(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),c=Mg(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),p=-r.scrollLeft+gN(n),_=-r.scrollTop;return"rtl"===xd(i||t).direction&&(p+=Mg(t.clientWidth,i?i.clientWidth:0)-a),{width:a,height:c,x:p,y:_}}(Rf(n)))}function Cy(n){return n.split("-")[1]}function yN(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function TR(n){var _,e=n.reference,t=n.element,r=n.placement,i=r?nc(r):null,a=r?Cy(r):null,c=e.x+e.width/2-t.width/2,p=e.y+e.height/2-t.height/2;switch(i){case Bo:_={x:c,y:e.y-t.height};break;case Rl:_={x:c,y:e.y+e.height};break;case kl:_={x:e.x+e.width,y:p};break;case Uo:_={x:e.x-t.width,y:p};break;default:_={x:e.x,y:e.y}}var w=i?yN(i):null;if(null!=w){var C="y"===w?"height":"width";switch(a){case Dy:_[w]=_[w]-(e[C]/2-t[C]/2);break;case dw:_[w]=_[w]+(e[C]/2-t[C]/2)}}return _}function NR(n){return Object.assign({},{top:0,right:0,bottom:0,left:0},n)}function AR(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}function vN(n,e){void 0===e&&(e={});var r=e.placement,i=void 0===r?n.placement:r,a=e.strategy,c=void 0===a?n.strategy:a,p=e.boundary,_=void 0===p?"clippingParents":p,w=e.rootBoundary,C=void 0===w?yR:w,A=e.elementContext,R=void 0===A?hw:A,V=e.altBoundary,Z=void 0!==V&&V,te=e.padding,le=void 0===te?0:te,He=NR("number"!=typeof le?le:AR(le,cw)),$e=n.rects.popper,Pe=n.elements[Z?R===hw?"reference":hw:R],Ge=function vU(n,e,t,r){var i="clippingParents"===e?function yU(n){var e=fw(w1(n)),r=["absolute","fixed"].indexOf(xd(n).position)>=0&&Ra(n)?pw(n):n;return xg(r)?e.filter(function(i){return xg(i)&&IR(i,r)&&"body"!==rc(i)}):[]}(n):[].concat(e),a=[].concat(i,[t]),p=a.reduce(function(_,w){var C=CR(n,w,r);return _.top=Mg(C.top,_.top),_.right=b1(C.right,_.right),_.bottom=b1(C.bottom,_.bottom),_.left=Mg(C.left,_.left),_},CR(n,a[0],r));return p.width=p.right-p.left,p.height=p.bottom-p.top,p.x=p.left,p.y=p.top,p}(xg(Pe)?Pe:Pe.contextElement||Rf(n.elements.popper),_,C,c),Ye=Iy(n.elements.reference),Pt=TR({reference:Ye,element:$e,strategy:"absolute",placement:i}),$t=_N(Object.assign({},$e,Pt)),Dr=R===hw?$t:Ye,fi={top:Ge.top-Dr.top+He.top,bottom:Dr.bottom-Ge.bottom+He.bottom,left:Ge.left-Dr.left+He.left,right:Dr.right-Ge.right+He.right},$r=n.modifiersData.offset;if(R===hw&&$r){var Fl=$r[i];Object.keys(fi).forEach(function(Us){var Lg=[kl,Rl].indexOf(Us)>=0?1:-1,Vg=[Bo,Rl].indexOf(Us)>=0?"y":"x";fi[Us]+=Fl[Vg]*Lg})}return fi}const EU={name:"flip",enabled:!0,phase:"main",fn:function DU(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var i=t.mainAxis,a=void 0===i||i,c=t.altAxis,p=void 0===c||c,_=t.fallbackPlacements,w=t.padding,C=t.boundary,A=t.rootBoundary,R=t.altBoundary,V=t.flipVariations,Z=void 0===V||V,te=t.allowedAutoPlacements,le=e.options.placement,He=nc(le),$e=_||(He!==le&&Z?function wU(n){if(nc(n)===dN)return[];var e=v1(n);return[_R(n),e,_R(e)]}(le):[v1(le)]),Pe=[le].concat($e).reduce(function(Ny,Pf){return Ny.concat(nc(Pf)===dN?function bU(n,e){void 0===e&&(e={});var i=e.boundary,a=e.rootBoundary,c=e.padding,p=e.flipVariations,_=e.allowedAutoPlacements,w=void 0===_?bR:_,C=Cy(e.placement),A=C?p?vR:vR.filter(function(Z){return Cy(Z)===C}):cw,R=A.filter(function(Z){return w.indexOf(Z)>=0});0===R.length&&(R=A);var V=R.reduce(function(Z,te){return Z[te]=vN(n,{placement:te,boundary:i,rootBoundary:a,padding:c})[nc(te)],Z},{});return Object.keys(V).sort(function(Z,te){return V[Z]-V[te]})}(e,{placement:Pf,boundary:C,rootBoundary:A,padding:w,flipVariations:Z,allowedAutoPlacements:te}):Pf)},[]),Ge=e.rects.reference,Ye=e.rects.popper,Pt=new Map,$t=!0,Dr=Pe[0],fi=0;fi<Pe.length;fi++){var $r=Pe[fi],Fl=nc($r),Us=Cy($r)===Dy,Lg=[Bo,Rl].indexOf(Fl)>=0,Vg=Lg?"width":"height",Ho=vN(e,{placement:$r,boundary:C,rootBoundary:A,altBoundary:R,padding:w}),Ll=Lg?Us?kl:Uo:Us?Rl:Bo;Ge[Vg]>Ye[Vg]&&(Ll=v1(Ll));var M1=v1(Ll),Bg=[];if(a&&Bg.push(Ho[Fl]<=0),p&&Bg.push(Ho[Ll]<=0,Ho[M1]<=0),Bg.every(function(Ny){return Ny})){Dr=$r,$t=!1;break}Pt.set($r,Bg)}if($t)for(var kN=function(Pf){var Ew=Pe.find(function(k1){var Ug=Pt.get(k1);if(Ug)return Ug.slice(0,Pf).every(function(PN){return PN})});if(Ew)return Dr=Ew,"break"},Dw=Z?3:1;Dw>0&&"break"!==kN(Dw);Dw--);e.placement!==Dr&&(e.modifiersData[r]._skip=!0,e.placement=Dr,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function gw(n,e,t){return Mg(n,b1(e,t))}function bN(n){var e=Iy(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}const SU={name:"preventOverflow",enabled:!0,phase:"main",fn:function TU(n){var e=n.state,t=n.options,r=n.name,i=t.mainAxis,a=void 0===i||i,c=t.altAxis,p=void 0!==c&&c,R=t.tether,V=void 0===R||R,Z=t.tetherOffset,te=void 0===Z?0:Z,le=vN(e,{boundary:t.boundary,rootBoundary:t.rootBoundary,padding:t.padding,altBoundary:t.altBoundary}),He=nc(e.placement),Be=Cy(e.placement),$e=!Be,Pe=yN(He),Ge=function IU(n){return"x"===n?"y":"x"}(Pe),Ye=e.modifiersData.popperOffsets,Pt=e.rects.reference,$t=e.rects.popper,Dr="function"==typeof te?te(Object.assign({},e.rects,{placement:e.placement})):te,fi="number"==typeof Dr?{mainAxis:Dr,altAxis:Dr}:Object.assign({mainAxis:0,altAxis:0},Dr),$r=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,Fl={x:0,y:0};if(Ye){if(a){var Us,Lg="y"===Pe?Bo:Uo,Vg="y"===Pe?Rl:kl,Ho="y"===Pe?"height":"width",Ll=Ye[Pe],M1=Ll+le[Lg],Bg=Ll-le[Vg],O1=V?-$t[Ho]/2:0,kN=Be===Dy?Pt[Ho]:$t[Ho],Dw=Be===Dy?-$t[Ho]:-Pt[Ho],R1=e.elements.arrow,Ny=V&&R1?bN(R1):{width:0,height:0},Pf=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Ew=Pf[Lg],k1=Pf[Vg],Ug=gw(0,Pt[Ho],Ny[Ho]),PN=$e?Pt[Ho]/2-O1-Ug-Ew-fi.mainAxis:kN-Ug-Ew-fi.mainAxis,LG=$e?-Pt[Ho]/2+O1+Ug+k1+fi.mainAxis:Dw+Ug+k1+fi.mainAxis,FN=e.elements.arrow&&pw(e.elements.arrow),Ak=null!=(Us=$r?.[Pe])?Us:0,UG=Ll+LG-Ak,xk=gw(V?b1(M1,Ll+PN-Ak-(FN?"y"===Pe?FN.clientTop||0:FN.clientLeft||0:0)):M1,Ll,V?Mg(Bg,UG):Bg);Ye[Pe]=xk,Fl[Pe]=xk-Ll}if(p){var Mk,Hg=Ye[Ge],P1="y"===Ge?"height":"width",Ok=Hg+le["x"===Pe?Bo:Uo],Rk=Hg-le["x"===Pe?Rl:kl],LN=-1!==[Bo,Uo].indexOf(He),kk=null!=(Mk=$r?.[Ge])?Mk:0,Pk=LN?Ok:Hg-Pt[P1]-$t[P1]-kk+fi.altAxis,Fk=LN?Hg+Pt[P1]+$t[P1]-kk-fi.altAxis:Rk,Lk=V&&LN?function CU(n,e,t){var r=gw(n,e,t);return r>t?t:r}(Pk,Hg,Fk):gw(V?Pk:Ok,Hg,V?Fk:Rk);Ye[Ge]=Lk,Fl[Ge]=Lk-Hg}e.modifiersData[r]=Fl}},requiresIfExists:["offset"]},MU={name:"arrow",enabled:!0,phase:"main",fn:function AU(n){var e,t=n.state,r=n.name,i=n.options,a=t.elements.arrow,c=t.modifiersData.popperOffsets,p=nc(t.placement),_=yN(p),C=[Uo,kl].indexOf(p)>=0?"height":"width";if(a&&c){var A=function(e,t){return NR("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:AR(e,cw))}(i.padding,t),R=bN(a),V="y"===_?Bo:Uo,Z="y"===_?Rl:kl,te=t.rects.reference[C]+t.rects.reference[_]-c[_]-t.rects.popper[C],le=c[_]-t.rects.reference[_],He=pw(a),Be=He?"y"===_?He.clientHeight||0:He.clientWidth||0:0,Ye=Be/2-R[C]/2+(te/2-le/2),Pt=gw(A[V],Ye,Be-R[C]-A[Z]);t.modifiersData[r]=((e={})[_]=Pt,e.centerOffset=Pt-Ye,e)}},effect:function xU(n){var e=n.state,r=n.options.element,i=void 0===r?"[data-popper-arrow]":r;null!=i&&("string"==typeof i&&!(i=e.elements.popper.querySelector(i))||!IR(e.elements.popper,i)||(e.elements.arrow=i))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function PU(n,e,t){void 0===t&&(t=!1);var r=Ra(e),i=Ra(e)&&function kU(n){var e=n.getBoundingClientRect(),t=Ey(e.width)/n.offsetWidth||1,r=Ey(e.height)/n.offsetHeight||1;return 1!==t||1!==r}(e),a=Rf(e),c=Iy(n,i,t),p={scrollLeft:0,scrollTop:0},_={x:0,y:0};return(r||!r&&!t)&&(("body"!==rc(e)||mN(a))&&(p=function RU(n){return n!==Oa(n)&&Ra(n)?function OU(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}(n):pN(n)}(e)),Ra(e)?((_=Iy(e,!0)).x+=e.clientLeft,_.y+=e.clientTop):a&&(_.x=gN(a))),{x:c.left+p.scrollLeft-_.x,y:c.top+p.scrollTop-_.y,width:c.width,height:c.height}}function FU(n){var e=new Map,t=new Set,r=[];function i(a){t.add(a.name),[].concat(a.requires||[],a.requiresIfExists||[]).forEach(function(p){if(!t.has(p)){var _=e.get(p);_&&i(_)}}),r.push(a)}return n.forEach(function(a){e.set(a.name,a)}),n.forEach(function(a){t.has(a.name)||i(a)}),r}function VU(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}var xR={placement:"bottom",modifiers:[],strategy:"absolute"};function MR(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&"function"==typeof r.getBoundingClientRect)})}function UU(n){void 0===n&&(n={});var t=n.defaultModifiers,r=void 0===t?[]:t,i=n.defaultOptions,a=void 0===i?xR:i;return function(p,_,w){void 0===w&&(w=a);var C={placement:"bottom",orderedModifiers:[],options:Object.assign({},xR,a),modifiersData:{},elements:{reference:p,popper:_},attributes:{},styles:{}},A=[],R=!1,V={state:C,setOptions:function(He){var Be="function"==typeof He?He(C.options):He;te(),C.options=Object.assign({},a,C.options,Be),C.scrollParents={reference:xg(p)?fw(p):p.contextElement?fw(p.contextElement):[],popper:fw(_)};var $e=function LU(n){var e=FU(n);return hU.reduce(function(t,r){return t.concat(e.filter(function(i){return i.phase===r}))},[])}(function BU(n){var e=n.reduce(function(t,r){var i=t[r.name];return t[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}([].concat(r,C.options.modifiers)));return C.orderedModifiers=$e.filter(function($r){return $r.enabled}),function Z(){C.orderedModifiers.forEach(function(le){var Be=le.options,Pe=le.effect;if("function"==typeof Pe){var Ge=Pe({state:C,name:le.name,instance:V,options:void 0===Be?{}:Be});A.push(Ge||function(){})}})}(),V.update()},forceUpdate:function(){if(!R){var He=C.elements,Be=He.reference,$e=He.popper;if(MR(Be,$e)){C.rects={reference:PU(Be,pw($e),"fixed"===C.options.strategy),popper:bN($e)},C.reset=!1,C.placement=C.options.placement,C.orderedModifiers.forEach(function($r){return C.modifiersData[$r.name]=Object.assign({},$r.data)});for(var Ge=0;Ge<C.orderedModifiers.length;Ge++)if(!0!==C.reset){var Ye=C.orderedModifiers[Ge],Pt=Ye.fn,$t=Ye.options;"function"==typeof Pt&&(C=Pt({state:C,options:void 0===$t?{}:$t,name:Ye.name,instance:V})||C)}else C.reset=!1,Ge=-1}}},update:VU(function(){return new Promise(function(le){V.forceUpdate(),le(C)})}),destroy:function(){te(),R=!0}};if(!MR(p,_))return V;function te(){A.forEach(function(le){return le()}),A=[]}return V.setOptions(w).then(function(le){!R&&w.onFirstUpdate&&w.onFirstUpdate(le)}),V}}var D1={passive:!0};const jU={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function HU(n){var e=n.state,t=n.instance,r=n.options,i=r.scroll,a=void 0===i||i,c=r.resize,p=void 0===c||c,_=Oa(e.elements.popper),w=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&w.forEach(function(C){C.addEventListener("scroll",t.update,D1)}),p&&_.addEventListener("resize",t.update,D1),function(){a&&w.forEach(function(C){C.removeEventListener("scroll",t.update,D1)}),p&&_.removeEventListener("resize",t.update,D1)}},data:{}},$U={name:"popperOffsets",enabled:!0,phase:"read",fn:function GU(n){var e=n.state;e.modifiersData[n.name]=TR({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}};var WU={top:"auto",right:"auto",bottom:"auto",left:"auto"};function OR(n){var e,t=n.popper,r=n.popperRect,i=n.placement,a=n.variation,c=n.offsets,p=n.position,_=n.gpuAcceleration,w=n.adaptive,C=n.roundOffsets,A=n.isFixed,R=c.x,V=void 0===R?0:R,Z=c.y,te=void 0===Z?0:Z,le="function"==typeof C?C({x:V,y:te}):{x:V,y:te};V=le.x,te=le.y;var He=c.hasOwnProperty("x"),Be=c.hasOwnProperty("y"),$e=Uo,Pe=Bo,Ge=window;if(w){var Ye=pw(t),Pt="clientHeight",$t="clientWidth";Ye===Oa(t)&&"static"!==xd(Ye=Rf(t)).position&&"absolute"===p&&(Pt="scrollHeight",$t="scrollWidth"),(i===Bo||(i===Uo||i===kl)&&a===dw)&&(Pe=Rl,te-=(A&&Ye===Ge&&Ge.visualViewport?Ge.visualViewport.height:Ye[Pt])-r.height,te*=_?1:-1),i!==Uo&&(i!==Bo&&i!==Rl||a!==dw)||($e=kl,V-=(A&&Ye===Ge&&Ge.visualViewport?Ge.visualViewport.width:Ye[$t])-r.width,V*=_?1:-1)}var Us,$r=Object.assign({position:p},w&&WU),Fl=!0===C?function zU(n){var t=n.y,i=window.devicePixelRatio||1;return{x:Ey(n.x*i)/i||0,y:Ey(t*i)/i||0}}({x:V,y:te}):{x:V,y:te};return V=Fl.x,te=Fl.y,Object.assign({},$r,_?((Us={})[Pe]=Be?"0":"",Us[$e]=He?"0":"",Us.transform=(Ge.devicePixelRatio||1)<=1?"translate("+V+"px, "+te+"px)":"translate3d("+V+"px, "+te+"px, 0)",Us):((e={})[Pe]=Be?te+"px":"",e[$e]=He?V+"px":"",e.transform="",e))}const KU={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function qU(n){var e=n.state,t=n.options,r=t.gpuAcceleration,i=void 0===r||r,a=t.adaptive,c=void 0===a||a,p=t.roundOffsets,_=void 0===p||p,C={placement:nc(e.placement),variation:Cy(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,OR(Object.assign({},C,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:c,roundOffsets:_})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,OR(Object.assign({},C,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:_})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var QU=[jU,$U,KU,{name:"applyStyles",enabled:!0,phase:"write",fn:function ZU(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},i=e.attributes[t]||{},a=e.elements[t];!Ra(a)||!rc(a)||(Object.assign(a.style,r),Object.keys(i).forEach(function(c){var p=i[c];!1===p?a.removeAttribute(c):a.setAttribute(c,!0===p?"":p)}))})},effect:function YU(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],a=e.attributes[r]||{},p=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]).reduce(function(_,w){return _[w]="",_},{});!Ra(i)||!rc(i)||(Object.assign(i.style,p),Object.keys(a).forEach(function(_){i.removeAttribute(_)}))})}},requires:["computeStyles"]}],JU=UU({defaultModifiers:QU});const tH={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function eH(n){var e=n.state,r=n.name,i=n.options.offset,a=void 0===i?[0,0]:i,c=bR.reduce(function(C,A){return C[A]=function XU(n,e,t){var r=nc(n),i=[Uo,Bo].indexOf(r)>=0?-1:1,a="function"==typeof t?t(Object.assign({},e,{placement:n})):t,c=a[0],p=a[1];return c=c||0,p=(p||0)*i,[Uo,kl].indexOf(r)>=0?{x:p,y:c}:{x:c,y:p}}(A,e.rects,a),C},{}),p=c[e.placement],w=p.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=p.x,e.modifiersData.popperOffsets.y+=w),e.modifiersData[r]=c}},uH=["*"],SH=["dialog"];function DN(n){return"string"==typeof n}function Og(n){return null!=n}function Ty(n){return(n||document.body).getBoundingClientRect()}const kR={animation:!0,transitionTimerDelayMs:5},wj=()=>{},{transitionTimerDelayMs:Dj}=kR,mw=new Map,Bs=(n,e,t,r)=>{let i=r.context||{};const a=mw.get(e);if(a)switch(r.runningTransition){case"continue":return Yu.E;case"stop":n.run(()=>a.transition$.complete()),i=Object.assign(a.context,i),mw.delete(e)}const c=t(e,r.animation,i)||wj;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return n.run(()=>c()),Je(void 0).pipe(function vj(n){return e=>new Tr.y(t=>e.subscribe({next:c=>n.run(()=>t.next(c)),error:c=>n.run(()=>t.error(c)),complete:()=>n.run(()=>t.complete())}))}(n));const p=new dr.x,_=new dr.x,w=p.pipe(function qV(...n){return e=>to(e,Je(...n))}(!0));mw.set(e,{transition$:p,complete:()=>{_.next(),_.complete()},context:i});const C=function bj(n){const{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(e)+parseFloat(t))}(e);return n.runOutsideAngular(()=>{const A=Ls(e,"transitionend").pipe(di(w),Bn(({target:V})=>V===e));aO(GS(C+Dj).pipe(di(w)),A,_).pipe(di(w)).subscribe(()=>{mw.delete(e),n.run(()=>{c(),p.next(),p.complete()})})}),p.asObservable()};let I1=(()=>{class n{constructor(){this.animation=kR.animation}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),UR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[mr]}),n})(),HR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[mr]}),n})(),$R=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[mr]}),n})(),WR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();var hi=(()=>(function(n){n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown"}(hi||(hi={})),hi))();const T1=(n,e)=>!!e&&e.some(t=>t.contains(n)),zR=(n,e)=>!e||null!=function yj(n,e){return!e||typeof n.closest>"u"?null:n.closest(e)}(n,e),Bj=typeof navigator<"u"&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));function Hj(n,e,t,r,i,a,c,p){t&&n.runOutsideAngular((n=>Bj?()=>setTimeout(()=>n(),100):n)(()=>{const w=Ls(e,"keydown").pipe(di(i),Bn(R=>R.which===hi.Escape),(0,Mi.b)(R=>R.preventDefault())),C=Ls(e,"mousedown").pipe((0,gt.U)(R=>{const V=R.target;return 2!==R.button&&!T1(V,c)&&("inside"===t?T1(V,a)&&zR(V,p):"outside"===t?!T1(V,a):zR(V,p)||!T1(V,a))}),di(i)),A=Ls(e,"mouseup").pipe($S(C),Bn(([R,V])=>V),function ZV(n,e=bs.z){const t=GS(n,e);return uO(()=>t)}(0),di(i));aO([w.pipe((0,gt.U)(R=>0)),A.pipe((0,gt.U)(R=>1))]).subscribe(R=>n.run(()=>r(R)))}))}const qR=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function KR(n){const e=Array.from(n.querySelectorAll(qR)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}const Gj=/\s+/,$j=/  +/gi,Wj=/^start/,zj=/^end/,qj=/-(top|left)$/,Kj=/-(bottom|right)$/,Yj=/^left/,Qj=/^right/,Jj=/^start/,Xj=/^end/;function ZR({placement:n,baseClass:e}){let t=Array.isArray(n)?n:n.split(Gj),i=t.findIndex(_=>"auto"===_);i>=0&&["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"].forEach(function(_){null==t.find(w=>-1!==w.search("^"+_))&&t.splice(i++,1,_)});const a=t.map(_=>function Zj(n){return n.replace(Wj,"left").replace(zj,"right").replace(qj,"-start").replace(Kj,"-end")}(_));return{placement:a.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!e,phase:"write",fn({state:_}){const w=new RegExp(e+"(-[a-z]+)*","gi"),C=_.elements.popper,A=_.placement;let R=C.className;R=R.replace(w,""),R+=` ${function eG(n,e){let[t,r]=e.split("-");const i=t.replace(Yj,"start").replace(Qj,"end");let a=[i];if(r){let c=r;("left"===t||"right"===t)&&(c=c.replace(Jj,"top").replace(Xj,"bottom")),a.push(`${i}-${c}`)}return n&&(a=a.map(c=>`${n}-${c}`)),a.join(" ")}(e,A)}`,R=R.trim().replace($j," "),C.className=R}},EU,SU,MU,{enabled:!0,name:"flip",options:{fallbackPlacements:a}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function YR(n){return n}function nG(n){return e=>(e.modifiers.push(tH,{name:"offset",options:{offset:()=>n}}),e)}new Date(1882,10,12),new Date(2174,10,25);let nk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[mr,QB]}),n})(),dG=(()=>{class n{constructor(){this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),AN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["",8,"navbar"]]}),n})(),rk=(()=>{class n{constructor(t,r){this.elementRef=t,this._renderer=r,this._disabled=!1}set disabled(t){this._disabled=""===t||!0===t,this._renderer.setProperty(this.elementRef.nativeElement,"disabled",this._disabled)}get disabled(){return this._disabled}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:3,hostBindings:function(t,r){2&t&&(d.Ikx("tabIndex",r.disabled?-1:0),d.ekj("disabled",r.disabled))},inputs:{disabled:"disabled"}}),n})(),xN=(()=>{class n{constructor(t,r){this.dropdown=t,this.placement="bottom",this.isOpen=!1,this.nativeElement=r.nativeElement}}return n.\u0275fac=function(t){return new(t||n)(d.Y36((0,d.Gpc)(()=>bw)),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(t,r,i){if(1&t&&d.Suo(i,rk,4),2&t){let a;d.iGM(a=d.CRH())&&(r.menuItems=a)}},hostVars:4,hostBindings:function(t,r){1&t&&d.NdJ("keydown.ArrowUp",function(a){return r.dropdown.onKeyDown(a)})("keydown.ArrowDown",function(a){return r.dropdown.onKeyDown(a)})("keydown.Home",function(a){return r.dropdown.onKeyDown(a)})("keydown.End",function(a){return r.dropdown.onKeyDown(a)})("keydown.Enter",function(a){return r.dropdown.onKeyDown(a)})("keydown.Space",function(a){return r.dropdown.onKeyDown(a)})("keydown.Tab",function(a){return r.dropdown.onKeyDown(a)})("keydown.Shift.Tab",function(a){return r.dropdown.onKeyDown(a)}),2&t&&d.ekj("dropdown-menu",!0)("show",r.dropdown.isOpen())}}),n})(),x1=(()=>{class n{constructor(t,r){this.dropdown=t,this.nativeElement=r.nativeElement}}return n.\u0275fac=function(t){return new(t||n)(d.Y36((0,d.Gpc)(()=>bw)),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("aria-expanded",r.dropdown.isOpen())}}),n})(),ik=(()=>{class n extends x1{constructor(t,r){super(t,r)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36((0,d.Gpc)(()=>bw)),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(t,r){1&t&&d.NdJ("click",function(){return r.dropdown.toggle()})("keydown.ArrowUp",function(a){return r.dropdown.onKeyDown(a)})("keydown.ArrowDown",function(a){return r.dropdown.onKeyDown(a)})("keydown.Home",function(a){return r.dropdown.onKeyDown(a)})("keydown.End",function(a){return r.dropdown.onKeyDown(a)})("keydown.Tab",function(a){return r.dropdown.onKeyDown(a)})("keydown.Shift.Tab",function(a){return r.dropdown.onKeyDown(a)}),2&t&&d.uIk("aria-expanded",r.dropdown.isOpen())},features:[d._Bn([{provide:x1,useExisting:(0,d.Gpc)(()=>n)}]),d.qOj]}),n})(),bw=(()=>{class n{constructor(t,r,i,a,c,p,_){this._changeDetector=t,this._document=i,this._ngZone=a,this._elementRef=c,this._renderer=p,this._destroyCloseHandlers$=new dr.x,this._bodyContainer=null,this._positioning=function tG(){let n=null;return{createPopper(e){if(!n){let r=(e.updatePopperOptions||YR)(ZR(e));n=JU(e.hostElement,e.targetElement,r)}},update(){n&&n.update()},setOptions(e){if(n){let r=(e.updatePopperOptions||YR)(ZR(e));n.setOptions(r)}},destroy(){n&&(n.destroy(),n=null)}}}(),this._open=!1,this.openChange=new d.vpe,this.placement=r.placement,this.container=r.container,this.autoClose=r.autoClose,this.display=_?"static":"dynamic"}ngAfterContentInit(){this._ngZone.onStable.pipe(ci(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(t){if(t.container&&this._open&&this._applyContainer(this.container),t.placement&&!t.placement.firstChange&&(this._positioning.setOptions({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()),t.dropdownClass){const{currentValue:r,previousValue:i}=t.dropdownClass;this._applyCustomDropdownClass(r,i)}t.autoClose&&this._open&&(this.autoClose=t.autoClose.currentValue,this._setCloseHandlers())}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&(this._anchor.nativeElement.focus(),"dynamic"===this.display&&this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container,updatePopperOptions:nG([0,2])}),this._applyPlacementClasses(),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positionMenu())})))}_setCloseHandlers(){this._destroyCloseHandlers$.next(),Hj(this._ngZone,this._document,this.autoClose,t=>{this.close(),0===t&&this._anchor.nativeElement.focus()},this._destroyCloseHandlers$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._resetContainer(),this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this._destroyCloseHandlers$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this.close()}onKeyDown(t){const r=t.which,i=this._getMenuElements();let a=-1,c=null;const p=this._isEventFromToggle(t);if(!p&&i.length&&i.forEach((_,w)=>{_.contains(t.target)&&(c=_),_===this._document.activeElement&&(a=w)}),r!==hi.Space&&r!==hi.Enter){if(r!==hi.Tab){if(p||c){if(this.open(),i.length){switch(r){case hi.ArrowDown:a=Math.min(a+1,i.length-1);break;case hi.ArrowUp:if(this._isDropup()&&-1===a){a=i.length-1;break}a=Math.max(a-1,0);break;case hi.Home:a=0;break;case hi.End:a=i.length-1}i[a].focus()}t.preventDefault()}}else if(t.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===t.target)return void("body"!==this.container||t.shiftKey?t.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const _=this._menu.nativeElement.querySelectorAll(qR);t.shiftKey&&t.target===_[0]?(this._anchor.nativeElement.focus(),t.preventDefault()):!t.shiftKey&&t.target===_[_.length-1]&&(this._anchor.nativeElement.focus(),this.close())}else Ls(t.target,"focusout").pipe(ci(1)).subscribe(({relatedTarget:_})=>{this._elementRef.nativeElement.contains(_)||this.close()})}}else c&&(!0===this.autoClose||"inside"===this.autoClose)&&Ls(c,"click").pipe(ci(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(t){return this._anchor.nativeElement.contains(t.target)}_getMenuElements(){const t=this._menu;return null==t?[]:t.menuItems.filter(r=>!r.disabled).map(r=>r.elementRef.nativeElement)}_positionMenu(){const t=this._menu;this.isOpen()&&t&&("dynamic"===this.display?(this._positioning.update(),this._applyPlacementClasses()):this._applyPlacementClasses(this._getFirstPlacement(this.placement)))}_getFirstPlacement(t){return Array.isArray(t)?t[0]:t.split(" ")[0]}_resetContainer(){const t=this._renderer;this._menu&&t.appendChild(this._elementRef.nativeElement,this._menu.nativeElement),this._bodyContainer&&(t.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(t=null){if(this._resetContainer(),"body"===t){const r=this._renderer,i=this._menu.nativeElement,a=this._bodyContainer=this._bodyContainer||r.createElement("div");r.setStyle(a,"position","absolute"),r.setStyle(i,"position","static"),r.setStyle(a,"z-index","1055"),r.appendChild(a,i),r.appendChild(this._document.body,a)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(t,r){const i="body"===this.container?this._bodyContainer:this._elementRef.nativeElement;i&&(r&&this._renderer.removeClass(i,r),t&&this._renderer.addClass(i,t))}_applyPlacementClasses(t){const r=this._menu;if(r){t||(t=this._getFirstPlacement(this.placement));const i=this._renderer,a=this._elementRef.nativeElement;i.removeClass(a,"dropup"),i.removeClass(a,"dropdown");const{nativeElement:c}=r;"static"===this.display?(r.placement=null,i.setAttribute(c,"data-bs-popper","static")):(r.placement=t,i.removeAttribute(c,"data-bs-popper"));const p=-1!==t.search("^top")?"dropup":"dropdown";i.addClass(a,p);const _=this._bodyContainer;_&&(i.removeClass(_,"dropup"),i.removeClass(_,"dropdown"),i.addClass(_,p))}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.sBO),d.Y36(dG),d.Y36(ce),d.Y36(d.R0b),d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(AN,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngbDropdown",""]],contentQueries:function(t,r,i){if(1&t&&(d.Suo(i,xN,5),d.Suo(i,x1,5)),2&t){let a;d.iGM(a=d.CRH())&&(r._menu=a.first),d.iGM(a=d.CRH())&&(r._anchor=a.first)}},hostVars:2,hostBindings:function(t,r){2&t&&d.ekj("show",r.isOpen())},inputs:{autoClose:"autoClose",dropdownClass:"dropdownClass",_open:["open","_open"],placement:"placement",container:"container",display:"display"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[d.TTD]}),n})(),sk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();class Fg{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}}let hG=(()=>{class n{constructor(t,r){this._el=t,this._zone=r}ngOnInit(){this._zone.onStable.asObservable().pipe(ci(1)).subscribe(()=>{Bs(this._zone,this._el.nativeElement,(t,r)=>{r&&Ty(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Bs(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.R0b))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(t,r){2&t&&(d.Tol("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),d.ekj("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})();class ok{close(e){}dismiss(e){}}class fG{constructor(e,t,r,i){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new dr.x,this._dismissed=new dr.x,this._hidden=new dr.x,e.instance.dismissEvent.subscribe(a=>{this.dismiss(a)}),this.result=new Promise((a,c)=>{this._resolve=a,this._reject=c}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(di(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(di(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function RR(n){return n&&n.then}(t)?!1!==t&&this._dismiss(e):t.then(r=>{!1!==r&&this._dismiss(e)},()=>{})}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Je(void 0);e.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),u1(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var ww=(()=>(function(n){n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC"}(ww||(ww={})),ww))();let pG=(()=>{class n{constructor(t,r,i){this._document=t,this._elRef=r,this._zone=i,this._closed$=new dr.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new d.vpe,this.shown=new dr.x,this.hidden=new dr.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":DN(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(ci(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,r={animation:this.animation,runningTransition:"stop"},c=u1(Bs(this._zone,t,()=>t.classList.remove("show"),r),Bs(this._zone,this._dialogEl.nativeElement,()=>{},r));return c.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),c}_show(){const t={animation:this.animation,runningTransition:"continue"};u1(Bs(this._zone,this._elRef.nativeElement,(a,c)=>{c&&Ty(a),a.classList.add("show")},t),Bs(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{Ls(t,"keydown").pipe(di(this._closed$),Bn(i=>i.which===hi.Escape)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(ww.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;Ls(this._dialogEl.nativeElement,"mousedown").pipe(di(this._closed$),(0,Mi.b)(()=>r=!1),hr(()=>Ls(t,"mouseup").pipe(di(this._closed$),ci(1))),Bn(({target:i})=>t===i)).subscribe(()=>{r=!0}),Ls(t,"click").pipe(di(this._closed$)).subscribe(({target:i})=>{t===i&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(ww.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const r=t.querySelector("[ngbAutofocus]"),i=KR(t)[0];(r||i||t).focus()}}_restoreFocus(){const t=this._document.body,r=this._elWithFocus;let i;i=r&&r.focus&&t.contains(r)?r:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Bs(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ce),d.Y36(d.SBq),d.Y36(d.R0b))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(t,r){if(1&t&&d.Gf(SH,7),2&t){let i;d.iGM(i=d.CRH())&&(r._dialogEl=i.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,r){2&t&&(d.uIk("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),d.Tol("modal d-block"+(r.windowClass?" "+r.windowClass:"")),d.ekj("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:uH,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,r){1&t&&(d.F$t(),d.TgZ(0,"div",0,1)(2,"div",2),d.Hsn(3),d.qZA()()),2&t&&d.Tol("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),n})(),gG=(()=>{class n{constructor(t){this._document=t}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,i=r.style,{overflow:a,paddingRight:c}=i;if(t>0){const p=parseFloat(window.getComputedStyle(r).paddingRight);i.paddingRight=`${p+t}px`}return i.overflow="hidden",()=>{t>0&&(i.paddingRight=c),i.overflow=a}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),mG=(()=>{class n{constructor(t,r,i,a,c,p){this._applicationRef=t,this._injector=r,this._document=i,this._scrollBar=a,this._rendererFactory=c,this._ngZone=p,this._activeWindowCmptHasChanged=new dr.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new d.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const _=this._windowCmpts[this._windowCmpts.length-1];((n,e,t,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const i=Ls(e,"focusin").pipe(di(t),(0,gt.U)(a=>a.target));Ls(e,"keydown").pipe(di(t),Bn(a=>a.which===hi.Tab),$S(i)).subscribe(([a,c])=>{const[p,_]=KR(e);(c===p||c===e)&&a.shiftKey&&(_.focus(),a.preventDefault()),c===_&&!a.shiftKey&&(p.focus(),a.preventDefault())}),r&&Ls(e,"click").pipe(di(t),$S(i),(0,gt.U)(a=>a[1])).subscribe(a=>a.focus())})})(0,_.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(_.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,r,i){const a=i.container instanceof HTMLElement?i.container:Og(i.container)?this._document.querySelector(i.container):this._document.body,c=this._rendererFactory.createRenderer(null,null);if(!a)throw new Error(`The specified modal container "${i.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const p=new ok,_=this._getContentRef(i.injector||t,r,p,i);let w=!1!==i.backdrop?this._attachBackdrop(a):void 0,C=this._attachWindowComponent(a,_.nodes),A=new fG(C,_,w,i.beforeDismiss);return this._registerModalRef(A),this._registerWindowCmpt(C),A.hidden.pipe(ci(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(c.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),p.close=R=>{A.close(R)},p.dismiss=R=>{A.dismiss(R)},this._applyWindowOptions(C.instance,i),1===this._modalRefs.length&&c.addClass(this._document.body,"modal-open"),w&&w.instance&&(this._applyBackdropOptions(w.instance,i),w.changeDetectorRef.detectChanges()),C.changeDetectorRef.detectChanges(),A}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(r=>r.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t){let r=(0,d.LMc)(hG,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(r.hostView),t.appendChild(r.location.nativeElement),r}_attachWindowComponent(t,r){let i=(0,d.LMc)(pG,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:r});return this._applicationRef.attachView(i.hostView),t.appendChild(i.location.nativeElement),i}_applyWindowOptions(t,r){this._windowAttributes.forEach(i=>{Og(r[i])&&(t[i]=r[i])})}_applyBackdropOptions(t,r){this._backdropAttributes.forEach(i=>{Og(r[i])&&(t[i]=r[i])})}_getContentRef(t,r,i,a){return r?r instanceof d.Rgc?this._createFromTemplateRef(r,i):DN(r)?this._createFromString(r):this._createFromComponent(t,r,i,a):new Fg([])}_createFromTemplateRef(t,r){const a=t.createEmbeddedView({$implicit:r,close(c){r.close(c)},dismiss(c){r.dismiss(c)}});return this._applicationRef.attachView(a),new Fg([a.rootNodes],a)}_createFromString(t){const r=this._document.createTextNode(`${t}`);return new Fg([[r]])}_createFromComponent(t,r,i,a){const c=d.zs3.create({providers:[{provide:ok,useValue:i}],parent:t}),p=(0,d.LMc)(r,{environmentInjector:this._applicationRef.injector,elementInjector:c}),_=p.location.nativeElement;return a.scrollable&&_.classList.add("component-host-scrollable"),this._applicationRef.attachView(p.hostView),new Fg([[_]],p.hostView,p)}_setAriaHidden(t){const r=t.parentElement;r&&t!==this._document.body&&(Array.from(r.children).forEach(i=>{i!==t&&"SCRIPT"!==i.nodeName&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,r)=>{t?r.setAttribute("aria-hidden",t):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const r=()=>{const i=this._modalRefs.indexOf(t);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(r,r)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const r=this._windowCmpts.indexOf(t);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.z2F),d.LFG(d.zs3),d.LFG(ce),d.LFG(gG),d.LFG(d.FYo),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_G=(()=>{class n{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(I1))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yG=(()=>{class n{constructor(t,r,i){this._injector=t,this._modalStack=r,this._config=i}open(t,r={}){const i={...this._config,animation:this._config.animation,...r};return this._modalStack.open(this._injector,t,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3),d.LFG(mG),d.LFG(_G))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ak=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[yG]}),n})(),dk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[mr]}),n})(),vk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[mr]}),n})(),wk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[mr]}),n})(),Dk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[mr]}),n})(),Ek=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[mr]}),n})(),Ik=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[mr]}),n})(),Ck=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[mr]}),n})(),Tk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();new d.OlP("live announcer delay",{providedIn:"root",factory:function MG(){return 100}});let Sk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[mr]}),n})(),Nk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const OG=[UR,HR,$R,WR,nk,sk,ak,dk,Nk,vk,wk,Dk,Ek,Ik,Ck,Tk,Sk];let RG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[OG,UR,HR,$R,WR,nk,sk,ak,dk,Nk,vk,wk,Dk,Ek,Ik,Ck,Tk,Sk]}),n})(),kG=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["bs-navbar"]],decls:22,vars:0,consts:[[1,"navbar","navbar-expand-md","navbar-light","bg-light","fixed-top"],["routerLink","/",1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarsExampleDefault","aria-controls","navbarsExampleDefault","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarsExampleDefault",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto"],[1,"nav-item"],["routerLink","/shopping-cart",1,"nav-link"],["ngbDropdown","",1,"nav-item","dropdown"],["ngbDropdownToggle","","id","dropdown01","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"nav-link","dropdown-toggle"],["ngbDropdownMenu","","aria-labelledby","dropdown01",1,"dropdown-menu"],["routerLink","/my-orders",1,"dropdown-item"],["routerLink","admin/orders",1,"dropdown-item"],["routerLink","admin/products",1,"dropdown-item"],[1,"dropdown-item"]],template:function(t,r){1&t&&(d.TgZ(0,"nav",0)(1,"a",1),d._uU(2,"Oshop"),d.qZA(),d.TgZ(3,"button",2),d._UZ(4,"span",3),d.qZA(),d.TgZ(5,"div",4)(6,"ul",5)(7,"li",6)(8,"a",7),d._uU(9,"Shopping Cart"),d.qZA()(),d.TgZ(10,"li",8)(11,"a",9),d._uU(12,"Username"),d.qZA(),d.TgZ(13,"div",10)(14,"a",11),d._uU(15,"My orders"),d.qZA(),d.TgZ(16,"a",12),d._uU(17,"Manage Orders"),d.qZA(),d.TgZ(18,"a",13),d._uU(19,"Manage Products"),d.qZA(),d.TgZ(20,"a",14),d._uU(21,"Log Out"),d.qZA()()()()()())},dependencies:[s1,bw,ik,xN,AN],styles:[".dropdown-toggle[_ngcontent-%COMP%]{cursor:pointer}"]}),n})(),PG=(()=>{class n{constructor(){this.title="oshop"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"container"]],template:function(t,r){1&t&&(d._UZ(0,"bs-navbar"),d.TgZ(1,"div",0),d._UZ(2,"router-outlet"),d.qZA())},dependencies:[AS,kG]}),n})(),FG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[PG]}),n.\u0275inj=d.cJS({imports:[Sc,PV,vr.hO.initializeApp($x_firebase),oP,sL,gP,RG]}),n})();(0,d.G48)(),hu().bootstrapModule(FG).catch(n=>console.error(n))},9751:(ft,Ce,P)=>{P.d(Ce,{y:()=>he});var d=P(930),X=P(727),k=P(8822),se=P(9635),oe=P(2416),de=P(576),ce=P(2806);let he=(()=>{class K{constructor(xe){xe&&(this._subscribe=xe)}lift(xe){const De=new K;return De.source=this,De.operator=xe,De}subscribe(xe,De,lt){const ye=function j(K){return K&&K instanceof d.Lv||function H(K){return K&&(0,de.m)(K.next)&&(0,de.m)(K.error)&&(0,de.m)(K.complete)}(K)&&(0,X.Nn)(K)}(xe)?xe:new d.Hp(xe,De,lt);return(0,ce.x)(()=>{const{operator:pe,source:it}=this;ye.add(pe?pe.call(ye,it):it?this._subscribe(ye):this._trySubscribe(ye))}),ye}_trySubscribe(xe){try{return this._subscribe(xe)}catch(De){xe.error(De)}}forEach(xe,De){return new(De=fe(De))((lt,ye)=>{const pe=new d.Hp({next:it=>{try{xe(it)}catch(dt){ye(dt),pe.unsubscribe()}},error:ye,complete:lt});this.subscribe(pe)})}_subscribe(xe){var De;return null===(De=this.source)||void 0===De?void 0:De.subscribe(xe)}[k.L](){return this}pipe(...xe){return(0,se.U)(xe)(this)}toPromise(xe){return new(xe=fe(xe))((De,lt)=>{let ye;this.subscribe(pe=>ye=pe,pe=>lt(pe),()=>De(ye))})}}return K.create=Le=>new K(Le),K})();function fe(K){var Le;return null!==(Le=K??oe.v.Promise)&&void 0!==Le?Le:Promise}},7579:(ft,Ce,P)=>{P.d(Ce,{x:()=>ce});var d=P(9751),X=P(727);const se=(0,P(3888).d)(fe=>function(){fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var oe=P(8737),de=P(2806);let ce=(()=>{class fe extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const K=new he(this,this);return K.operator=j,K}_throwIfClosed(){if(this.closed)throw new se}next(j){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next(j)}})}error(j){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:K}=this;for(;K.length;)K.shift().error(j)}})}complete(){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:K,isStopped:Le,observers:xe}=this;return K||Le?X.Lc:(this.currentObservers=null,xe.push(j),new X.w0(()=>{this.currentObservers=null,(0,oe.P)(xe,j)}))}_checkFinalizedStatuses(j){const{hasError:K,thrownError:Le,isStopped:xe}=this;K?j.error(Le):xe&&j.complete()}asObservable(){const j=new d.y;return j.source=this,j}}return fe.create=(H,j)=>new he(H,j),fe})();class he extends ce{constructor(H,j){super(),this.destination=H,this.source=j}next(H){var j,K;null===(K=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===K||K.call(j,H)}error(H){var j,K;null===(K=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===K||K.call(j,H)}complete(){var H,j;null===(j=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===j||j.call(H)}_subscribe(H){var j,K;return null!==(K=null===(j=this.source)||void 0===j?void 0:j.subscribe(H))&&void 0!==K?K:X.Lc}}},930:(ft,Ce,P)=>{P.d(Ce,{Hp:()=>lt,Lv:()=>K});var d=P(576),X=P(727),k=P(2416),se=P(7849),oe=P(4222);const de=fe("C",void 0,void 0);function fe(Ne,be,Ee){return{kind:Ne,value:be,error:Ee}}var H=P(3410),j=P(2806);class K extends X.w0{constructor(be){super(),this.isStopped=!1,be?(this.destination=be,(0,X.Nn)(be)&&be.add(this)):this.destination=dt}static create(be,Ee,je){return new lt(be,Ee,je)}next(be){this.isStopped?it(function he(Ne){return fe("N",Ne,void 0)}(be),this):this._next(be)}error(be){this.isStopped?it(function ce(Ne){return fe("E",void 0,Ne)}(be),this):(this.isStopped=!0,this._error(be))}complete(){this.isStopped?it(de,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(be){this.destination.next(be)}_error(be){try{this.destination.error(be)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Le=Function.prototype.bind;function xe(Ne,be){return Le.call(Ne,be)}class De{constructor(be){this.partialObserver=be}next(be){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(be)}catch(je){ye(je)}}error(be){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(be)}catch(je){ye(je)}else ye(be)}complete(){const{partialObserver:be}=this;if(be.complete)try{be.complete()}catch(Ee){ye(Ee)}}}class lt extends K{constructor(be,Ee,je){let We;if(super(),(0,d.m)(be)||!be)We={next:be??void 0,error:Ee??void 0,complete:je??void 0};else{let U;this&&k.v.useDeprecatedNextContext?(U=Object.create(be),U.unsubscribe=()=>this.unsubscribe(),We={next:be.next&&xe(be.next,U),error:be.error&&xe(be.error,U),complete:be.complete&&xe(be.complete,U)}):We=be}this.destination=new De(We)}}function ye(Ne){k.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(Ne):(0,se.h)(Ne)}function it(Ne,be){const{onStoppedNotification:Ee}=k.v;Ee&&H.z.setTimeout(()=>Ee(Ne,be))}const dt={closed:!0,next:oe.Z,error:function pe(Ne){throw Ne},complete:oe.Z}},727:(ft,Ce,P)=>{P.d(Ce,{Lc:()=>de,w0:()=>oe,Nn:()=>ce});var d=P(576);const k=(0,P(3888).d)(fe=>function(j){fe(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((K,Le)=>`${Le+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var se=P(8737);class oe{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const xe of j)xe.remove(this);else j.remove(this);const{initialTeardown:K}=this;if((0,d.m)(K))try{K()}catch(xe){H=xe instanceof k?xe.errors:[xe]}const{_finalizers:Le}=this;if(Le){this._finalizers=null;for(const xe of Le)try{he(xe)}catch(De){H=H??[],De instanceof k?H=[...H,...De.errors]:H.push(De)}}if(H)throw new k(H)}}add(H){var j;if(H&&H!==this)if(this.closed)he(H);else{if(H instanceof oe){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(H)}}_hasParent(H){const{_parentage:j}=this;return j===H||Array.isArray(j)&&j.includes(H)}_addParent(H){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(H),j):j?[j,H]:H}_removeParent(H){const{_parentage:j}=this;j===H?this._parentage=null:Array.isArray(j)&&(0,se.P)(j,H)}remove(H){const{_finalizers:j}=this;j&&(0,se.P)(j,H),H instanceof oe&&H._removeParent(this)}}oe.EMPTY=(()=>{const fe=new oe;return fe.closed=!0,fe})();const de=oe.EMPTY;function ce(fe){return fe instanceof oe||fe&&"closed"in fe&&(0,d.m)(fe.remove)&&(0,d.m)(fe.add)&&(0,d.m)(fe.unsubscribe)}function he(fe){(0,d.m)(fe)?fe():fe.unsubscribe()}},2416:(ft,Ce,P)=>{P.d(Ce,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ft,Ce,P)=>{P.d(Ce,{E:()=>X});const X=new(P(9751).y)(oe=>oe.complete())},8996:(ft,Ce,P)=>{P.d(Ce,{D:()=>be});var d=P(8421),X=P(5363),k=P(9468),de=P(9751),he=P(2202),fe=P(576),H=P(9672);function K(Ee,je){if(!Ee)throw new Error("Iterable cannot be null");return new de.y(We=>{(0,H.f)(We,je,()=>{const U=Ee[Symbol.asyncIterator]();(0,H.f)(We,je,()=>{U.next().then(me=>{me.done?We.complete():We.next(me.value)})},0,!0)})})}var Le=P(3670),xe=P(8239),De=P(1144),lt=P(6495),ye=P(2206),pe=P(4532),it=P(3260);function be(Ee,je){return je?function Ne(Ee,je){if(null!=Ee){if((0,Le.c)(Ee))return function se(Ee,je){return(0,d.Xf)(Ee).pipe((0,k.R)(je),(0,X.Q)(je))}(Ee,je);if((0,De.z)(Ee))return function ce(Ee,je){return new de.y(We=>{let U=0;return je.schedule(function(){U===Ee.length?We.complete():(We.next(Ee[U++]),We.closed||this.schedule())})})}(Ee,je);if((0,xe.t)(Ee))return function oe(Ee,je){return(0,d.Xf)(Ee).pipe((0,k.R)(je),(0,X.Q)(je))}(Ee,je);if((0,ye.D)(Ee))return K(Ee,je);if((0,lt.T)(Ee))return function j(Ee,je){return new de.y(We=>{let U;return(0,H.f)(We,je,()=>{U=Ee[he.h](),(0,H.f)(We,je,()=>{let me,z;try{({value:me,done:z}=U.next())}catch(J){return void We.error(J)}z?We.complete():We.next(me)},0,!0)}),()=>(0,fe.m)(U?.return)&&U.return()})}(Ee,je);if((0,it.L)(Ee))return function dt(Ee,je){return K((0,it.Q)(Ee),je)}(Ee,je)}throw(0,pe.z)(Ee)}(Ee,je):(0,d.Xf)(Ee)}},8421:(ft,Ce,P)=>{P.d(Ce,{Xf:()=>Le});var d=P(655),X=P(1144),k=P(8239),se=P(9751),oe=P(3670),de=P(2206),ce=P(4532),he=P(6495),fe=P(3260),H=P(576),j=P(7849),K=P(8822);function Le(Ne){if(Ne instanceof se.y)return Ne;if(null!=Ne){if((0,oe.c)(Ne))return function xe(Ne){return new se.y(be=>{const Ee=Ne[K.L]();if((0,H.m)(Ee.subscribe))return Ee.subscribe(be);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ne);if((0,X.z)(Ne))return function De(Ne){return new se.y(be=>{for(let Ee=0;Ee<Ne.length&&!be.closed;Ee++)be.next(Ne[Ee]);be.complete()})}(Ne);if((0,k.t)(Ne))return function lt(Ne){return new se.y(be=>{Ne.then(Ee=>{be.closed||(be.next(Ee),be.complete())},Ee=>be.error(Ee)).then(null,j.h)})}(Ne);if((0,de.D)(Ne))return pe(Ne);if((0,he.T)(Ne))return function ye(Ne){return new se.y(be=>{for(const Ee of Ne)if(be.next(Ee),be.closed)return;be.complete()})}(Ne);if((0,fe.L)(Ne))return function it(Ne){return pe((0,fe.Q)(Ne))}(Ne)}throw(0,ce.z)(Ne)}function pe(Ne){return new se.y(be=>{(function dt(Ne,be){var Ee,je,We,U;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,d.KL)(Ne);!(je=yield Ee.next()).done;)if(be.next(je.value),be.closed)return}catch(me){We={error:me}}finally{try{je&&!je.done&&(U=Ee.return)&&(yield U.call(Ee))}finally{if(We)throw We.error}}be.complete()})})(Ne,be).catch(Ee=>be.error(Ee))})}},6451:(ft,Ce,P)=>{P.d(Ce,{T:()=>de});var d=P(8189),X=P(8421),k=P(515),se=P(3269),oe=P(8996);function de(...ce){const he=(0,se.yG)(ce),fe=(0,se._6)(ce,1/0),H=ce;return H.length?1===H.length?(0,X.Xf)(H[0]):(0,d.J)(fe)((0,oe.D)(H,he)):k.E}},5403:(ft,Ce,P)=>{P.d(Ce,{x:()=>X});var d=P(930);function X(se,oe,de,ce,he){return new k(se,oe,de,ce,he)}class k extends d.Lv{constructor(oe,de,ce,he,fe,H){super(oe),this.onFinalize=fe,this.shouldUnsubscribe=H,this._next=de?function(j){try{de(j)}catch(K){oe.error(K)}}:super._next,this._error=he?function(j){try{he(j)}catch(K){oe.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=ce?function(){try{ce()}catch(j){oe.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:de}=this;super.unsubscribe(),!de&&(null===(oe=this.onFinalize)||void 0===oe||oe.call(this))}}}},4004:(ft,Ce,P)=>{P.d(Ce,{U:()=>k});var d=P(4482),X=P(5403);function k(se,oe){return(0,d.e)((de,ce)=>{let he=0;de.subscribe((0,X.x)(ce,fe=>{ce.next(se.call(oe,fe,he++))}))})}},8189:(ft,Ce,P)=>{P.d(Ce,{J:()=>k});var d=P(5577),X=P(4671);function k(se=1/0){return(0,d.z)(X.y,se)}},5577:(ft,Ce,P)=>{P.d(Ce,{z:()=>he});var d=P(4004),X=P(8421),k=P(4482),se=P(9672),oe=P(5403),ce=P(576);function he(fe,H,j=1/0){return(0,ce.m)(H)?he((K,Le)=>(0,d.U)((xe,De)=>H(K,xe,Le,De))((0,X.Xf)(fe(K,Le))),j):("number"==typeof H&&(j=H),(0,k.e)((K,Le)=>function de(fe,H,j,K,Le,xe,De,lt){const ye=[];let pe=0,it=0,dt=!1;const Ne=()=>{dt&&!ye.length&&!pe&&H.complete()},be=je=>pe<K?Ee(je):ye.push(je),Ee=je=>{xe&&H.next(je),pe++;let We=!1;(0,X.Xf)(j(je,it++)).subscribe((0,oe.x)(H,U=>{Le?.(U),xe?be(U):H.next(U)},()=>{We=!0},void 0,()=>{if(We)try{for(pe--;ye.length&&pe<K;){const U=ye.shift();De?(0,se.f)(H,De,()=>Ee(U)):Ee(U)}Ne()}catch(U){H.error(U)}}))};return fe.subscribe((0,oe.x)(H,be,()=>{dt=!0,Ne()})),()=>{lt?.()}}(K,Le,fe,j)))}},5363:(ft,Ce,P)=>{P.d(Ce,{Q:()=>se});var d=P(9672),X=P(4482),k=P(5403);function se(oe,de=0){return(0,X.e)((ce,he)=>{ce.subscribe((0,k.x)(he,fe=>(0,d.f)(he,oe,()=>he.next(fe),de),()=>(0,d.f)(he,oe,()=>he.complete(),de),fe=>(0,d.f)(he,oe,()=>he.error(fe),de)))})}},3099:(ft,Ce,P)=>{P.d(Ce,{B:()=>oe});var d=P(8421),X=P(7579),k=P(930),se=P(4482);function oe(ce={}){const{connector:he=(()=>new X.x),resetOnError:fe=!0,resetOnComplete:H=!0,resetOnRefCountZero:j=!0}=ce;return K=>{let Le,xe,De,lt=0,ye=!1,pe=!1;const it=()=>{xe?.unsubscribe(),xe=void 0},dt=()=>{it(),Le=De=void 0,ye=pe=!1},Ne=()=>{const be=Le;dt(),be?.unsubscribe()};return(0,se.e)((be,Ee)=>{lt++,!pe&&!ye&&it();const je=De=De??he();Ee.add(()=>{lt--,0===lt&&!pe&&!ye&&(xe=de(Ne,j))}),je.subscribe(Ee),!Le&&lt>0&&(Le=new k.Hp({next:We=>je.next(We),error:We=>{pe=!0,it(),xe=de(dt,fe,We),je.error(We)},complete:()=>{ye=!0,it(),xe=de(dt,H),je.complete()}}),(0,d.Xf)(be).subscribe(Le))})(K)}}function de(ce,he,...fe){if(!0===he)return void ce();if(!1===he)return;const H=new k.Hp({next:()=>{H.unsubscribe(),ce()}});return he(...fe).subscribe(H)}},9468:(ft,Ce,P)=>{P.d(Ce,{R:()=>X});var d=P(4482);function X(k,se=0){return(0,d.e)((oe,de)=>{de.add(k.schedule(()=>oe.subscribe(de),se))})}},8505:(ft,Ce,P)=>{P.d(Ce,{b:()=>oe});var d=P(576),X=P(4482),k=P(5403),se=P(4671);function oe(de,ce,he){const fe=(0,d.m)(de)||ce||he?{next:de,error:ce,complete:he}:de;return fe?(0,X.e)((H,j)=>{var K;null===(K=fe.subscribe)||void 0===K||K.call(fe);let Le=!0;H.subscribe((0,k.x)(j,xe=>{var De;null===(De=fe.next)||void 0===De||De.call(fe,xe),j.next(xe)},()=>{var xe;Le=!1,null===(xe=fe.complete)||void 0===xe||xe.call(fe),j.complete()},xe=>{var De;Le=!1,null===(De=fe.error)||void 0===De||De.call(fe,xe),j.error(xe)},()=>{var xe,De;Le&&(null===(xe=fe.unsubscribe)||void 0===xe||xe.call(fe)),null===(De=fe.finalize)||void 0===De||De.call(fe)}))}):se.y}},4408:(ft,Ce,P)=>{P.d(Ce,{o:()=>oe});var d=P(727);class X extends d.w0{constructor(ce,he){super()}schedule(ce,he=0){return this}}const k={setInterval(de,ce,...he){const{delegate:fe}=k;return fe?.setInterval?fe.setInterval(de,ce,...he):setInterval(de,ce,...he)},clearInterval(de){const{delegate:ce}=k;return(ce?.clearInterval||clearInterval)(de)},delegate:void 0};var se=P(8737);class oe extends X{constructor(ce,he){super(ce,he),this.scheduler=ce,this.work=he,this.pending=!1}schedule(ce,he=0){var fe;if(this.closed)return this;this.state=ce;const H=this.id,j=this.scheduler;return null!=H&&(this.id=this.recycleAsyncId(j,H,he)),this.pending=!0,this.delay=he,this.id=null!==(fe=this.id)&&void 0!==fe?fe:this.requestAsyncId(j,this.id,he),this}requestAsyncId(ce,he,fe=0){return k.setInterval(ce.flush.bind(ce,this),fe)}recycleAsyncId(ce,he,fe=0){if(null!=fe&&this.delay===fe&&!1===this.pending)return he;null!=he&&k.clearInterval(he)}execute(ce,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const fe=this._execute(ce,he);if(fe)return fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ce,he){let H,fe=!1;try{this.work(ce)}catch(j){fe=!0,H=j||new Error("Scheduled action threw falsy error")}if(fe)return this.unsubscribe(),H}unsubscribe(){if(!this.closed){const{id:ce,scheduler:he}=this,{actions:fe}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(fe,this),null!=ce&&(this.id=this.recycleAsyncId(he,ce,null)),this.delay=null,super.unsubscribe()}}}},7565:(ft,Ce,P)=>{P.d(Ce,{v:()=>k});var d=P(6063);class X{constructor(oe,de=X.now){this.schedulerActionCtor=oe,this.now=de}schedule(oe,de=0,ce){return new this.schedulerActionCtor(this,oe).schedule(ce,de)}}X.now=d.l.now;class k extends X{constructor(oe,de=X.now){super(oe,de),this.actions=[],this._active=!1}flush(oe){const{actions:de}=this;if(this._active)return void de.push(oe);let ce;this._active=!0;do{if(ce=oe.execute(oe.state,oe.delay))break}while(oe=de.shift());if(this._active=!1,ce){for(;oe=de.shift();)oe.unsubscribe();throw ce}}}},4986:(ft,Ce,P)=>{P.d(Ce,{P:()=>se,z:()=>k});var d=P(4408);const k=new(P(7565).v)(d.o),se=k},6063:(ft,Ce,P)=>{P.d(Ce,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(ft,Ce,P)=>{P.d(Ce,{z:()=>d});const d={setTimeout(X,k,...se){const{delegate:oe}=d;return oe?.setTimeout?oe.setTimeout(X,k,...se):setTimeout(X,k,...se)},clearTimeout(X){const{delegate:k}=d;return(k?.clearTimeout||clearTimeout)(X)},delegate:void 0}},2202:(ft,Ce,P)=>{P.d(Ce,{h:()=>X});const X=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ft,Ce,P)=>{P.d(Ce,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(ft,Ce,P)=>{P.d(Ce,{_6:()=>de,jO:()=>se,yG:()=>oe});var d=P(576),X=P(3532);function k(ce){return ce[ce.length-1]}function se(ce){return(0,d.m)(k(ce))?ce.pop():void 0}function oe(ce){return(0,X.K)(k(ce))?ce.pop():void 0}function de(ce,he){return"number"==typeof k(ce)?ce.pop():he}},8737:(ft,Ce,P)=>{function d(X,k){if(X){const se=X.indexOf(k);0<=se&&X.splice(se,1)}}P.d(Ce,{P:()=>d})},3888:(ft,Ce,P)=>{function d(X){const se=X(oe=>{Error.call(oe),oe.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}P.d(Ce,{d:()=>d})},2806:(ft,Ce,P)=>{P.d(Ce,{O:()=>se,x:()=>k});var d=P(2416);let X=null;function k(oe){if(d.v.useDeprecatedSynchronousErrorHandling){const de=!X;if(de&&(X={errorThrown:!1,error:null}),oe(),de){const{errorThrown:ce,error:he}=X;if(X=null,ce)throw he}}else oe()}function se(oe){d.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=oe)}},9672:(ft,Ce,P)=>{function d(X,k,se,oe=0,de=!1){const ce=k.schedule(function(){se(),de?X.add(this.schedule(null,oe)):this.unsubscribe()},oe);if(X.add(ce),!de)return ce}P.d(Ce,{f:()=>d})},4671:(ft,Ce,P)=>{function d(X){return X}P.d(Ce,{y:()=>d})},1144:(ft,Ce,P)=>{P.d(Ce,{z:()=>d});const d=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(ft,Ce,P)=>{P.d(Ce,{D:()=>X});var d=P(576);function X(k){return Symbol.asyncIterator&&(0,d.m)(k?.[Symbol.asyncIterator])}},576:(ft,Ce,P)=>{function d(X){return"function"==typeof X}P.d(Ce,{m:()=>d})},3670:(ft,Ce,P)=>{P.d(Ce,{c:()=>k});var d=P(8822),X=P(576);function k(se){return(0,X.m)(se[d.L])}},6495:(ft,Ce,P)=>{P.d(Ce,{T:()=>k});var d=P(2202),X=P(576);function k(se){return(0,X.m)(se?.[d.h])}},8239:(ft,Ce,P)=>{P.d(Ce,{t:()=>X});var d=P(576);function X(k){return(0,d.m)(k?.then)}},3260:(ft,Ce,P)=>{P.d(Ce,{L:()=>se,Q:()=>k});var d=P(655),X=P(576);function k(oe){return(0,d.FC)(this,arguments,function*(){const ce=oe.getReader();try{for(;;){const{value:he,done:fe}=yield(0,d.qq)(ce.read());if(fe)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(he)}}finally{ce.releaseLock()}})}function se(oe){return(0,X.m)(oe?.getReader)}},3532:(ft,Ce,P)=>{P.d(Ce,{K:()=>X});var d=P(576);function X(k){return k&&(0,d.m)(k.schedule)}},4482:(ft,Ce,P)=>{P.d(Ce,{A:()=>X,e:()=>k});var d=P(576);function X(se){return(0,d.m)(se?.lift)}function k(se){return oe=>{if(X(oe))return oe.lift(function(de){try{return se(de,this)}catch(ce){this.error(ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},4222:(ft,Ce,P)=>{function d(){}P.d(Ce,{Z:()=>d})},9635:(ft,Ce,P)=>{P.d(Ce,{U:()=>k,z:()=>X});var d=P(4671);function X(...se){return k(se)}function k(se){return 0===se.length?d.y:1===se.length?se[0]:function(de){return se.reduce((ce,he)=>he(ce),de)}}},7849:(ft,Ce,P)=>{P.d(Ce,{h:()=>k});var d=P(2416),X=P(3410);function k(se){X.z.setTimeout(()=>{const{onUnhandledError:oe}=d.v;if(!oe)throw se;oe(se)})}},4532:(ft,Ce,P)=>{function d(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Ce,{z:()=>d})},655:(ft,Ce,P)=>{function se(z,J){var ie={};for(var ne in z)Object.prototype.hasOwnProperty.call(z,ne)&&J.indexOf(ne)<0&&(ie[ne]=z[ne]);if(null!=z&&"function"==typeof Object.getOwnPropertySymbols){var Fe=0;for(ne=Object.getOwnPropertySymbols(z);Fe<ne.length;Fe++)J.indexOf(ne[Fe])<0&&Object.prototype.propertyIsEnumerable.call(z,ne[Fe])&&(ie[ne[Fe]]=z[ne[Fe]])}return ie}function he(z,J,ie,ne){return new(ie||(ie=Promise))(function(ke,_t){function tn(ln){try{et(ne.next(ln))}catch(bn){_t(bn)}}function jt(ln){try{et(ne.throw(ln))}catch(bn){_t(bn)}}function et(ln){ln.done?ke(ln.value):function Fe(ke){return ke instanceof ie?ke:new ie(function(_t){_t(ke)})}(ln.value).then(tn,jt)}et((ne=ne.apply(z,J||[])).next())})}function ye(z){return this instanceof ye?(this.v=z,this):new ye(z)}function pe(z,J,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,ne=ie.apply(z,J||[]),ke=[];return Fe={},_t("next"),_t("throw"),_t("return"),Fe[Symbol.asyncIterator]=function(){return this},Fe;function _t(Zt){ne[Zt]&&(Fe[Zt]=function(nn){return new Promise(function(Wr,Ft){ke.push([Zt,nn,Wr,Ft])>1||tn(Zt,nn)})})}function tn(Zt,nn){try{!function jt(Zt){Zt.value instanceof ye?Promise.resolve(Zt.value.v).then(et,ln):bn(ke[0][2],Zt)}(ne[Zt](nn))}catch(Wr){bn(ke[0][3],Wr)}}function et(Zt){tn("next",Zt)}function ln(Zt){tn("throw",Zt)}function bn(Zt,nn){Zt(nn),ke.shift(),ke.length&&tn(ke[0][0],ke[0][1])}}function dt(z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,J=z[Symbol.asyncIterator];return J?J.call(z):(z=function K(z){var J="function"==typeof Symbol&&Symbol.iterator,ie=J&&z[J],ne=0;if(ie)return ie.call(z);if(z&&"number"==typeof z.length)return{next:function(){return z&&ne>=z.length&&(z=void 0),{value:z&&z[ne++],done:!z}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")}(z),ie={},ne("next"),ne("throw"),ne("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function ne(ke){ie[ke]=z[ke]&&function(_t){return new Promise(function(tn,jt){!function Fe(ke,_t,tn,jt){Promise.resolve(jt).then(function(et){ke({value:et,done:tn})},_t)}(tn,jt,(_t=z[ke](_t)).done,_t.value)})}}}P.d(Ce,{FC:()=>pe,KL:()=>dt,_T:()=>se,mG:()=>he,qq:()=>ye})},4650:(ft,Ce,P)=>{P.d(Ce,{$8M:()=>gu,$Z:()=>Jw,AFp:()=>_b,AaK:()=>he,CHM:()=>Ql,CRH:()=>cr,CZH:()=>mg,CqO:()=>jv,D6c:()=>jT,EJc:()=>Ku,EpF:()=>Wh,F$t:()=>Wv,F4k:()=>FD,FYo:()=>av,FiY:()=>nt,G48:()=>dr,Gf:()=>lT,GfV:()=>On,Gpc:()=>j,Hsn:()=>VD,Ikx:()=>Xh,JOm:()=>Is,KtG:()=>Jl,LFG:()=>Un,LMc:()=>$T,LSH:()=>mm,Lbi:()=>Dd,Lck:()=>KC,MAs:()=>ju,MGl:()=>qh,MMx:()=>H0,NdJ:()=>Gv,OlP:()=>_n,PXZ:()=>yI,Q6J:()=>dd,QGY:()=>Cl,QP$:()=>Yt,Qsj:()=>Bt,QtT:()=>R_,R0b:()=>uo,RDi:()=>y,Rgc:()=>mf,SBq:()=>Tp,SDv:()=>CE,Sil:()=>bT,Suo:()=>uT,TTD:()=>fs,TgZ:()=>$h,Tol:()=>$D,Udp:()=>a_,VKq:()=>K0,W1O:()=>YE,WLB:()=>Z0,X6Q:()=>OT,XFs:()=>tt,Xpm:()=>Ie,Xts:()=>ym,Y36:()=>Xc,YKP:()=>F_,YNc:()=>Hu,Yjl:()=>we,Yz7:()=>nn,Z0I:()=>cs,ZZ4:()=>Rb,_Bn:()=>P_,_UZ:()=>e_,_Vd:()=>Cp,_c5:()=>SI,_uU:()=>QD,aQg:()=>Cf,c2e:()=>yT,cJS:()=>Ft,cg1:()=>l0,dDg:()=>gA,dqk:()=>an,eFA:()=>Zu,ekj:()=>Qv,eoX:()=>Db,f3M:()=>I,g9A:()=>uI,h0i:()=>os,hGG:()=>HT,hij:()=>d_,iGM:()=>Sn,ifc:()=>pt,ip1:()=>mb,jDz:()=>AE,kEZ:()=>Y0,kL8:()=>cE,lG2:()=>q,lqb:()=>ns,lri:()=>_I,n5z:()=>vs,oAB:()=>Ut,oxw:()=>$v,pQV:()=>F0,q4F:()=>bt,qLn:()=>ze,qOj:()=>Lv,qZA:()=>jp,rWj:()=>TT,s9C:()=>$p,sBO:()=>hr,sIi:()=>Uu,s_b:()=>_f,soG:()=>ey,tb:()=>Ta,tp0:()=>ht,uIk:()=>Bv,vHH:()=>De,vpe:()=>Ia,wAp:()=>Et,xp6:()=>Sh,z2F:()=>xl,zSh:()=>Ih,zs3:()=>Ms});var d=P(7579),X=P(727),k=P(9751),se=P(6451),oe=P(3099);function de(s){for(let o in s)if(s[o]===de)return o;throw Error("Could not find renamed property on target object.")}function ce(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function he(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(he).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function fe(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const H=de({__forward_ref__:de});function j(s){return s.__forward_ref__=j,s.toString=function(){return he(this())},s}function K(s){return Le(s)?s():s}function Le(s){return"function"==typeof s&&s.hasOwnProperty(H)&&s.__forward_ref__===j}class De extends Error{constructor(o,l){super(function lt(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,l)),this.code=o}}function ye(s){return"string"==typeof s?s:null==s?"":String(s)}function be(s,o){throw new De(-201,!1)}function et(s,o,l,u){throw new Error(`ASSERTION ERROR: ${s}`+(null==u?"":` [Expected=> ${l} ${u} ${o} <=Actual]`))}function nn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Ft(s){return{providers:s.providers||[],imports:s.imports||[]}}function dn(s){return Oi(s,Ri)||Oi(s,gi)}function cs(s){return null!==dn(s)}function Oi(s,o){return s.hasOwnProperty(o)?s[o]:null}function ho(s){return s&&(s.hasOwnProperty(pi)||s.hasOwnProperty(ka))?s[pi]:null}const Ri=de({\u0275prov:de}),pi=de({\u0275inj:de}),gi=de({ngInjectableDef:de}),ka=de({ngInjectorDef:de});var tt=(()=>((tt=tt||{})[tt.Default=0]="Default",tt[tt.Host=1]="Host",tt[tt.Self=2]="Self",tt[tt.SkipSelf=4]="SkipSelf",tt[tt.Optional=8]="Optional",tt))();let Pr;function Yn(s){const o=Pr;return Pr=s,o}function mi(s,o,l){const u=dn(s);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:l&tt.Optional?null:void 0!==o?o:void be(he(s))}function Pn(s){return{toString:s}.toString()}var Wn=(()=>((Wn=Wn||{})[Wn.OnPush=0]="OnPush",Wn[Wn.Default=1]="Default",Wn))(),pt=(()=>{return(s=pt||(pt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",pt;var s})();const an=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ni={},Ot=[],js=de({\u0275cmp:de}),rn=de({\u0275dir:de}),zi=de({\u0275pipe:de}),sn=de({\u0275mod:de}),Qn=de({\u0275fac:de}),qr=de({__NG_ELEMENT_ID__:de});let ot=0;function Ie(s){return Pn(()=>{const l=!0===s.standalone,u={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Wn.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Ot,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||pt.Emulated,id:"c"+ot++,styles:s.styles||Ot,_:null,setInput:null,schemas:s.schemas||null,tView:null},g=s.dependencies,v=s.features;return h.inputs=B(s.inputs,u),h.outputs=B(s.outputs),v&&v.forEach(D=>D(h)),h.directiveDefs=g?()=>("function"==typeof g?g():g).map(xt).filter(Rt):null,h.pipeDefs=g?()=>("function"==typeof g?g():g).map(yt).filter(Rt):null,h})}function xt(s){return Q(s)||Ke(s)}function Rt(s){return null!==s}function Ut(s){return Pn(()=>({type:s.type,bootstrap:s.bootstrap||Ot,declarations:s.declarations||Ot,imports:s.imports||Ot,exports:s.exports||Ot,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function B(s,o){if(null==s)return ni;const l={};for(const u in s)if(s.hasOwnProperty(u)){let h=s[u],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),l[h]=u,o&&(o[h]=g)}return l}const q=Ie;function we(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Q(s){return s[js]||null}function Ke(s){return s[rn]||null}function yt(s){return s[zi]||null}function Yt(s){const o=Q(s)||Ke(s)||yt(s);return null!==o&&o.standalone}function fn(s,o){const l=s[sn]||null;if(!l&&!0===o)throw new Error(`Type ${he(s)} does not have '\u0275mod' property.`);return l}function gr(s){return Array.isArray(s)&&"object"==typeof s[1]}function Kr(s){return Array.isArray(s)&&!0===s[1]}function Ul(s){return 0!=(8&s.flags)}function Fa(s){return 2==(2&s.flags)}function lc(s){return 1==(1&s.flags)}function Fr(s){return null!==s.template}function Ff(s){return 0!=(256&s[2])}function Zi(s,o){return s.hasOwnProperty(Qn)?s[Qn]:null}class hs{constructor(o,l,u){this.previousValue=o,this.currentValue=l,this.firstChange=u}isFirstChange(){return this.firstChange}}function fs(){return _o}function _o(s){return s.type.prototype.ngOnChanges&&(s.setInput=jl),La}function La(){const s=Bf(this),o=s?.current;if(o){const l=s.previous;if(l===ni)s.previous=o;else for(let u in o)l[u]=o[u];s.current=null,this.ngOnChanges(o)}}function jl(s,o,l,u){const h=Bf(s)||function mr(s,o){return s[dc]=o}(s,{previous:ni,current:null}),g=h.current||(h.current={}),v=h.previous,D=this.declaredInputs[l],E=v[D];g[D]=new hs(E&&E.currentValue,o,v===ni),s[u]=o}fs.ngInherit=!0;const dc="__ngSimpleChanges__";function Bf(s){return s[dc]||null}function Nn(s){for(;Array.isArray(s);)s=s[0];return s}function yi(s,o){return Nn(o[s])}function Lr(s,o){return Nn(o[s.index])}function $o(s,o){return s.data[o]}function zt(s,o){const l=o[s];return gr(l)?l:l[0]}function yo(s){return 64==(64&s[2])}function Pi(s,o){return null==o?null:s[o]}function ql(s){s[18]=0}function Cn(s,o){s[5]+=o;let l=s,u=s[3];for(;null!==u&&(1===o&&1===l[5]||-1===o&&0===l[5]);)u[5]+=o,l=u,u=u[3]}const Mt={lFrame:Dc(null),bindingsEnabled:!0};function ms(){return Mt.bindingsEnabled}function Te(){return Mt.lFrame.lView}function Gt(){return Mt.lFrame.tView}function Ql(s){return Mt.lFrame.contextLView=s,s[8]}function Jl(s){return Mt.lFrame.contextLView=null,s}function An(){let s=Xl();for(;null!==s&&64===s.type;)s=s.parent;return s}function Xl(){return Mt.lFrame.currentTNode}function Wo(){const s=Mt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}function vi(s,o){const l=Mt.lFrame;l.currentTNode=s,l.isParent=o}function Ba(){return Mt.lFrame.isParent}function Ua(){Mt.lFrame.isParent=!1}function xn(){const s=Mt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function vo(){return Mt.lFrame.bindingIndex++}function _s(s){const o=Mt.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}function ja(s){Mt.lFrame.inI18n=s}function Kg(s,o){const l=Mt.lFrame;l.bindingIndex=l.bindingRootIndex=s,eu(o)}function eu(s){Mt.lFrame.currentDirectiveIndex=s}function vc(){return Mt.lFrame.currentQueryIndex}function $a(s){Mt.lFrame.currentQueryIndex=s}function bc(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function tu(s,o,l){if(l&tt.SkipSelf){let h=o,g=s;for(;!(h=h.parent,null!==h||l&tt.Host||(h=bc(g),null===h||(g=g[15],10&h.type))););if(null===h)return!1;o=h,s=g}const u=Mt.lFrame=wc();return u.currentTNode=o,u.lView=s,!0}function nu(s){const o=wc(),l=s[1];Mt.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function wc(){const s=Mt.lFrame,o=null===s?null:s.child;return null===o?Dc(s):o}function Dc(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Ec(){const s=Mt.lFrame;return Mt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Ud=Ec;function bo(){const s=Ec();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function er(){return Mt.lFrame.selectedIndex}function si(s){Mt.lFrame.selectedIndex=s}function mn(){const s=Mt.lFrame;return $o(s.tView,s.selectedIndex)}function su(s,o){for(let l=o.directiveStart,u=o.directiveEnd;l<u;l++){const g=s.data[l].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:D,ngAfterViewInit:E,ngAfterViewChecked:S,ngOnDestroy:M}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-l,v),D&&((s.contentHooks||(s.contentHooks=[])).push(l,D),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,D)),E&&(s.viewHooks||(s.viewHooks=[])).push(-l,E),S&&((s.viewHooks||(s.viewHooks=[])).push(l,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,S)),null!=M&&(s.destroyHooks||(s.destroyHooks=[])).push(l,M)}}function Do(s,o,l){qo(s,o,3,l)}function zo(s,o,l,u){(3&s[2])===l&&qo(s,o,l,u)}function Gd(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function qo(s,o,l,u){const g=u??-1,v=o.length-1;let D=0;for(let E=void 0!==u?65535&s[18]:0;E<v;E++)if("number"==typeof o[E+1]){if(D=o[E],null!=u&&D>=u)break}else o[E]<0&&(s[18]+=65536),(D<g||-1==g)&&($d(s,l,o,E),s[18]=(4294901760&s[18])+E+2),E++}function $d(s,o,l,u){const h=l[u]<0,g=l[u+1],D=s[h?-l[u]:l[u]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(D)}finally{}}}else try{g.call(D)}finally{}}class Ys{constructor(o,l,u){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=u}}function Zo(s,o,l){let u=0;for(;u<l.length;){const h=l[u];if("number"==typeof h){if(0!==h)break;u++;const g=l[u++],v=l[u++],D=l[u++];s.setAttribute(o,v,D,g)}else{const g=h,v=l[++u];uu(g)?s.setProperty(o,g,v):s.setAttribute(o,g,v),u++}}return u}function Io(s){return 3===s||4===s||6===s}function uu(s){return 64===s.charCodeAt(0)}function Wa(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let u=0;u<o.length;u++){const h=o[u];"number"==typeof h?l=h:0===l||zd(s,l,h,null,-1===l||2===l?o[++u]:null)}}return s}function zd(s,o,l,u,h){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const D=s[g++];if("number"==typeof D){if(D===o){v=-1;break}if(D>o){v=g-1;break}}}for(;g<s.length;){const D=s[g];if("number"==typeof D)break;if(D===l){if(null===u)return void(null!==h&&(s[g+1]=h));if(u===s[g+1])return void(s[g+2]=h)}g++,null!==u&&g++,null!==h&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,l),null!==u&&s.splice(g++,0,u),null!==h&&s.splice(g++,0,h)}function qd(s){return-1!==s}function _r(s){return 32767&s}function qa(s,o){let l=function za(s){return s>>16}(s),u=o;for(;l>0;)u=u[15],l--;return u}let Qi=!0;function Ka(s){const o=Qi;return Qi=s,o}let Ln=0;const Fi={};function Co(s,o){const l=du(s,o);if(-1!==l)return l;const u=o[1];u.firstCreatePass&&(s.injectorIndex=o.length,Ya(u.data,s),Ya(o,null),Ya(u.blueprint,null));const h=hu(s,o),g=s.injectorIndex;if(qd(h)){const v=_r(h),D=qa(h,o),E=D[1].data;for(let S=0;S<8;S++)o[g+S]=D[v+S]|E[v+S]}return o[g+8]=h,g}function Ya(s,o){s.push(0,0,0,0,0,0,0,0,o)}function du(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function hu(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,u=null,h=o;for(;null!==h;){if(u=Jo(h),null===u)return-1;if(l++,h=h[15],-1!==u.injectorIndex)return u.injectorIndex|l<<16}return-1}function Qs(s,o,l){!function cu(s,o,l){let u;"string"==typeof l?u=l.charCodeAt(0)||0:l.hasOwnProperty(qr)&&(u=l[qr]),null==u&&(u=l[qr]=Ln++);const h=255&u;o.data[s+(h>>5)]|=1<<h}(s,o,l)}function Js(s,o,l){if(l&tt.Optional||void 0!==s)return s;be()}function Sc(s,o,l,u){if(l&tt.Optional&&void 0===u&&(u=null),0==(l&(tt.Self|tt.Host))){const h=s[9],g=Yn(void 0);try{return h?h.get(o,u,l&tt.Optional):mi(o,u,l&tt.Optional)}finally{Yn(g)}}return Js(u,0,l)}function To(s,o,l,u=tt.Default,h){if(null!==s){if(1024&o[2]){const v=function Qo(s,o,l,u,h){let g=s,v=o;for(;null!==g&&null!==v&&1024&v[2]&&!(256&v[2]);){const D=Qa(g,v,l,u|tt.Self,Fi);if(D!==Fi)return D;let E=g.parent;if(!E){const S=v[21];if(S){const M=S.get(l,Fi,u);if(M!==Fi)return M}E=Jo(v),v=v[15]}g=E}return h}(s,o,l,u,Fi);if(v!==Fi)return v}const g=Qa(s,o,l,u,Fi);if(g!==Fi)return g}return Sc(o,l,u,h)}function Qa(s,o,l,u,h){const g=function Nc(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(qr)?s[qr]:void 0;return"number"==typeof o?o>=0?255&o:Ac:o}(l);if("function"==typeof g){if(!tu(o,s,u))return u&tt.Host?Js(h,0,u):Sc(o,l,u,h);try{const v=g(u);if(null!=v||u&tt.Optional)return v;be()}finally{Ud()}}else if("number"==typeof g){let v=null,D=du(s,o),E=-1,S=u&tt.Host?o[16][6]:null;for((-1===D||u&tt.SkipSelf)&&(E=-1===D?hu(s,o):o[D+8],-1!==E&&Ja(u,!1)?(v=o[1],D=_r(E),o=qa(E,o)):D=-1);-1!==D;){const M=o[1];if(fu(g,D,M.data)){const F=Yd(D,o,l,v,u,S);if(F!==Fi)return F}E=o[D+8],-1!==E&&Ja(u,o[1].data[D+8]===S)&&fu(g,D,o)?(v=M,D=_r(E),o=qa(E,o)):D=-1}}return h}function Yd(s,o,l,u,h,g){const v=o[1],D=v.data[s+8],M=Yo(D,v,l,null==u?Fa(D)&&Qi:u!=v&&0!=(3&D.type),h&tt.Host&&g===D);return null!==M?ys(o,v,M,D):Fi}function Yo(s,o,l,u,h){const g=s.providerIndexes,v=o.data,D=1048575&g,E=s.directiveStart,M=g>>20,$=h?D+M:s.directiveEnd;for(let ee=u?D:D+M;ee<$;ee++){const ve=v[ee];if(ee<E&&l===ve||ee>=E&&ve.type===l)return ee}if(h){const ee=v[E];if(ee&&Fr(ee)&&ee.type===l)return E}return null}function ys(s,o,l,u){let h=s[l];const g=o.data;if(function Eo(s){return s instanceof Ys}(h)){const v=h;v.resolving&&function it(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new De(-200,`Circular dependency in DI detected for ${s}${l}`)}(function pe(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ye(s)}(g[l]));const D=Ka(v.canSeeViewProviders);v.resolving=!0;const E=v.injectImpl?Yn(v.injectImpl):null;tu(s,u,tt.Default);try{h=s[l]=v.factory(void 0,g,s,u),o.firstCreatePass&&l>=u.directiveStart&&function jd(s,o,l){const{ngOnChanges:u,ngOnInit:h,ngDoCheck:g}=o.type.prototype;if(u){const v=_o(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,v),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,v)}h&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,h),g&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,g),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,g))}(l,g[l],o)}finally{null!==E&&Yn(E),Ka(D),v.resolving=!1,Ud()}}return h}function fu(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function Ja(s,o){return!(s&tt.Self||s&tt.Host&&o)}class So{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,u){return To(this._tNode,this._lView,o,u,l)}}function Ac(){return new So(An(),Te())}function vs(s){return Pn(()=>{const o=s.prototype.constructor,l=o[Qn]||pu(o),u=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==u;){const g=h[Qn]||pu(h);if(g&&g!==l)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function pu(s){return Le(s)?()=>{const o=pu(K(s));return o&&o()}:Zi(s)}function Jo(s){const o=s[1],l=o.type;return 2===l?o.declTNode:1===l?s[6]:null}function gu(s){return function Zd(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const u=l.length;let h=0;for(;h<u;){const g=l[h];if(Io(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<u&&"string"==typeof l[h];)h++;else{if(g===o)return l[h+1];h+=2}}}return null}(An(),s)}const Xs="__parameters__";function ta(s,o,l){return Pn(()=>{const u=function mu(s){return function(...l){if(s){const u=s(...l);for(const h in u)this[h]=u[h]}}}(o);function h(...g){if(this instanceof h)return u.apply(this,g),this;const v=new h(...g);return D.annotation=v,D;function D(E,S,M){const F=E.hasOwnProperty(Xs)?E[Xs]:Object.defineProperty(E,Xs,{value:[]})[Xs];for(;F.length<=M;)F.push(null);return(F[M]=F[M]||[]).push(v),E}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class _n{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=nn({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Vn(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let u=s[l];Array.isArray(u)?(o===s&&(o=s.slice(0,l)),Vn(u,o)):o!==s&&o.push(u)}return o}function Je(s,o){s.forEach(l=>Array.isArray(l)?Je(l,o):o(l))}function yn(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function Ji(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function eo(s,o){const l=[];for(let u=0;u<s;u++)l.push(o);return l}function ai(s,o,l){let u=li(s,o);return u>=0?s[1|u]=l:(u=~u,function ws(s,o,l,u){let h=s.length;if(h==o)s.push(l,u);else if(1===h)s.push(u,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=l,s[o+1]=u}}(s,u,o,l)),u}function Es(s,o){const l=li(s,o);if(l>=0)return s[1|l]}function li(s,o){return function el(s,o,l){let u=0,h=s.length>>l;for(;h!==u;){const g=u+(h-u>>1),v=s[g<<l];if(o===v)return g<<l;v>o?h=g:u=g+1}return~(h<<l)}(s,o,1)}const nr={},ut="__NG_DI_FLAG__",ra="ngTempTokenPath",ia=/\n/gm,sa="__source";let oa;function Xi(s){const o=oa;return oa=s,o}function Jd(s,o=tt.Default){if(void 0===oa)throw new De(-203,!1);return null===oa?mi(s,void 0,o):oa.get(s,o&tt.Optional?null:void 0,o)}function Un(s,o=tt.Default){return(function Hs(){return Pr}()||Jd)(K(s),o)}function I(s,o=tt.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),Un(s,o)}function T(s){const o=[];for(let l=0;l<s.length;l++){const u=K(s[l]);if(Array.isArray(u)){if(0===u.length)throw new De(900,!1);let h,g=tt.Default;for(let v=0;v<u.length;v++){const D=u[v],E=L(D);"number"==typeof E?-1===E?h=D.token:g|=E:h=D}o.push(Un(h,g))}else o.push(Un(u))}return o}function x(s,o){return s[ut]=o,s.prototype[ut]=o,s}function L(s){return s[ut]}const nt=x(ta("Optional"),8),ht=x(ta("SkipSelf"),4);var Is=(()=>((Is=Is||{})[Is.Important=1]="Important",Is[Is.DashCase=2]="DashCase",Is))();const tp=/^>|^->|<!--|-->|--!>|<!-$/g,np=/(<|>)/;const yu=new Map;let ah=0;const xo="__ngContext__";function Yr(s,o){gr(o)?(s[xo]=o[20],function Nr(s){yu.set(s[20],s)}(o)):s[xo]=o}let sl;function dh(s,o){return sl(s,o)}function ol(s){const o=s[3];return Kr(o)?o[3]:o}function Vc(s){return ua(s[13])}function Bc(s){return ua(s[4])}function ua(s){for(;null!==s&&!Kr(s);)s=s[4];return s}function es(s,o,l,u,h){if(null!=u){let g,v=!1;Kr(u)?g=u:gr(u)&&(v=!0,u=u[0]);const D=Nn(u);0===s&&null!==l?null==h?mh(o,l,D):da(o,l,D,h||null,!0):1===s&&null!==l?da(o,l,D,h||null,!0):2===s?_h(o,D,v):3===s&&o.destroyNode(D),null!=g&&function Cu(s,o,l,u,h){const g=l[7];g!==Nn(l)&&es(o,s,u,g,h);for(let D=10;D<l.length;D++){const E=l[D];Iu(E[1],E,s,o,u,g)}}(o,s,g,l,h)}}function hh(s,o){return s.createText(o)}function Du(s,o,l){s.setValue(o,l)}function im(s,o){return s.createComment(function tm(s){return s.replace(tp,o=>o.replace(np,"\u200b$1\u200b"))}(o))}function xr(s,o,l){return s.createElement(o,l)}function ph(s,o){const l=s[9],u=l.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,Cn(h,-1)),l.splice(u,1)}function ll(s,o){if(s.length<=10)return;const l=10+o,u=s[l];if(u){const h=u[17];null!==h&&h!==s&&ph(h,u),o>0&&(s[l-1][4]=u[4]);const g=Ji(s,10+o);!function sm(s,o){Iu(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(u[1],u);const v=g[19];null!==v&&v.detachView(g[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function gh(s,o){if(!(128&o[2])){const l=o[11];l.destroyNode&&Iu(s,o,l,3,null,null),function om(s){let o=s[13];if(!o)return Hc(s[1],s);for(;o;){let l=null;if(gr(o))l=o[13];else{const u=o[10];u&&(l=u)}if(!l){for(;o&&!o[4]&&o!==s;)gr(o)&&Hc(o[1],o),o=o[3];null===o&&(o=s),gr(o)&&Hc(o[1],o),l=o&&o[4]}o=l}}(o)}}function Hc(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function jc(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let u=0;u<l.length;u+=2){const h=o[l[u]];if(!(h instanceof Ys)){const g=l[u+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const D=h[g[v]],E=g[v+1];try{E.call(D)}finally{}}else try{g.call(h)}finally{}}}}(s,o),function up(s,o){const l=s.cleanup,u=o[7];let h=-1;if(null!==l)for(let g=0;g<l.length-1;g+=2)if("string"==typeof l[g]){const v=l[g+1],D="function"==typeof v?v(o):Nn(o[v]),E=u[h=l[g+2]],S=l[g+3];"boolean"==typeof S?D.removeEventListener(l[g],E,S):S>=0?u[h=S]():u[h=-S].unsubscribe(),g+=2}else{const v=u[h=l[g+1]];l[g].call(v)}if(null!==u){for(let g=h+1;g<u.length;g++)(0,u[g])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const l=o[17];if(null!==l&&Kr(o[3])){l!==o[3]&&ph(l,o);const u=o[19];null!==u&&u.detachView(s)}!function lh(s){yu.delete(s[20])}(o)}}function ca(s,o,l){return Gc(s,o.parent,l)}function Gc(s,o,l){let u=o;for(;null!==u&&40&u.type;)u=(o=u).parent;if(null===u)return l[0];if(2&u.flags){const h=s.data[u.directiveStart].encapsulation;if(h===pt.None||h===pt.Emulated)return null}return Lr(u,l)}function da(s,o,l,u,h){s.insertBefore(o,l,u,h)}function mh(s,o,l){s.appendChild(o,l)}function ul(s,o,l,u,h){null!==u?da(s,o,l,u,h):mh(s,o,l)}function Mo(s,o){return s.parentNode(o)}function lm(s,o,l){return $c(s,o,l)}function ha(s,o,l){return 40&s.type?Lr(s,l):null}let Eu,fa,gp,$c=ha;function cl(s,o){$c=s,Eu=o}function no(s,o,l,u){const h=ca(s,u,o),g=o[11],D=lm(u.parent||o[6],u,o);if(null!=h)if(Array.isArray(l))for(let E=0;E<l.length;E++)ul(g,h,l[E],D,!1);else ul(g,h,l,D,!1);void 0!==Eu&&Eu(g,u,o,l,h)}function Vi(s,o){if(null!==o){const l=o.type;if(3&l)return Lr(o,s);if(4&l)return fp(-1,s[o.index]);if(8&l){const u=o.child;if(null!==u)return Vi(s,u);{const h=s[o.index];return Kr(h)?fp(-1,h):Nn(h)}}if(32&l)return dh(o,s)()||Nn(s[o.index]);{const u=hp(s,o);return null!==u?Array.isArray(u)?u[0]:Vi(ol(s[16]),u):Vi(s,o.next)}}return null}function hp(s,o){return null!==o?s[16][6].projection[o.projection]:null}function fp(s,o){const l=10+s+1;if(l<o.length){const u=o[l],h=u[1].firstChild;if(null!==h)return Vi(u,h)}return o[7]}function _h(s,o,l){const u=Mo(s,o);u&&function cp(s,o,l,u){s.removeChild(o,l,u)}(s,u,o,l)}function yh(s,o,l,u,h,g,v){for(;null!=l;){const D=u[l.index],E=l.type;if(v&&0===o&&(D&&Yr(Nn(D),u),l.flags|=4),64!=(64&l.flags))if(8&E)yh(s,o,l.child,u,h,g,!1),es(o,s,h,D,g);else if(32&E){const S=dh(l,u);let M;for(;M=S();)es(o,s,h,M,g);es(o,s,h,D,g)}else 16&E?ts(s,o,u,l,h,g):es(o,s,h,D,g);l=v?l.projectionNext:l.next}}function Iu(s,o,l,u,h,g){yh(l,u,s.firstChild,o,h,g,!1)}function ts(s,o,l,u,h,g){const v=l[16],E=v[6].projection[u.projection];if(Array.isArray(E))for(let S=0;S<E.length;S++)es(o,s,h,E[S],g);else yh(s,o,E,v[3],h,g,!0)}function Cs(s,o,l){s.setAttribute(o,"style",l)}function un(s,o,l){""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l)}function Ts(s){return function pa(){if(void 0===fa&&(fa=null,an.trustedTypes))try{fa=an.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return fa}()?.createHTML(s)||s}function y(s){gp=s}class ge{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function or(s){return s instanceof ge?s.changingThisBreaksApplicationSecurity:s}class dl{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const l=(new window.DOMParser).parseFromString(Ts(o),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(o):(l.removeChild(l.firstChild),l)}catch{return null}}}class Wc{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const u=this.inertDocument.createElement("body");l.appendChild(u)}}getInertBodyElement(o){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=Ts(o),l;const u=this.inertDocument.createElement("body");return u.innerHTML=Ts(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(o){const l=o.attributes;for(let h=l.length-1;0<h;h--){const v=l.item(h).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&o.removeAttribute(v)}let u=o.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const bh=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function hl(s){return(s=String(s)).match(bh)?s:"unsafe:"+s}function Ss(s){const o={};for(const l of s.split(","))o[l]=!0;return o}function bp(...s){const o={};for(const l of s)for(const u in l)l.hasOwnProperty(u)&&(o[u]=!0);return o}const Zn=Ss("area,br,col,hr,img,wbr"),Zy=Ss("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Tw=Ss("rp,rt"),dm=bp(Zn,bp(Zy,Ss("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),bp(Tw,Ss("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),bp(Tw,Zy)),hm=Ss("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ga=bp(hm,Ss("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ss("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var Mr=(()=>((Mr=Mr||{})[Mr.NONE=0]="NONE",Mr[Mr.HTML=1]="HTML",Mr[Mr.STYLE=2]="STYLE",Mr[Mr.SCRIPT=3]="SCRIPT",Mr[Mr.URL=4]="URL",Mr[Mr.RESOURCE_URL=5]="RESOURCE_URL",Mr))();function mm(s){const o=function Eh(){const s=Te();return s&&s[12]}();return o?o.sanitize(Mr.URL,s)||"":function ro(s,o){const l=function mp(s){return s instanceof ge&&s.getTypeName()||null}(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}(s,"URL")?or(s):hl(ye(s))}const ym=new _n("ENVIRONMENT_INITIALIZER"),nv=new _n("INJECTOR",-1),rv=new _n("INJECTOR_DEF_TYPES");class Ep{get(o,l=nr){if(l===nr){const u=new Error(`NullInjectorError: No provider for ${he(o)}!`);throw u.name="NullInjectorError",u}return l}}function Ns(...s){return{\u0275providers:iv(0,s)}}function iv(s,...o){const l=[],u=new Set;let h;return Je(o,g=>{const v=g;Su(v,l,[],u)&&(h||(h=[]),h.push(v))}),void 0!==h&&sv(h,l),l}function sv(s,o){for(let l=0;l<s.length;l++){const{providers:h}=s[l];Je(h,g=>{o.push(g)})}}function Su(s,o,l,u){if(!(s=K(s)))return!1;let h=null,g=ho(s);const v=!g&&Q(s);if(g||v){if(v&&!v.standalone)return!1;h=s}else{const E=s.ngModule;if(g=ho(E),!g)return!1;h=E}const D=u.has(h);if(v){if(D)return!1;if(u.add(h),v.dependencies){const E="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const S of E)Su(S,o,l,u)}}else{if(!g)return!1;{if(null!=g.imports&&!D){let S;u.add(h);try{Je(g.imports,M=>{Su(M,o,l,u)&&(S||(S=[]),S.push(M))})}finally{}void 0!==S&&sv(S,o)}if(!D){const S=Zi(h)||(()=>new h);o.push({provide:h,useFactory:S,deps:Ot},{provide:rv,useValue:h,multi:!0},{provide:ym,useValue:()=>Un(h),multi:!0})}const E=g.providers;null==E||D||Je(E,M=>{o.push(M)})}}return h!==s&&void 0!==s.providers}const B1=de({provide:String,useValue:de});function Ip(s){return null!==s&&"object"==typeof s&&B1 in s}function Nu(s){return"function"==typeof s}const Ih=new _n("Set Injector scope."),vm={},kw={};let Or;function fl(){return void 0===Or&&(Or=new Ep),Or}class ns{}class bm extends ns{constructor(o,l,u,h){super(),this.parent=l,this.source=u,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ue(o,v=>this.processProvider(v)),this.records.set(nv,xu(void 0,this)),h.has("environment")&&this.records.set(ns,xu(void 0,this));const g=this.records.get(Ih);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(rv.multi,Ot,tt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const l=Xi(this),u=Yn(void 0);try{return o()}finally{Xi(l),Yn(u)}}get(o,l=nr,u=tt.Default){this.assertNotDestroyed();const h=Xi(this),g=Yn(void 0);try{if(!(u&tt.SkipSelf)){let D=this.records.get(o);if(void 0===D){const E=function H1(s){return"function"==typeof s||"object"==typeof s&&s instanceof _n}(o)&&dn(o);D=E&&this.injectableDefInScope(E)?xu(ov(o),vm):null,this.records.set(o,D)}if(null!=D)return this.hydrate(o,D)}return(u&tt.Self?fl():this.parent).get(o,l=u&tt.Optional&&l===nr?null:l)}catch(v){if("NullInjectorError"===v.name){if((v[ra]=v[ra]||[]).unshift(he(o)),h)throw v;return function Y(s,o,l,u){const h=s[ra];throw o[sa]&&h.unshift(o[sa]),s.message=function re(s,o,l,u=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=he(o);if(Array.isArray(o))h=o.map(he).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let D=o[v];g.push(v+":"+("string"==typeof D?JSON.stringify(D):he(D)))}h=`{${g.join(", ")}}`}return`${l}${u?"("+u+")":""}[${h}]: ${s.replace(ia,"\n  ")}`}("\n"+s.message,h,l,u),s.ngTokenPath=h,s[ra]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Yn(g),Xi(h)}}resolveInjectorInitializers(){const o=Xi(this),l=Yn(void 0);try{const u=this.get(ym.multi,Ot,tt.Self);for(const h of u)h()}finally{Xi(o),Yn(l)}}toString(){const o=[],l=this.records;for(const u of l.keys())o.push(he(u));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new De(205,!1)}processProvider(o){let l=Nu(o=K(o))?o:K(o&&o.provide);const u=function br(s){return Ip(s)?xu(void 0,s.useValue):xu(Au(s),vm)}(o);if(Nu(o)||!0!==o.multi)this.records.get(l);else{let h=this.records.get(l);h||(h=xu(void 0,vm,!0),h.factory=()=>T(h.multi),this.records.set(l,h)),l=o,h.multi.push(o)}this.records.set(l,u)}hydrate(o,l){return l.value===vm&&(l.value=kw,l.value=l.factory()),"object"==typeof l.value&&l.value&&function mt(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=K(o.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function ov(s){const o=dn(s),l=null!==o?o.factory:Zi(s);if(null!==l)return l;if(s instanceof _n)throw new De(204,!1);if(s instanceof Function)return function Oe(s){const o=s.length;if(o>0)throw eo(o,"?"),new De(204,!1);const l=function zr(s){const o=s&&(s[Ri]||s[gi]);if(o){const l=function ti(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new De(204,!1)}function Au(s,o,l){let u;if(Nu(s)){const h=K(s);return Zi(h)||ov(h)}if(Ip(s))u=()=>K(s.useValue);else if(function Rw(s){return!(!s||!s.useFactory)}(s))u=()=>s.useFactory(...T(s.deps||[]));else if(function Ow(s){return!(!s||!s.useExisting)}(s))u=()=>Un(K(s.useExisting));else{const h=K(s&&(s.useClass||s.provide));if(!function at(s){return!!s.deps}(s))return Zi(h)||ov(h);u=()=>new h(...T(s.deps))}return u}function xu(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function Xe(s){return!!s.\u0275providers}function ue(s,o){for(const l of s)Array.isArray(l)?ue(l,o):Xe(l)?ue(l.\u0275providers,o):o(l)}class Rr{}class j1{resolveComponentFactory(o){throw function Pw(s){const o=Error(`No component factory found for ${he(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Cp=(()=>{class s{}return s.NULL=new j1,s})();function G1(){return zc(An(),Te())}function zc(s,o){return new Tp(Lr(s,o))}let Tp=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=G1,s})();function jN(s){return s instanceof Tp?s.nativeElement:s}class av{}let Bt=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Ch(){const s=Te(),l=zt(An().index,s);return(gr(l)?l:s)[11]}(),s})(),Lw=(()=>{class s{}return s.\u0275prov=nn({token:s,providedIn:"root",factory:()=>null}),s})();class On{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const bt=new On("14.2.12"),qc={};function jn(s){return s.ngOriginalError}class ze{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o);this._console.error("ERROR",o),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&jn(o);for(;l&&jn(l);)l=jn(l);return l||null}}function ma(s){return s instanceof Function?s():s}function ae(s,o,l){let u=s.length;for(;;){const h=s.indexOf(o,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const g=o.length;if(h+g===u||s.charCodeAt(h+g)<=32)return h}l=h+1}}const io="ng-template";function Z1(s,o,l){let u=0;for(;u<s.length;){let h=s[u++];if(l&&"class"===h){if(h=s[u],-1!==ae(h.toLowerCase(),o,0))return!0}else if(1===h){for(;u<s.length&&"string"==typeof(h=s[u++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function Th(s){return 4===s.type&&s.value!==io}function Mu(s,o,l){return o===(4!==s.type||l?s.value:io)}function Y1(s,o,l){let u=4;const h=s.attrs||[],g=function J1(s){for(let o=0;o<s.length;o++)if(Io(s[o]))return o;return s.length}(h);let v=!1;for(let D=0;D<o.length;D++){const E=o[D];if("number"!=typeof E){if(!v)if(4&u){if(u=2|1&u,""!==E&&!Mu(s,E,l)||""===E&&1===o.length){if(ui(u))return!1;v=!0}}else{const S=8&u?E:o[++D];if(8&u&&null!==s.attrs){if(!Z1(s.attrs,S,l)){if(ui(u))return!1;v=!0}continue}const F=Bw(8&u?"class":E,h,Th(s),l);if(-1===F){if(ui(u))return!1;v=!0;continue}if(""!==S){let $;$=F>g?"":h[F+1].toLowerCase();const ee=8&u?$:null;if(ee&&-1!==ae(ee,S,0)||2&u&&S!==$){if(ui(u))return!1;v=!0}}}}else{if(!v&&!ui(u)&&!ui(E))return!1;if(v&&ui(E))continue;v=!1,u=E|1&u}}return ui(u)||v}function ui(s){return 0==(1&s)}function Bw(s,o,l,u){if(null===o)return-1;let h=0;if(u||!l){let g=!1;for(;h<o.length;){const v=o[h];if(v===s)return h;if(3===v||6===v)g=!0;else{if(1===v||2===v){let D=o[++h];for(;"string"==typeof D;)D=o[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=g?1:2}return-1}return function xs(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const u=s[l];if("number"==typeof u)return-1;if(u===o)return l;l++}return-1}(o,s)}function Em(s,o,l=!1){for(let u=0;u<o.length;u++)if(Y1(s,o[u],l))return!0;return!1}function X1(s,o){e:for(let l=0;l<o.length;l++){const u=o[l];if(s.length===u.length){for(let h=0;h<s.length;h++)if(s[h]!==u[h])continue e;return!0}}return!1}function gl(s,o){return s?":not("+o.trim()+")":o}function Uw(s){let o=s[0],l=1,u=2,h="",g=!1;for(;l<s.length;){let v=s[l];if("string"==typeof v)if(2&u){const D=s[++l];h+="["+v+(D.length>0?'="'+D+'"':"")+"]"}else 8&u?h+="."+v:4&u&&(h+=" "+v);else""!==h&&!ui(v)&&(o+=gl(g,h),h=""),u=v,g=g||!ui(u);l++}return""!==h&&(o+=gl(g,h)),o}const kt={};function Sh(s){dv(Gt(),Te(),er()+s,!1)}function dv(s,o,l,u){if(!u)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&Do(o,g,l)}else{const g=s.preOrderHooks;null!==g&&zo(o,g,0,l)}si(l)}function _l(s,o=null,l=null,u){const h=Np(s,o,l,u);return h.resolveInjectorInitializers(),h}function Np(s,o=null,l=null,u,h=new Set){const g=[l||Ot,Ns(s)];return u=u||("object"==typeof s?void 0:he(s)),new bm(g,o||fl(),u||null,h)}let Ms=(()=>{class s{static create(l,u){if(Array.isArray(l))return _l({name:""},u,l,"");{const h=l.name??"";return _l({name:h},l.parent,l.providers,h)}}}return s.THROW_IF_NOT_FOUND=nr,s.NULL=new Ep,s.\u0275prov=nn({token:s,providedIn:"any",factory:()=>Un(nv)}),s.__NG_ELEMENT_ID__=-1,s})();function Xc(s,o=tt.Default){const l=Te();return null===l?Un(s,o):To(An(),l,K(s),o)}function Jw(){throw new Error("invalid")}function Am(s,o){return s<<17|o<<2}function so(s){return s>>17&32767}function mv(s){return 2|s}function vl(s){return(131068&s)>>2}function ku(s,o){return-131069&s|o<<2}function Gn(s){return 1|s}function Fu(s,o){const l=s.contentQueries;if(null!==l)for(let u=0;u<l.length;u+=2){const h=l[u],g=l[u+1];if(-1!==g){const v=s.data[g];$a(h),v.contentQueries(2,o[g],g)}}}function kp(s,o,l,u,h,g,v,D,E,S,M){const F=o.blueprint.slice();return F[0]=h,F[2]=76|u,(null!==M||s&&1024&s[2])&&(F[2]|=1024),ql(F),F[3]=F[15]=s,F[8]=l,F[10]=v||s&&s[10],F[11]=D||s&&s[11],F[12]=E||s&&s[12]||null,F[9]=S||s&&s[9]||null,F[6]=g,F[20]=function rp(){return ah++}(),F[21]=M,F[16]=2==o.type?s[16]:F,F}function Oo(s,o,l,u,h){let g=s.data[o];if(null===g)g=Lm(s,o,l,u,h),function qg(){return Mt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=l,g.value=u,g.attrs=h;const v=Wo();g.injectorIndex=null===v?-1:v.injectorIndex}return vi(g,!0),g}function Lm(s,o,l,u,h){const g=Xl(),v=Ba(),E=s.data[o]=function wl(s,o,l,u,h,g){return{type:l,index:u,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,l,o,u,h);return null===s.firstChild&&(s.firstChild=E),null!==g&&(v?null==g.child&&null!==E.parent&&(g.child=E):null===g.next&&(g.next=E)),E}function nd(s,o,l,u){if(0===l)return-1;const h=o.length;for(let g=0;g<l;g++)o.push(u),s.blueprint.push(u),s.data.push(null);return h}function rd(s,o,l){nu(o);try{const u=s.viewQuery;null!==u&&Vu(1,u,l);const h=s.template;null!==h&&fD(s,o,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Fu(s,o),s.staticViewQueries&&Vu(2,s.viewQuery,l);const g=s.components;null!==g&&function td(s,o){for(let l=0;l<o.length;l++)wD(s,o[l])}(o,g)}catch(u){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),u}finally{o[2]&=-5,bo()}}function Vm(s,o,l,u){const h=o[2];if(128!=(128&h)){nu(o);try{ql(o),function _c(s){return Mt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&fD(s,o,l,2,u);const v=3==(3&h);if(v){const S=s.preOrderCheckHooks;null!==S&&Do(o,S,null)}else{const S=s.preOrderHooks;null!==S&&zo(o,S,0,null),Gd(o,0)}if(function vD(s){for(let o=Vc(s);null!==o;o=Bc(o)){if(!o[2])continue;const l=o[9];for(let u=0;u<l.length;u++){const h=l[u],g=h[3];0==(512&h[2])&&Cn(g,1),h[2]|=512}}}(o),function yD(s){for(let o=Vc(s);null!==o;o=Bc(o))for(let l=10;l<o.length;l++){const u=o[l],h=u[1];yo(u)&&Vm(h,u,h.template,u[8])}}(o),null!==s.contentQueries&&Fu(s,o),v){const S=s.contentCheckHooks;null!==S&&Do(o,S)}else{const S=s.contentHooks;null!==S&&zo(o,S,1),Gd(o,1)}!function Oh(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let u=0;u<l.length;u++){const h=l[u];if(h<0)si(~h);else{const g=h,v=l[++u],D=l[++u];Kg(v,g),D(2,o[g])}}}finally{si(-1)}}(s,o);const D=s.components;null!==D&&function hD(s,o){for(let l=0;l<o.length;l++)bD(s,o[l])}(o,D);const E=s.viewQuery;if(null!==E&&Vu(2,E,u),v){const S=s.viewCheckHooks;null!==S&&Do(o,S)}else{const S=s.viewHooks;null!==S&&zo(o,S,2),Gd(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Cn(o[3],-1))}finally{bo()}}}function fD(s,o,l,u,h){const g=er(),v=2&u;try{si(-1),v&&o.length>22&&dv(s,o,22,!1),l(u,h)}finally{si(g)}}function Rh(s,o,l){!ms()||(function uC(s,o,l,u){const h=l.directiveStart,g=l.directiveEnd;s.firstCreatePass||Co(l,o),Yr(u,o);const v=l.initialInputs;for(let D=h;D<g;D++){const E=s.data[D],S=Fr(E);S&&cC(o,l,E);const M=ys(o,s,D,l);Yr(M,o),null!==v&&Hm(0,D-h,M,E,0,v),S&&(zt(l.index,o)[8]=M)}}(s,o,l,Lr(l,o)),128==(128&l.flags)&&function is(s,o,l){const u=l.directiveStart,h=l.directiveEnd,g=l.index,v=function yc(){return Mt.lFrame.currentDirectiveIndex}();try{si(g);for(let D=u;D<h;D++){const E=s.data[D],S=o[D];eu(D),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&Av(E,S)}}finally{si(-1),eu(v)}}(s,o,l))}function kh(s,o,l=Lr){const u=o.localNames;if(null!==u){let h=o.index+1;for(let g=0;g<u.length;g+=2){const v=u[g+1],D=-1===v?l(o,s):s[v];s[h++]=D}}}function Iv(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Cv(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Cv(s,o,l,u,h,g,v,D,E,S){const M=22+u,F=M+h,$=function Pp(s,o){const l=[];for(let u=0;u<o;u++)l.push(u<s?null:kt);return l}(M,F),ee="function"==typeof S?S():S;return $[1]={type:s,blueprint:$,template:l,queries:null,viewQuery:D,declTNode:o,data:$.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:E,consts:ee,incompleteFirstPass:!1}}function id(s,o,l,u){const h=ED(o);null===l?h.push(u):(h.push(l),s.firstCreatePass&&lr(s).push(u,h.length-1))}function Tv(s,o,l){for(let u in s)if(s.hasOwnProperty(u)){const h=s[u];(l=null===l?{}:l).hasOwnProperty(u)?l[u].push(o,h):l[u]=[o,h]}return l}function Sv(s,o){const u=o.directiveEnd,h=s.data,g=o.attrs,v=[];let D=null,E=null;for(let S=o.directiveStart;S<u;S++){const M=h[S],F=M.inputs,$=null===g||Th(o)?null:Lp(F,g);v.push($),D=Tv(F,S,D),E=Tv(M.outputs,S,E)}null!==D&&(D.hasOwnProperty("class")&&(o.flags|=16),D.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=D,o.outputs=E}function Jr(s,o,l,u,h,g,v,D){const E=Lr(o,l);let M,S=o.inputs;!D&&null!=S&&(M=S[u])?(sd(s,l,M,u,h),Fa(o)&&Bm(l,o.index)):3&o.type&&(u=function gD(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(u),h=null!=v?v(h,o.value||"",u):h,g.setProperty(E,u,h))}function Bm(s,o){const l=zt(o,s);16&l[2]||(l[2]|=32)}function Um(s,o,l,u){let h=!1;if(ms()){const g=function Fp(s,o,l){const u=s.directiveRegistry;let h=null;if(u)for(let g=0;g<u.length;g++){const v=u[g];Em(l,v.selectors,!1)&&(h||(h=[]),Qs(Co(l,o),s,v.type),Fr(v)?(xv(s,l),h.unshift(v)):h.push(v))}return h}(s,o,l),v=null===u?null:{"":-1};if(null!==g){h=!0,Ph(l,s.data.length,g.length);for(let M=0;M<g.length;M++){const F=g[M];F.providersResolver&&F.providersResolver(F)}let D=!1,E=!1,S=nd(s,o,g.length,null);for(let M=0;M<g.length;M++){const F=g[M];l.mergedAttrs=Wa(l.mergedAttrs,F.hostAttrs),_D(s,l,o,S,F),mD(S,F,v),null!==F.contentQueries&&(l.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(l.flags|=128);const $=F.type.prototype;!D&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),D=!0),!E&&($.ngOnChanges||$.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),E=!0),S++}Sv(s,l)}v&&function wa(s,o,l){if(o){const u=s.localNames=[];for(let h=0;h<o.length;h+=2){const g=l[o[h+1]];if(null==g)throw new De(-301,!1);u.push(o[h],g)}}}(l,u,v)}return l.mergedAttrs=Wa(l.mergedAttrs,l.attrs),h}function Nv(s,o,l,u,h,g){const v=g.hostBindings;if(v){let D=s.hostBindingOpCodes;null===D&&(D=s.hostBindingOpCodes=[]);const E=~o.index;(function Lu(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(D)!=E&&D.push(E),D.push(u,h,v)}}function Av(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function xv(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function mD(s,o,l){if(l){if(o.exportAs)for(let u=0;u<o.exportAs.length;u++)l[o.exportAs[u]]=s;Fr(o)&&(l[""]=s)}}function Ph(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function _D(s,o,l,u,h){s.data[u]=h;const g=h.factory||(h.factory=Zi(h.type)),v=new Ys(g,Fr(h),Xc);s.blueprint[u]=v,l[u]=v,Nv(s,o,0,u,nd(s,l,h.hostVars,kt),h)}function cC(s,o,l){const u=Lr(o,s),h=Iv(l),g=s[10],v=Gm(s,kp(s,h,null,l.onPush?32:16,u,o,g,g.createRenderer(u,l),null,null,null));s[o.index]=v}function Mv(s,o,l,u,h,g,v){if(null==g)s.removeAttribute(o,h,l);else{const D=null==v?ye(g):v(g,u||"",h);s.setAttribute(o,h,D,l)}}function Hm(s,o,l,u,h,g){const v=g[o];if(null!==v){const D=u.setInput;for(let E=0;E<v.length;){const S=v[E++],M=v[E++],F=v[E++];null!==D?u.setInput(l,F,S,M):l[M]=F}}}function Lp(s,o){let l=null,u=0;for(;u<o.length;){const h=o[u];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===l&&(l=[]),l.push(h,s[h],o[u+1])),u+=2}else u+=2;else u+=4}return l}function Vp(s,o,l,u){return new Array(s,!0,!1,o,null,0,u,l,null,null)}function bD(s,o){const l=zt(o,s);if(yo(l)){const u=l[1];48&l[2]?Vm(u,l,u.template,l[8]):l[5]>0&&Ov(l)}}function Ov(s){for(let u=Vc(s);null!==u;u=Bc(u))for(let h=10;h<u.length;h++){const g=u[h];if(yo(g))if(512&g[2]){const v=g[1];Vm(v,g,v.template,g[8])}else g[5]>0&&Ov(g)}const l=s[1].components;if(null!==l)for(let u=0;u<l.length;u++){const h=zt(l[u],s);yo(h)&&h[5]>0&&Ov(h)}}function wD(s,o){const l=zt(o,s),u=l[1];(function DD(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(u,l),rd(u,l,l[8])}function Gm(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Rv(s){for(;s;){s[2]|=32;const o=ol(s);if(Ff(s)&&!o)return s;s=o}return null}function $m(s,o,l,u=!0){const h=o[10];h.begin&&h.begin();try{Vm(s,o,s.template,l)}catch(v){throw u&&kv(o,v),v}finally{h.end&&h.end()}}function Vu(s,o,l){$a(0),o(s,l)}function ED(s){return s[7]||(s[7]=[])}function lr(s){return s.cleanup||(s.cleanup=[])}function kv(s,o){const l=s[9],u=l?l.get(ze,null):null;u&&u.handleError(o)}function sd(s,o,l,u,h){for(let g=0;g<l.length;){const v=l[g++],D=l[g++],E=o[v],S=s.data[v];null!==S.setInput?S.setInput(E,h,u,D):E[D]=h}}function Fh(s,o,l){let u=l?s.styles:null,h=l?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const D=o[v];"number"==typeof D?g=D:1==g?h=fe(h,D):2==g&&(u=fe(u,D+": "+o[++v]+";"))}l?s.styles=u:s.stylesWithoutHost=u,l?s.classes=h:s.classesWithoutHost=h}function Bp(s,o,l,u,h=!1){for(;null!==l;){const g=o[l.index];if(null!==g&&u.push(Nn(g)),Kr(g))for(let D=10;D<g.length;D++){const E=g[D],S=E[1].firstChild;null!==S&&Bp(E[1],E,S,u)}const v=l.type;if(8&v)Bp(s,o,l.child,u);else if(32&v){const D=dh(l,o);let E;for(;E=D();)u.push(E)}else if(16&v){const D=hp(o,l);if(Array.isArray(D))u.push(...D);else{const E=ol(o[16]);Bp(E[1],E,D,u,!0)}}l=h?l.projectionNext:l.next}return u}class Dl{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return Bp(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Kr(o)){const l=o[8],u=l?l.indexOf(this):-1;u>-1&&(ll(o,u),Ji(l,u))}this._attachedToViewContainer=!1}gh(this._lView[1],this._lView)}onDestroy(o){id(this._lView[1],this._lView,null,o)}markForCheck(){Rv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){$m(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new De(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function fh(s,o){Iu(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new De(902,!1);this._appRef=o}}class ID extends Dl{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;$m(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class zm extends Cp{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=Q(o);return new El(l,this.ngModule)}}function Pv(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}class fC{constructor(o,l){this.injector=o,this.parentInjector=l}get(o,l,u){const h=this.injector.get(o,qc,u);return h!==qc||l===qc?h:this.parentInjector.get(o,l,u)}}class El extends Rr{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function Yc(s){return s.map(Uw).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return Pv(this.componentDef.inputs)}get outputs(){return Pv(this.componentDef.outputs)}create(o,l,u,h){let g=(h=h||this.ngModule)instanceof ns?h:h?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new fC(o,g):o,D=v.get(av,null);if(null===D)throw new De(407,!1);const E=v.get(Lw,null),S=D.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",F=u?function pD(s,o,l){return s.selectRootElement(o,l===pt.ShadowDom)}(S,u,this.componentDef.encapsulation):xr(S,M,function hC(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(M)),$=this.componentDef.onPush?288:272,ee=Cv(0,null,null,1,0,null,null,null,null,null),ve=kp(null,ee,null,$,null,null,D,S,E,v,null);let Re,Ze;nu(ve);try{const ct=function SD(s,o,l,u,h,g){const v=l[1];l[22]=s;const E=Oo(v,22,2,"#host",null),S=E.mergedAttrs=o.hostAttrs;null!==S&&(Fh(E,S,!0),null!==s&&(Zo(h,s,S),null!==E.classes&&un(h,s,E.classes),null!==E.styles&&Cs(h,s,E.styles)));const M=u.createRenderer(s,o),F=kp(l,Iv(o),null,o.onPush?32:16,l[22],E,u,M,g||null,null,null);return v.firstCreatePass&&(Qs(Co(E,l),v,o.type),xv(v,E),Ph(E,l.length,1)),Gm(l,F),l[22]=F}(F,this.componentDef,ve,D,S);if(F)if(u)Zo(S,F,["ng-version",bt.full]);else{const{attrs:It,classes:Ae}=function Hw(s){const o=[],l=[];let u=1,h=2;for(;u<s.length;){let g=s[u];if("string"==typeof g)2===h?""!==g&&o.push(g,s[++u]):8===h&&l.push(g);else{if(!ui(h))break;h=g}u++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);It&&Zo(S,F,It),Ae&&Ae.length>0&&un(S,F,Ae.join(" "))}if(Ze=$o(ee,22),void 0!==l){const It=Ze.projection=[];for(let Ae=0;Ae<this.ngContentSelectors.length;Ae++){const Nt=l[Ae];It.push(null!=Nt?Array.from(Nt):null)}}Re=function pC(s,o,l,u){const h=l[1],g=function on(s,o,l){const u=An();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),_D(s,u,o,nd(s,o,1,null),l),Sv(s,u));const h=ys(o,s,u.directiveStart,u);Yr(h,o);const g=Lr(u,o);return g&&Yr(g,o),h}(h,l,o);if(s[8]=l[8]=g,null!==u)for(const D of u)D(g,o);if(o.contentQueries){const D=An();o.contentQueries(1,g,D.directiveStart)}const v=An();return!h.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(si(v.index),Nv(l[1],v,0,v.directiveStart,v.directiveEnd,o),Av(o,g)),g}(ct,this.componentDef,ve,[ND]),rd(ee,ve,null)}finally{bo()}return new CD(this.componentType,Re,zc(Ze,ve),ve,Ze)}}class CD extends class Me{}{constructor(o,l,u,h,g){super(),this.location=u,this._rootLView=h,this._tNode=g,this.instance=l,this.hostView=this.changeDetectorRef=new ID(h),this.componentType=o}setInput(o,l){const u=this._tNode.inputs;let h;if(null!==u&&(h=u[o])){const g=this._rootLView;sd(g[1],g,h,o,l),Bm(g,this._tNode.index)}}get injector(){return new So(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function ND(){const s=An();su(Te()[1],s)}function Lv(s){let o=function AD(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const u=[s];for(;o;){let h;if(Fr(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new De(903,!1);h=o.\u0275dir}if(h){if(l){u.push(h);const v=s;v.inputs=Bu(s.inputs),v.declaredInputs=Bu(s.declaredInputs),v.outputs=Bu(s.outputs);const D=h.hostBindings;D&&mC(s,D);const E=h.viewQuery,S=h.contentQueries;if(E&&Lh(s,E),S&&xD(s,S),ce(s.inputs,h.inputs),ce(s.declaredInputs,h.declaredInputs),ce(s.outputs,h.outputs),Fr(h)&&h.data.animation){const M=s.data;M.animation=(M.animation||[]).concat(h.data.animation)}}const g=h.features;if(g)for(let v=0;v<g.length;v++){const D=g[v];D&&D.ngInherit&&D(s),D===Lv&&(l=!1)}}o=Object.getPrototypeOf(o)}!function gC(s){let o=0,l=null;for(let u=s.length-1;u>=0;u--){const h=s[u];h.hostVars=o+=h.hostVars,h.hostAttrs=Wa(h.hostAttrs,l=Wa(l,h.hostAttrs))}}(u)}function Bu(s){return s===ni?{}:s===Ot?[]:s}function Lh(s,o){const l=s.viewQuery;s.viewQuery=l?(u,h)=>{o(u,h),l(u,h)}:o}function xD(s,o){const l=s.contentQueries;s.contentQueries=l?(u,h,g)=>{o(u,h,g),l(u,h,g)}:o}function mC(s,o){const l=s.hostBindings;s.hostBindings=l?(u,h)=>{o(u,h),l(u,h)}:o}let Up=null;function Ei(){if(!Up){const s=an.Symbol;if(s&&s.iterator)Up=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const u=o[l];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Up=u)}}}return Up}function Uu(s){return!!Vv(s)&&(Array.isArray(s)||!(s instanceof Map)&&Ei()in s)}function Vv(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Da(s,o,l){return s[o]=l}function Ii(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function od(s,o,l,u){const h=Ii(s,o,l);return Ii(s,o+1,u)||h}function Bv(s,o,l,u){const h=Te();return Ii(h,vo(),o)&&(Gt(),function At(s,o,l,u,h,g){const v=Lr(s,o);Mv(o[11],v,g,s.value,l,u,h)}(mn(),h,s,o,l,u)),Bv}function Bh(s,o,l,u){return Ii(s,vo(),l)?o+ye(l)+u:kt}function Hu(s,o,l,u,h,g,v,D){const E=Te(),S=Gt(),M=s+22,F=S.firstCreatePass?function Jm(s,o,l,u,h,g,v,D,E){const S=o.consts,M=Oo(o,s,4,v||null,Pi(S,D));Um(o,l,M,Pi(S,E)),su(o,M);const F=M.tViews=Cv(2,M,u,h,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,M),F.queries=o.queries.embeddedTView(M)),M}(M,S,E,o,l,u,h,g,v):S.data[M];vi(F,!1);const $=E[11].createComment("");no(S,E,$,F),Yr($,E),Gm(E,E[M]=Vp($,E,$,F)),lc(F)&&Rh(S,E,F),null!=v&&kh(E,F,D)}function ju(s){return function gs(s,o){return s[o]}(function mc(){return Mt.lFrame.contextLView}(),22+s)}function dd(s,o,l){const u=Te();return Ii(u,vo(),o)&&Jr(Gt(),mn(),u,s,o,u[11],l,!1),dd}function Xm(s,o,l,u,h){const v=h?"class":"style";sd(s,l,o.inputs[v],v,u)}function $h(s,o,l,u){const h=Te(),g=Gt(),v=22+s,D=h[11],E=h[v]=xr(D,o,function iu(){return Mt.lFrame.currentNamespace}()),S=g.firstCreatePass?function Hv(s,o,l,u,h,g,v){const D=o.consts,S=Oo(o,s,2,h,Pi(D,g));return Um(o,l,S,Pi(D,v)),null!==S.attrs&&Fh(S,S.attrs,!1),null!==S.mergedAttrs&&Fh(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(v,g,h,0,o,l,u):g.data[v];vi(S,!0);const M=S.mergedAttrs;null!==M&&Zo(D,E,M);const F=S.classes;null!==F&&un(D,E,F);const $=S.styles;return null!==$&&Cs(D,E,$),64!=(64&S.flags)&&no(g,h,E,S),0===function Zl(){return Mt.lFrame.elementDepthCount}()&&Yr(E,h),function Yl(){Mt.lFrame.elementDepthCount++}(),lc(S)&&(Rh(g,h,S),function Rn(s,o,l){if(Ul(o)){const h=o.directiveEnd;for(let g=o.directiveStart;g<h;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,l[g],g)}}}(g,S,h)),null!==u&&kh(h,S),$h}function jp(){let s=An();Ba()?Ua():(s=s.parent,vi(s,!1));const o=s;!function fc(){Mt.lFrame.elementDepthCount--}();const l=Gt();return l.firstCreatePass&&(su(l,s),Ul(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function lu(s){return 0!=(16&s.flags)}(o)&&Xm(l,o,Te(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Wd(s){return 0!=(32&s.flags)}(o)&&Xm(l,o,Te(),o.stylesWithoutHost,!1),jp}function e_(s,o,l,u){return $h(s,o,l,u),jp(),e_}function Wh(){return Te()}function Cl(s){return!!s&&"function"==typeof s.then}function FD(s){return!!s&&"function"==typeof s.subscribe}const jv=FD;function Gv(s,o,l,u){const h=Te(),g=Gt(),v=An();return function zh(s,o,l,u,h,g,v,D){const E=lc(u),M=s.firstCreatePass&&lr(s),F=o[8],$=ED(o);let ee=!0;if(3&u.type||D){const Ze=Lr(u,o),ct=D?D(Ze):Ze,It=$.length,Ae=D?cn=>D(Nn(cn[u.index])):u.index;let Nt=null;if(!D&&E&&(Nt=function DC(s,o,l,u){const h=s.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const v=h[g];if(v===l&&h[g+1]===u){const D=o[7],E=h[g+2];return D.length>E?D[E]:null}"string"==typeof v&&(g+=2)}return null}(s,o,h,u.index)),null!==Nt)(Nt.__ngLastListenerFn__||Nt).__ngNextListenerFn__=g,Nt.__ngLastListenerFn__=g,ee=!1;else{g=Tl(u,o,F,g,!1);const cn=l.listen(ct,h,g);$.push(g,cn),M&&M.push(h,Ae,It,It+1)}}else g=Tl(u,o,F,g,!1);const ve=u.outputs;let Re;if(ee&&null!==ve&&(Re=ve[h])){const Ze=Re.length;if(Ze)for(let ct=0;ct<Ze;ct+=2){const kn=o[Re[ct]][Re[ct+1]].subscribe(g),Ml=$.length;$.push(g,kn),M&&M.push(h,u.index,Ml,-(Ml+1))}}}(g,h,h[11],v,s,o,0,u),Gv}function Gu(s,o,l,u){try{return!1!==l(u)}catch(h){return kv(s,h),!1}}function Tl(s,o,l,u,h){return function g(v){if(v===Function)return u;Rv(2&s.flags?zt(s.index,o):o);let E=Gu(o,0,u,v),S=g.__ngNextListenerFn__;for(;S;)E=Gu(o,0,S,v)&&E,S=S.__ngNextListenerFn__;return h&&!1===E&&(v.preventDefault(),v.returnValue=!1),E}}function $v(s=1){return function wo(s){return(Mt.lFrame.contextLView=function ru(s,o){for(;s>0;)o=o[15],s--;return o}(s,Mt.lFrame.contextLView))[8]}(s)}function EC(s,o){let l=null;const u=function Q1(s){const o=s.attrs;if(null!=o){const l=o.indexOf(5);if(0==(1&l))return o[l+1]}return null}(s);for(let h=0;h<o.length;h++){const g=o[h];if("*"!==g){if(null===u?Em(s,g,!0):X1(u,g))return h}else l=h}return l}function Wv(s){const o=Te()[16][6];if(!o.projection){const u=o.projection=eo(s?s.length:1,null),h=u.slice();let g=o.child;for(;null!==g;){const v=s?EC(g,s):0;null!==v&&(h[v]?h[v].projectionNext=g:u[v]=g,h[v]=g),g=g.next}}}function VD(s,o=0,l){const u=Te(),h=Gt(),g=Oo(h,22+s,16,null,l||null);null===g.projection&&(g.projection=o),Ua(),64!=(64&g.flags)&&function ir(s,o,l){ts(o[11],0,o,l,ca(s,l,o),lm(l.parent||o[6],l,o))}(h,u,g)}function $p(s,o,l){return qh(s,"",o,"",l),$p}function qh(s,o,l,u,h){const g=Te(),v=Bh(g,o,l,u);return v!==kt&&Jr(Gt(),mn(),g,s,v,g[11],h,!1),qh}function Kp(s,o,l,u,h){const g=s[l+1],v=null===o;let D=u?so(g):vl(g),E=!1;for(;0!==D&&(!1===E||v);){const M=s[D+1];Zp(s[D],o)&&(E=!0,s[D+1]=u?Gn(M):mv(M)),D=u?so(M):vl(M)}E&&(s[l+1]=u?mv(g):Gn(g))}function Zp(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&li(s,o)>=0}const kr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Kv(s){return s.substring(kr.key,kr.keyEnd)}function Yp(s,o){const l=kr.textEnd;return l===o?-1:(o=kr.keyEnd=function jD(s,o,l){for(;o<l&&s.charCodeAt(o)>32;)o++;return o}(s,kr.key=o,l),Ro(s,o,l))}function Ro(s,o,l){for(;o<l&&s.charCodeAt(o)<=32;)o++;return o}function a_(s,o,l){return ao(s,o,l,!1),a_}function Qv(s,o){return ao(s,o,null,!0),Qv}function $D(s){!function ko(s,o,l,u){const h=Gt(),g=_s(2);h.firstUpdatePass&&WD(h,null,g,u);const v=Te();if(l!==kt&&Ii(v,g,l)){const D=h.data[er()];if(YD(D,u)&&!Jv(h,g)){let E=u?D.classesWithoutHost:D.stylesWithoutHost;null!==E&&(l=fe(E,l||"")),Xm(h,D,v,l,u)}else!function CC(s,o,l,u,h,g,v,D){h===kt&&(h=Ot);let E=0,S=0,M=0<h.length?h[0]:null,F=0<g.length?g[0]:null;for(;null!==M||null!==F;){const $=E<h.length?h[E+1]:void 0,ee=S<g.length?g[S+1]:void 0;let Re,ve=null;M===F?(E+=2,S+=2,$!==ee&&(ve=F,Re=ee)):null===F||null!==M&&M<F?(E+=2,ve=M):(S+=2,ve=F,Re=ee),null!==ve&&u_(s,o,l,u,ve,Re,v,D),M=E<h.length?h[E]:null,F=S<g.length?g[S]:null}}(h,D,v,v[11],v[g+1],v[g+1]=function KD(s,o,l){if(null==l||""===l)return Ot;const u=[],h=or(l);if(Array.isArray(h))for(let g=0;g<h.length;g++)s(u,h[g],!0);else if("object"==typeof h)for(const g in h)h.hasOwnProperty(g)&&s(u,g,h[g]);else"string"==typeof h&&o(u,h);return u}(s,o,l),u,g)}}(ai,Os,s,!0)}function Os(s,o){for(let l=function HD(s){return function Sl(s){kr.key=0,kr.keyEnd=0,kr.value=0,kr.valueEnd=0,kr.textEnd=s.length}(s),Yp(s,Ro(s,0,kr.textEnd))}(o);l>=0;l=Yp(o,l))ai(s,Kv(o),!0)}function ao(s,o,l,u){const h=Te(),g=Gt(),v=_s(2);g.firstUpdatePass&&WD(g,s,v,u),o!==kt&&Ii(h,v,o)&&u_(g,g.data[er()],h,h[11],s,h[v+1]=function TC(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=he(or(s)))),s}(o,l),u,v)}function Jv(s,o){return o>=s.expandoStartIndex}function WD(s,o,l,u){const h=s.data;if(null===h[l+1]){const g=h[er()],v=Jv(s,l);YD(g,u)&&null===o&&!v&&(o=!1),o=function zD(s,o,l,u){const h=function Ga(s){const o=Mt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=u?o.residualClasses:o.residualStyles;if(null===h)0===(u?o.classBindings:o.styleBindings)&&(l=Jp(l=l_(null,s,o,l,u),o.attrs,u),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==h)if(l=l_(h,s,o,l,u),null===g){let E=function pd(s,o,l){const u=l?o.classBindings:o.styleBindings;if(0!==vl(u))return s[so(u)]}(s,o,u);void 0!==E&&Array.isArray(E)&&(E=l_(null,s,o,E[1],u),E=Jp(E,o.attrs,u),function Qp(s,o,l,u){s[so(l?o.classBindings:o.styleBindings)]=u}(s,o,u,E))}else g=function qD(s,o,l){let u;const h=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<h;g++)u=Jp(u,s[g].hostAttrs,l);return Jp(u,o.attrs,l)}(s,o,u)}return void 0!==g&&(u?o.residualClasses=g:o.residualStyles=g),l}(h,g,o,u),function UD(s,o,l,u,h,g){let v=g?o.classBindings:o.styleBindings,D=so(v),E=vl(v);s[u]=l;let M,S=!1;if(Array.isArray(l)){const F=l;M=F[1],(null===M||li(F,M)>0)&&(S=!0)}else M=l;if(h)if(0!==E){const $=so(s[D+1]);s[u+1]=Am($,D),0!==$&&(s[$+1]=ku(s[$+1],u)),s[D+1]=function tD(s,o){return 131071&s|o<<17}(s[D+1],u)}else s[u+1]=Am(D,0),0!==D&&(s[D+1]=ku(s[D+1],u)),D=u;else s[u+1]=Am(E,0),0===D?D=u:s[E+1]=ku(s[E+1],u),E=u;S&&(s[u+1]=mv(s[u+1])),Kp(s,M,u,!0),Kp(s,M,u,!1),function qp(s,o,l,u,h){const g=h?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&li(g,o)>=0&&(l[u+1]=Gn(l[u+1]))}(o,M,s,u,g),v=Am(D,E),g?o.classBindings=v:o.styleBindings=v}(h,g,o,l,v,u)}}function l_(s,o,l,u,h){let g=null;const v=l.directiveEnd;let D=l.directiveStylingLast;for(-1===D?D=l.directiveStart:D++;D<v&&(g=o[D],u=Jp(u,g.hostAttrs,h),g!==s);)D++;return null!==s&&(l.directiveStylingLast=D),u}function Jp(s,o,l){const u=l?1:2;let h=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?h=v:h===u&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),ai(s,v,!!l||o[++g]))}return void 0===s?null:s}function u_(s,o,l,u,h,g,v,D){if(!(3&o.type))return;const E=s.data,S=E[D+1];c_(function nD(s){return 1==(1&s)}(S)?Gr(E,o,l,h,vl(S),v):void 0)||(c_(g)||function eD(s){return 2==(2&s)}(S)&&(g=Gr(E,null,l,h,D,v)),function vh(s,o,l,u,h){if(o)h?s.addClass(l,u):s.removeClass(l,u);else{let g=-1===u.indexOf("-")?void 0:Is.DashCase;null==h?s.removeStyle(l,u,g):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),g|=Is.Important),s.setStyle(l,u,h,g))}}(u,v,yi(er(),l),h,g))}function Gr(s,o,l,u,h,g){const v=null===o;let D;for(;h>0;){const E=s[h],S=Array.isArray(E),M=S?E[1]:E,F=null===M;let $=l[h+1];$===kt&&($=F?Ot:void 0);let ee=F?Es($,u):M===u?$:void 0;if(S&&!c_(ee)&&(ee=Es(E,u)),c_(ee)&&(D=ee,v))return D;const ve=s[h+1];h=v?so(ve):vl(ve)}if(null!==o){let E=g?o.residualClasses:o.residualStyles;null!=E&&(D=Es(E,u))}return D}function c_(s){return void 0!==s}function YD(s,o){return 0!=(s.flags&(o?16:32))}function QD(s,o=""){const l=Te(),u=Gt(),h=s+22,g=u.firstCreatePass?Oo(u,h,1,o,null):u.data[h],v=l[h]=hh(l[11],o);no(u,l,v,g),vi(g,!1)}function d_(s,o,l){const u=Te(),h=Bh(u,s,o,l);return h!==kt&&function Xr(s,o,l){const u=yi(o,s);Du(s[11],u,l)}(u,er(),h),d_}function Xh(s,o,l){const u=Te();return Ii(u,vo(),o)&&Jr(Gt(),mn(),u,s,o,u[11],l,!0),Xh}const Nl=void 0;var uE=["en",[["a","p"],["AM","PM"],Nl],[["AM","PM"],Nl,Nl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Nl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Nl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Nl,"{1} 'at' {0}",Nl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function a0(s){const l=Math.floor(Math.abs(s)),u=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===u?1:5}];let ef={};function l0(s){const o=function d0(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=u0(o);if(l)return l;const u=o.split("-")[0];if(l=u0(u),l)return l;if("en"===u)return uE;throw new De(701,!1)}function cE(s){return l0(s)[Et.PluralCase]}function u0(s){return s in ef||(ef[s]=an.ng&&an.ng.common&&an.ng.common.locales&&an.ng.common.locales[s]),ef[s]}var Et=(()=>((Et=Et||{})[Et.LocaleId=0]="LocaleId",Et[Et.DayPeriodsFormat=1]="DayPeriodsFormat",Et[Et.DayPeriodsStandalone=2]="DayPeriodsStandalone",Et[Et.DaysFormat=3]="DaysFormat",Et[Et.DaysStandalone=4]="DaysStandalone",Et[Et.MonthsFormat=5]="MonthsFormat",Et[Et.MonthsStandalone=6]="MonthsStandalone",Et[Et.Eras=7]="Eras",Et[Et.FirstDayOfWeek=8]="FirstDayOfWeek",Et[Et.WeekendRange=9]="WeekendRange",Et[Et.DateFormat=10]="DateFormat",Et[Et.TimeFormat=11]="TimeFormat",Et[Et.DateTimeFormat=12]="DateTimeFormat",Et[Et.NumberSymbols=13]="NumberSymbols",Et[Et.NumberFormats=14]="NumberFormats",Et[Et.CurrencyCode=15]="CurrencyCode",Et[Et.CurrencySymbol=16]="CurrencySymbol",Et[Et.CurrencyName=17]="CurrencyName",Et[Et.Currencies=18]="Currencies",Et[Et.Directionality=19]="Directionality",Et[Et.PluralCase=20]="PluralCase",Et[Et.ExtraData=21]="ExtraData",Et))();const dE=["zero","one","two","few","many"],tf="en-US",b_={marker:"element"},nf={marker:"ICU"};var ur=(()=>((ur=ur||{})[ur.SHIFT=2]="SHIFT",ur[ur.APPEND_EAGERLY=1]="APPEND_EAGERLY",ur[ur.COMMENT=2]="COMMENT",ur))();let rf=tf;function w_(s){(function jt(s,o){null==s&&et(o,s,null,"!=")})(s,"Expected localeId to be defined"),"string"==typeof s&&(rf=s.toLowerCase().replace(/_/g,"-"))}function D_(s,o,l){const u=o.insertBeforeIndex,h=Array.isArray(u)?u[0]:u;return null===h?ha(s,0,l):Nn(l[h])}function ng(s,o,l,u,h){const g=o.insertBeforeIndex;if(Array.isArray(g)){let v=u,D=null;if(3&o.type||(D=v,v=h),null!==v&&0==(2&o.flags))for(let E=1;E<g.length;E++)da(s,v,l[g[E]],D,!1)}}function af(s,o){if(s.push(o),s.length>1)for(let l=s.length-2;l>=0;l--){const u=s[l];E_(u)||hE(u,o)&&null===h0(u)&&f0(u,o.index)}}function E_(s){return!(64&s.type)}function hE(s,o){return E_(o)||s.index>o.index}function h0(s){const o=s.insertBeforeIndex;return Array.isArray(o)?o[0]:o}function f0(s,o){const l=s.insertBeforeIndex;Array.isArray(l)?l[0]=o:(cl(D_,ng),s.insertBeforeIndex=o)}function Rs(s,o){const l=s.data[o];return null===l||"string"==typeof l?null:l.hasOwnProperty("currentCaseLViewIndex")?l:l.value}function p0(s,o,l){const u=Lm(s,l,64,null,null);return af(o,u),u}function I_(s,o){const l=o[s.currentCaseLViewIndex];return null===l?l:l<0?~l:l}function C_(s){return s>>>17}function pE(s){return(131070&s)>>>1}let gd=0,lf=0;function gE(s,o,l,u){const h=l[11];let v,g=null;for(let D=0;D<o.length;D++){const E=o[D];if("string"==typeof E){const S=o[++D];null===l[S]&&(l[S]=hh(h,E))}else if("number"==typeof E)switch(1&E){case 0:const S=C_(E);let M,F;if(null===g&&(g=S,v=Mo(h,u)),S===g?(M=u,F=v):(M=null,F=Nn(l[S])),null!==F){const Re=pE(E);da(h,F,l[Re],M,!1);const ct=Rs(s,Re);if(null!==ct&&"object"==typeof ct){const It=I_(ct,l);null!==It&&gE(s,ct.create[It],l,l[ct.anchorIdx])}}break;case 1:const ee=o[++D],ve=o[++D];Mv(h,yi(E>>>1,l),null,null,ee,ve,null)}else switch(E){case nf:const S=o[++D],M=o[++D];null===l[M]&&Yr(l[M]=im(h,S),l);break;case b_:const F=o[++D],$=o[++D];null===l[$]&&Yr(l[$]=xr(h,F,null),l)}}}function m0(s,o,l,u,h){for(let g=0;g<l.length;g++){const v=l[g],D=l[++g];if(v&h){let E="";for(let S=g+1;S<=g+D;S++){const M=l[S];if("string"==typeof M)E+=M;else if("number"==typeof M)if(M<0)E+=ye(o[u-M]);else{const F=M>>>2;switch(3&M){case 1:const $=l[++S],ee=l[++S],ve=s.data[F];"string"==typeof ve?Mv(o[11],o[F],null,ve,$,E,ee):Jr(s,ve,o,$,E,o[11],ee,!1);break;case 0:const Re=o[F];null!==Re&&Du(o[11],Re,E);break;case 2:FC(s,Rs(s,F),o,E);break;case 3:_0(s,Rs(s,F),u,o)}}}}else{const E=l[g+1];if(E>0&&3==(3&E)){const M=Rs(s,E>>>2);o[M.currentCaseLViewIndex]<0&&_0(s,M,u,o)}}g+=D}}function _0(s,o,l,u){let h=u[o.currentCaseLViewIndex];if(null!==h){let g=gd;h<0&&(h=u[o.currentCaseLViewIndex]=~h,g=-1),m0(s,u,o.update[h],l,g)}}function FC(s,o,l,u){const h=function LC(s,o){let l=s.cases.indexOf(o);if(-1===l)switch(s.type){case 1:{const u=function OC(s,o){const l=cE(o)(parseInt(s,10)),u=dE[l];return void 0!==u?u:"other"}(o,function sf(){return rf}());l=s.cases.indexOf(u),-1===l&&"other"!==u&&(l=s.cases.indexOf("other"));break}case 0:l=s.cases.indexOf("other")}return-1===l?null:l}(o,u);if(I_(o,l)!==h&&(N_(s,o,l),l[o.currentCaseLViewIndex]=null===h?null:~h,null!==h)){const v=l[o.anchorIdx];v&&gE(s,o.create[h],l,v)}}function N_(s,o,l){let u=I_(o,l);if(null!==u){const h=o.remove[u];for(let g=0;g<h.length;g++){const v=h[g];if(v>0){const D=yi(v,l);null!==D&&_h(l[11],D)}else N_(s,Rs(s,~v),l)}}}function y0(){const s=[];let l,u,o=-1;function g(D,E){o=0;const S=I_(D,E);u=null!==S?D.remove[S]:Ot}function v(){if(o<u.length){const D=u[o++];return D>0?l[D]:(s.push(o,u),g(l[1].data[~D],l),v())}return 0===s.length?null:(u=s.pop(),o=s.pop(),v())}return function h(D,E){for(l=E;s.length;)s.pop();return g(D.value,E),v}}const cf=/\ufffd(\d+):?\d*\ufffd/gi,w0=/\ufffd(\d+)\ufffd/,md=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,D0=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,df=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,hf=/\uE500/g;function vE(s,o,l,u,h,g,v){const D=nd(s,u,1,null);let E=D<<ur.SHIFT,S=Wo();o===S&&(S=null),null===S&&(E|=ur.APPEND_EAGERLY),v&&(E|=ur.COMMENT,function rm(s){void 0===sl&&(sl=s())}(y0)),h.push(E,null===g?"":g);const M=Lm(s,D,v?32:1,null===g?"":g,null);af(l,M);const F=M.index;return vi(M,!1),null!==S&&o!==S&&function kC(s,o){let l=s.insertBeforeIndex;null===l?(cl(D_,ng),l=s.insertBeforeIndex=[null,o]):(function me(s,o,l){s!=o&&et(l,s,o,"==")}(Array.isArray(l),!0,"Expecting array here"),l.push(o))}(S,F),M}function VC(s,o,l,u,h,g,v){const D=v.match(cf),E=vE(s,o,l,g,u,D?null:v,!1);D&&_d(h,v,E.index,null,0,null)}function _d(s,o,l,u,h,g){const v=s.length,D=v+1;s.push(null,null);const E=v+2,S=o.split(cf);let M=0;for(let F=0;F<S.length;F++){const $=S[F];if(1&F){const ee=h+parseInt($,10);s.push(-1-ee),M|=A_(ee)}else""!==$&&s.push($)}return s.push(l<<2|(u?1:0)),u&&s.push(u,g),s[v]=M,s[D]=s.length-E,M}function A_(s){return 1<<Math.min(s,31)}function bE(s){let o,g,l="",u=0,h=!1;for(;null!==(o=D0.exec(s));)h?o[0]===`\ufffd/*${g}\ufffd`&&(u=o.index,h=!1):(l+=s.substring(u,o.index+o[0].length),g=o[1],h=!0);return l+=s.slice(u),l}function x_(s,o,l,u,h,g){let v=0;const D={type:h.type,currentCaseLViewIndex:nd(s,o,1,null),anchorIdx:g,cases:[],create:[],remove:[],update:[]};(function DE(s,o,l){s.push(A_(o.mainBinding),2,-1-o.mainBinding,l<<2|2)})(l,h,g),function fE(s,o,l){const u=s.data[o];null===u?s.data[o]=l:u.value=l}(s,g,D);const E=h.values;for(let S=0;S<E.length;S++){const M=E[S],F=[];for(let $=0;$<M.length;$++){const ee=M[$];if("string"!=typeof ee){const ve=F.push(ee)-1;M[$]=`\x3c!--\ufffd${ve}\ufffd--\x3e`}}v=HC(s,D,o,l,u,h.cases[S],M.join(""),F)|v}v&&function jC(s,o,l){s.push(o,1,l<<2|3)}(l,v,g)}function UC(s){const o=[],l=[];let u=1,h=0;const g=M_(s=s.replace(md,function(v,D,E){return u="select"===E?0:1,h=parseInt(D.slice(1),10),""}));for(let v=0;v<g.length;){let D=g[v++].trim();1===u&&(D=D.replace(/\s*(?:=)?(\w+)\s*/,"$1")),D.length&&o.push(D);const E=M_(g[v++]);o.length>l.length&&l.push(E)}return{type:u,mainBinding:h,cases:o,values:l}}function M_(s){if(!s)return[];let o=0;const l=[],u=[],h=/[{}]/g;let g;for(h.lastIndex=0;g=h.exec(s);){const D=g.index;if("}"==g[0]){if(l.pop(),0==l.length){const E=s.substring(o,D);md.test(E)?u.push(UC(E)):u.push(E),o=D+1}}else{if(0==l.length){const E=s.substring(o,D);u.push(E),o=D+1}l.push("{")}}const v=s.substring(o);return u.push(v),u}function HC(s,o,l,u,h,g,v,D){const E=[],S=[],M=[];o.cases.push(g),o.create.push(E),o.remove.push(S),o.update.push(M);const $=function Tu(s){const o=new Wc(s);return function vp(){try{return!!(new window.DOMParser).parseFromString(Ts(""),"text/html")}catch{return!1}}()?new dl(o):o}(function f(){return void 0!==gp?gp:typeof document<"u"?document:void 0}()).getInertBodyElement(v),ee=function pm(s){return"content"in s&&function gm(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}($)||$;return ee?T0(s,o,l,u,E,S,M,ee,h,D,0):0}function T0(s,o,l,u,h,g,v,D,E,S,M){let F=0,$=D.firstChild;for(;$;){const ee=nd(s,l,1,null);switch($.nodeType){case Node.ELEMENT_NODE:const ve=$,Re=ve.tagName.toLowerCase();if(dm.hasOwnProperty(Re)){N0(h,b_,Re,E,ee),s.data[ee]=Re;const Ae=ve.attributes;for(let Nt=0;Nt<Ae.length;Nt++){const cn=Ae.item(Nt),kn=cn.name.toLowerCase();cn.value.match(cf)?ga.hasOwnProperty(kn)&&_d(v,cn.value,ee,cn.name,0,hm[kn]?hl:null):GC(h,ee,cn)}F=T0(s,o,l,u,h,g,v,$,ee,S,M+1)|F,S0(g,ee,M)}break;case Node.TEXT_NODE:const Ze=$.textContent||"",ct=Ze.match(cf);N0(h,null,ct?"":Ze,E,ee),S0(g,ee,M),ct&&(F=_d(v,Ze,ee,null,0,null)|F);break;case Node.COMMENT_NODE:const It=w0.exec($.textContent||"");if(It){const Nt=S[parseInt(It[1],10)];N0(h,nf,"",E,ee),x_(s,l,u,E,Nt,ee),wE(g,ee,M)}}$=$.nextSibling}return F}function S0(s,o,l){0===l&&s.push(o)}function wE(s,o,l){0===l&&(s.push(~o),s.push(o))}function N0(s,o,l,u,h){null!==o&&s.push(o),s.push(l,h,function S_(s,o,l){return s|o<<17|l<<1}(0,u,h))}function GC(s,o,l){s.push(o<<1|1,l.name,l.value)}function O_(s,o,l=-1){const u=Gt(),h=Te(),g=22+s,v=Pi(u.consts,o),D=Wo();u.firstCreatePass&&function ff(s,o,l,u,h,g){const v=Wo(),D=[],E=[],S=[[]];h=function C0(s,o){if(function BC(s){return-1===s}(o))return bE(s);{const l=s.indexOf(`:${o}\ufffd`)+2+o.toString().length,u=s.search(new RegExp(`\ufffd\\/\\*\\d+:${o}\ufffd`));return bE(s.substring(l,u))}}(h,g);const M=function yE(s){return s.replace(hf," ")}(h).split(df);for(let F=0;F<M.length;F++){let $=M[F];if(0==(1&F)){const ee=M_($);for(let ve=0;ve<ee.length;ve++){let Re=ee[ve];if(0==(1&ve)){const Ze=Re;""!==Ze&&VC(s,v,S[0],D,E,l,Ze)}else{const Ze=Re;if("object"!=typeof Ze)throw new Error(`Unable to parse ICU expression in "${h}" message.`);x_(s,l,E,o,Ze,vE(s,v,S[0],l,D,"",!0).index)}}}else{const ee=47===$.charCodeAt(0),Re=($.charCodeAt(ee?1:0),22+Number.parseInt($.substring(ee?2:1)));if(ee)S.shift(),vi(Wo(),!1);else{const Ze=p0(s,S[0],Re);S.unshift([]),vi(Ze,!0)}}}s.data[u]={create:D,update:E}}(u,null===D?0:D.index,h,g,v,l);const E=u.data[g],M=Gc(u,D===h[6]?null:D,h);(function PC(s,o,l,u){const h=s[11];for(let g=0;g<o.length;g++){const v=o[g++],D=o[g],E=(v&ur.COMMENT)===ur.COMMENT,S=(v&ur.APPEND_EAGERLY)===ur.APPEND_EAGERLY,M=v>>>ur.SHIFT;let F=s[M];null===F&&(F=s[M]=E?h.createComment(D):hh(h,D)),S&&null!==l&&da(h,l,F,u,!1)}})(h,E.create,M,D&&8&D.type?h[D.index]:null),ja(!0)}function CE(s,o,l){O_(s,o,l),function k0(){ja(!1)}()}function F0(s){return function uf(s){s&&(gd|=1<<Math.min(lf,31)),lf++}(Ii(Te(),vo(),s)),F0}function R_(s){!function g0(s,o,l){if(lf>0){const u=s.data[l];m0(s,o,Array.isArray(u)?u:u.update,function Yi(){return Mt.lFrame.bindingIndex}()-lf-1,gd)}gd=0,lf=0}(Gt(),Te(),s+22)}function V0(s,o,l,u,h){if(s=K(s),Array.isArray(s))for(let g=0;g<s.length;g++)V0(s[g],o,l,u,h);else{const g=Gt(),v=Te();let D=Nu(s)?s:K(s.provide),E=Au(s);const S=An(),M=1048575&S.providerIndexes,F=S.directiveStart,$=S.providerIndexes>>20;if(Nu(s)||!s.multi){const ee=new Ys(E,h,Xc),ve=ig(D,o,h?M:M+$,F);-1===ve?(Qs(Co(S,v),g,D),rg(g,s,o.length),o.push(D),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),l.push(ee),v.push(ee)):(l[ve]=ee,v[ve]=ee)}else{const ee=ig(D,o,M+$,F),ve=ig(D,o,M,M+$),Re=ee>=0&&l[ee],Ze=ve>=0&&l[ve];if(h&&!Ze||!h&&!Re){Qs(Co(S,v),g,D);const ct=function qC(s,o,l,u,h){const g=new Ys(s,l,Xc);return g.multi=[],g.index=o,g.componentProviders=0,k_(g,h,u&&!l),g}(h?TE:pf,l.length,h,u,E);!h&&Ze&&(l[ve].providerFactory=ct),rg(g,s,o.length,0),o.push(D),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),l.push(ct),v.push(ct)}else rg(g,s,ee>-1?ee:ve,k_(l[h?ve:ee],E,!h&&u));!h&&u&&Ze&&l[ve].componentProviders++}}}function rg(s,o,l,u){const h=Nu(o),g=function U1(s){return!!s.useClass}(o);if(h||g){const E=(g?K(o.useClass):o).prototype.ngOnDestroy;if(E){const S=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const M=S.indexOf(l);-1===M?S.push(l,[u,E]):S[M+1].push(u,E)}else S.push(l,E)}}}function k_(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function ig(s,o,l,u){for(let h=l;h<u;h++)if(o[h]===s)return h;return-1}function pf(s,o,l,u){return sg(this.multi,[])}function TE(s,o,l,u){const h=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,D=ys(l,l[1],this.providerFactory.index,u);g=D.slice(0,v),sg(h,g);for(let E=v;E<D.length;E++)g.push(D[E])}else g=[],sg(h,g);return g}function sg(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function P_(s,o=[]){return l=>{l.providersResolver=(u,h)=>function L0(s,o,l){const u=Gt();if(u.firstCreatePass){const h=Fr(s);V0(l,u.data,u.blueprint,h,!0),V0(o,u.data,u.blueprint,h,!1)}}(u,h?h(s):s,o)}}class os{}class F_{}function KC(s,o){return new NE(s,o??null)}class NE extends os{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new zm(this);const u=fn(o);this._bootstrapComponents=ma(u.bootstrap),this._r3Injector=Np(o,l,[{provide:os,useValue:this},{provide:Cp,useValue:this.componentFactoryResolver}],he(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class B0 extends F_{constructor(o){super(),this.moduleType=o}create(o){return new NE(this.moduleType,o)}}class U0 extends os{constructor(o,l,u){super(),this.componentFactoryResolver=new zm(this),this.instance=null;const h=new bm([...o,{provide:os,useValue:this},{provide:Cp,useValue:this.componentFactoryResolver}],l||fl(),u,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function H0(s,o,l=null){return new U0(s,o,l).injector}let j0=(()=>{class s{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const u=iv(0,l.type),h=u.length>0?H0([u],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,h)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=nn({token:s,providedIn:"environment",factory:()=>new s(Un(ns))}),s})();function AE(s){s.getStandaloneInjector=o=>o.get(j0).getOrCreateStandaloneInjector(s)}function K0(s,o,l,u){return function Tn(s,o,l,u,h,g){const v=o+l;return Ii(s,v,h)?Da(s,v+1,g?u.call(g,h):u(h)):gf(s,v+1)}(Te(),xn(),s,o,l,u)}function Z0(s,o,l,u,h){return function ei(s,o,l,u,h,g,v){const D=o+l;return od(s,D,h,g)?Da(s,D+2,v?u.call(v,h,g):u(h,g)):gf(s,D+2)}(Te(),xn(),s,o,l,u,h)}function Y0(s,o,l,u,h,g){return function Po(s,o,l,u,h,g,v,D){const E=o+l;return function qm(s,o,l,u,h){const g=od(s,o,l,u);return Ii(s,o+2,h)||g}(s,E,h,g,v)?Da(s,E+3,D?u.call(D,h,g,v):u(h,g,v)):gf(s,E+3)}(Te(),xn(),s,o,l,u,h,g)}function gf(s,o){const l=s[o];return l===kt?void 0:l}function J0(s){return o=>{setTimeout(s,void 0,o)}}const Ia=class rT extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,u){let h=o,g=l||(()=>null),v=u;if(o&&"object"==typeof o){const E=o;h=E.next?.bind(E),g=E.error?.bind(E),v=E.complete?.bind(E)}this.__isAsync&&(g=J0(g),h&&(h=J0(h)),v&&(v=J0(v)));const D=super.subscribe({next:h,error:g,complete:v});return o instanceof X.w0&&o.add(D),D}};function HE(){return this._results[Ei()]()}class ug{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Ei(),u=ug.prototype;u[l]||(u[l]=HE)}get changes(){return this._changes||(this._changes=new Ia)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const u=this;u.dirty=!1;const h=Vn(o);(this._changesDetected=!function Qt(s,o,l){if(s.length!==o.length)return!1;for(let u=0;u<s.length;u++){let h=s[u],g=o[u];if(l&&(h=l(h),g=l(g)),g!==h)return!1}return!0}(u._results,h,l))&&(u._results=h,u.length=h.length,u.last=h[this.length-1],u.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let mf=(()=>{class s{}return s.__NG_ELEMENT_ID__=tb,s})();const X0=mf,eb=class extends X0{constructor(o,l,u){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=u}createEmbeddedView(o,l){const u=this._declarationTContainer.tViews,h=kp(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null,l||null);h[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(h[19]=v.createEmbeddedView(u)),rd(u,h,o),new Dl(h)}};function tb(){return yd(An(),Te())}function yd(s,o){return 4&s.type?new eb(o,s,zc(s,o)):null}let _f=(()=>{class s{}return s.__NG_ELEMENT_ID__=jE,s})();function jE(){return vd(An(),Te())}const G_=_f,$_=class extends G_{constructor(o,l,u){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=u}get element(){return zc(this._hostTNode,this._hostLView)}get injector(){return new So(this._hostTNode,this._hostLView)}get parentInjector(){const o=hu(this._hostTNode,this._hostLView);if(qd(o)){const l=qa(o,this._hostLView),u=_r(o);return new So(l[1].data[u+8],l)}return new So(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=W_(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,u){let h,g;"number"==typeof u?h=u:null!=u&&(h=u.index,g=u.injector);const v=o.createEmbeddedView(l||{},g);return this.insert(v,h),v}createComponent(o,l,u,h,g){const v=o&&!function bs(s){return"function"==typeof s}(o);let D;if(v)D=l;else{const F=l||{};D=F.index,u=F.injector,h=F.projectableNodes,g=F.environmentInjector||F.ngModuleRef}const E=v?o:new El(Q(o)),S=u||this.parentInjector;if(!g&&null==E.ngModule){const $=(v?S:this.parentInjector).get(ns,null);$&&(g=$)}const M=E.create(S,h,void 0,g);return this.insert(M.hostView,D),M}insert(o,l){const u=o._lView,h=u[1];if(function zl(s){return Kr(s[3])}(u)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const F=u[3],$=new $_(F,F[6],F[3]);$.detach($.indexOf(o))}}const g=this._adjustIndex(l),v=this._lContainer;!function al(s,o,l,u){const h=10+u,g=l.length;u>0&&(l[h-1][4]=o),u<g-10?(o[4]=l[h],yn(l,10+u,o)):(l.push(o),o[4]=null),o[3]=l;const v=o[17];null!==v&&l!==v&&function am(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(v,o);const D=o[19];null!==D&&D.insertView(s),o[2]|=64}(h,u,v,g);const D=fp(g,v),E=u[11],S=Mo(E,v[7]);return null!==S&&function Uc(s,o,l,u,h,g){u[0]=h,u[6]=o,Iu(s,u,l,1,h,g)}(h,v[6],E,u,S,D),o.attachToViewContainerRef(),yn(z_(v),g,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=W_(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),u=ll(this._lContainer,l);u&&(Ji(z_(this._lContainer),l),gh(u[1],u))}detach(o){const l=this._adjustIndex(o,-1),u=ll(this._lContainer,l);return u&&null!=Ji(z_(this._lContainer),l)?new Dl(u):null}_adjustIndex(o,l=0){return o??this.length+l}};function W_(s){return s[8]}function z_(s){return s[8]||(s[8]=[])}function vd(s,o){let l;const u=o[s.index];if(Kr(u))l=u;else{let h;if(8&s.type)h=Nn(u);else{const g=o[11];h=g.createComment("");const v=Lr(s,o);da(g,Mo(g,v),h,function dp(s,o){return s.nextSibling(o)}(g,v),!1)}o[s.index]=l=Vp(u,o,h,s),Gm(o,l)}return new $_(l,s,o)}class rb{constructor(o){this.queryList=o,this.matches=null}clone(){return new rb(this.queryList)}setDirty(){this.queryList.setDirty()}}class q_{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const u=null!==o.contentQueries?o.contentQueries[0]:l.length,h=[];for(let g=0;g<u;g++){const v=l.getByIndex(g);h.push(this.queries[v.indexInDeclarationView].clone())}return new q_(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==ZE(o,l).matches&&this.queries[l].setDirty()}}class GE{constructor(o,l,u=null){this.predicate=o,this.flags=l,this.read=u}}class K_{constructor(o=[]){this.queries=o}elementStart(o,l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let u=0;u<this.length;u++){const h=null!==l?l.length:0,g=this.getByIndex(u).embeddedTView(o,h);g&&(g.indexInDeclarationView=u,null!==l?l.push(g):l=[g])}return null!==l?new K_(l):null}template(o,l){for(let u=0;u<this.queries.length;u++)this.queries[u].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class ib{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new ib(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let u=o.parent;for(;null!==u&&8&u.type&&u.index!==l;)u=u.parent;return l===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const u=this.metadata.predicate;if(Array.isArray(u))for(let h=0;h<u.length;h++){const g=u[h];this.matchTNodeWithReadOption(o,l,sT(l,g)),this.matchTNodeWithReadOption(o,l,Yo(l,o,g,!1,!1))}else u===mf?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,Yo(l,o,u,!1,!1))}matchTNodeWithReadOption(o,l,u){if(null!==u){const h=this.metadata.read;if(null!==h)if(h===Tp||h===_f||h===mf&&4&l.type)this.addMatch(l.index,-2);else{const g=Yo(l,o,h,!1,!1);null!==g&&this.addMatch(l.index,g)}else this.addMatch(l.index,u)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function sT(s,o){const l=s.localNames;if(null!==l)for(let u=0;u<l.length;u+=2)if(l[u]===o)return l[u+1];return null}function aT(s,o,l,u){return-1===l?function oT(s,o){return 11&s.type?zc(s,o):4&s.type?yd(s,o):null}(o,s):-2===l?function sb(s,o,l){return l===Tp?zc(o,s):l===mf?yd(o,s):l===_f?vd(o,s):void 0}(s,o,u):ys(s,s[1],l,o)}function $E(s,o,l,u){const h=o[19].queries[u];if(null===h.matches){const g=s.data,v=l.matches,D=[];for(let E=0;E<v.length;E+=2){const S=v[E];D.push(S<0?null:aT(o,g[S],v[E+1],l.metadata.read))}h.matches=D}return h.matches}function ob(s,o,l,u){const h=s.queries.getByIndex(l),g=h.matches;if(null!==g){const v=$E(s,o,h,l);for(let D=0;D<g.length;D+=2){const E=g[D];if(E>0)u.push(v[D/2]);else{const S=g[D+1],M=o[-E];for(let F=10;F<M.length;F++){const $=M[F];$[17]===$[3]&&ob($[1],$,S,u)}if(null!==M[9]){const F=M[9];for(let $=0;$<F.length;$++){const ee=F[$];ob(ee[1],ee,S,u)}}}}}return u}function Sn(s){const o=Te(),l=Gt(),u=vc();$a(u+1);const h=ZE(l,u);if(s.dirty&&function Wl(s){return 4==(4&s[2])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const g=h.crossesNgTemplate?ob(l,o,u,[]):$E(l,o,h,u);s.reset(g,jN),s.notifyOnChanges()}return!0}return!1}function lT(s,o,l){const u=Gt();u.firstCreatePass&&(qE(u,new GE(s,o,l),-1),2==(2&o)&&(u.staticViewQueries=!0)),zE(u,Te(),o)}function uT(s,o,l,u){const h=Gt();if(h.firstCreatePass){const g=An();qE(h,new GE(o,l,u),g.index),function KE(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}zE(h,Te(),l)}function cr(){return function WE(s,o){return s[19].queries[o].queryList}(Te(),vc())}function zE(s,o,l){const u=new ug(4==(4&l));id(s,o,u,u.destroy),null===o[19]&&(o[19]=new q_),o[19].queries.push(new rb(u))}function qE(s,o,l){null===s.queries&&(s.queries=new K_),s.queries.track(new ib(o,l))}function ZE(s,o){return s.queries.getByIndex(o)}function YE(s,o){return yd(s,o)}function gg(...s){}const mb=new _n("Application Initializer");let mg=(()=>{class s{constructor(l){this.appInits=l,this.resolve=gg,this.reject=gg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,h)=>{this.resolve=u,this.reject=h})}runInitializers(){if(this.initialized)return;const l=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const g=this.appInits[h]();if(Cl(g))l.push(g);else if(jv(g)){const v=new Promise((D,E)=>{g.subscribe({complete:D,error:E})});l.push(v)}}Promise.all(l).then(()=>{u()}).catch(h=>{this.reject(h)}),0===l.length&&u(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(Un(mb,8))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const _b=new _n("AppId",{providedIn:"root",factory:function yb(){return`${Df()}${Df()}${Df()}`}});function Df(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const uI=new _n("Platform Initializer"),Dd=new _n("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Ta=new _n("appBootstrapListener");let yT=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const ey=new _n("LocaleId",{providedIn:"root",factory:()=>I(ey,tt.Optional|tt.SkipSelf)||function cI(){return typeof $localize<"u"&&$localize.locale||tf}()}),Ku=new _n("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class vT{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let bT=(()=>{class s{compileModuleSync(l){return new B0(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const u=this.compileModuleSync(l),g=ma(fn(l).declarations).reduce((v,D)=>{const E=Q(D);return E&&v.push(new El(E)),v},[]);return new vT(u,g)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const bb=(()=>Promise.resolve(0))();function fI(s){typeof Zone>"u"?bb.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class uo{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ia(!1),this.onMicrotaskEmpty=new Ia(!1),this.onStable=new Ia(!1),this.onError=new Ia(!1),typeof Zone>"u")throw new De(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!u&&l,h.shouldCoalesceRunChangeDetection=u,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function pA(){let s=an.requestAnimationFrame,o=an.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function IT(s){const o=()=>{!function ET(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(an,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,wb(s),s.isCheckStableRunning=!0,Sa(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),wb(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,u,h,g,v,D)=>{try{return gI(s),l.invokeTask(h,g,v,D)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),mI(s)}},onInvoke:(l,u,h,g,v,D,E)=>{try{return gI(s),l.invoke(h,g,v,D,E)}finally{s.shouldCoalesceRunChangeDetection&&o(),mI(s)}},onHasTask:(l,u,h,g)=>{l.hasTask(h,g),u===h&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,wb(s),Sa(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(l,u,h,g)=>(l.handleError(h,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!uo.isInAngularZone())throw new De(909,!1)}static assertNotInAngularZone(){if(uo.isInAngularZone())throw new De(909,!1)}run(o,l,u){return this._inner.run(o,l,u)}runTask(o,l,u,h){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+h,o,pI,gg,gg);try{return g.runTask(v,l,u)}finally{g.cancelTask(v)}}runGuarded(o,l,u){return this._inner.runGuarded(o,l,u)}runOutsideAngular(o){return this._outer.run(o)}}const pI={};function Sa(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function wb(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function gI(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function mI(s){s._nesting--,Sa(s)}class CT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ia,this.onMicrotaskEmpty=new Ia,this.onStable=new Ia,this.onError=new Ia}run(o,l,u){return o.apply(l,u)}runGuarded(o,l,u){return o.apply(l,u)}runOutsideAngular(o){return o()}runTask(o,l,u,h){return o.apply(l,u)}}const _I=new _n(""),TT=new _n("");let Eb,gA=(()=>{class s{constructor(l,u,h){this._ngZone=l,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Eb||(function ST(s){Eb=s}(h),h.addToWindow(u)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{uo.assertNotInAngularZone(),fI(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())fI(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(l)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,u,h){let g=-1;u&&u>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),l(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:l,timeoutId:g,updateCb:h})}whenStable(l,u,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,u,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,u,h){return[]}}return s.\u0275fac=function(l){return new(l||s)(Un(uo),Un(Db),Un(TT))},s.\u0275prov=nn({token:s,factory:s.\u0275fac}),s})(),Db=(()=>{class s{constructor(){this._applications=new Map}registerApplication(l,u){this._applications.set(l,u)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,u=!0){return Eb?.findTestabilityInTree(this,l,u)??null}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Na=null;const Ib=new _n("AllowMultipleToken"),ty=new _n("PlatformDestroyListeners");class yI{constructor(o,l){this.name=o,this.token=l}}function Zu(s,o,l=[]){const u=`Platform: ${o}`,h=new _n(u);return(g=[])=>{let v=ry();if(!v||v.injector.get(Ib,!1)){const D=[...l,...g,{provide:h,useValue:!0}];s?s(D):function ny(s){if(Na&&!Na.get(Ib,!1))throw new De(400,!1);Na=s;const o=s.get(Ef);(function Tb(s){const o=s.get(uI,null);o&&o.forEach(l=>l())})(s)}(function Ti(s=[],o){return Ms.create({name:o,providers:[{provide:Ih,useValue:"platform"},{provide:ty,useValue:new Set([()=>Na=null])},...s]})}(D,u))}return function co(s){const o=ry();if(!o)throw new De(401,!1);return o}()}}function ry(){return Na?.get(Ef)??null}let Ef=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,u){const h=function Si(s,o){let l;return l="noop"===s?new CT:("zone.js"===s?void 0:s)||new uo(o),l}(u?.ngZone,function If(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(u)),g=[{provide:uo,useValue:h}];return h.run(()=>{const v=Ms.create({providers:g,parent:this.injector,name:l.moduleType.name}),D=l.create(v),E=D.injector.get(ze,null);if(!E)throw new De(402,!1);return h.runOutsideAngular(()=>{const S=h.onError.subscribe({next:M=>{E.handleError(M)}});D.onDestroy(()=>{Aa(this._modules,D),S.unsubscribe()})}),function vI(s,o,l){try{const u=l();return Cl(u)?u.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):u}catch(u){throw o.runOutsideAngular(()=>s.handleError(u)),u}}(E,h,()=>{const S=D.injector.get(mg);return S.runInitializers(),S.donePromise.then(()=>(w_(D.injector.get(ey,tf)||tf),this._moduleDoBootstrap(D),D))})})}bootstrapModule(l,u=[]){const h=iy({},u);return function Cb(s,o,l){const u=new B0(l);return Promise.resolve(u)}(0,0,l).then(g=>this.bootstrapModuleFactory(g,h))}_moduleDoBootstrap(l){const u=l.injector.get(xl);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>u.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new De(403,!1);l.instance.ngDoBootstrap(u)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new De(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const l=this._injector.get(ty,null);l&&(l.forEach(u=>u()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(Un(Ms))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function iy(s,o){return Array.isArray(o)?o.reduce(iy,s):{...s,...o}}let xl=(()=>{class s{constructor(l,u,h){this._zone=l,this._injector=u,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new k.y(D=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{D.next(this._stable),D.complete()})}),v=new k.y(D=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{uo.assertNotInAngularZone(),fI(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,D.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{uo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{D.next(!1)}))});return()=>{E.unsubscribe(),S.unsubscribe()}});this.isStable=(0,se.T)(g,v.pipe((0,oe.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,u){const h=l instanceof Rr;if(!this._injector.get(mg).done)throw!h&&Yt(l),new De(405,false);let v;v=h?l:this._injector.get(Cp).resolveComponentFactory(l),this.componentTypes.push(v.componentType);const D=function NT(s){return s.isBoundToModule}(v)?void 0:this._injector.get(os),S=v.create(Ms.NULL,[],u||v.selector,D),M=S.location.nativeElement,F=S.injector.get(_I,null);return F?.registerApplication(M),S.onDestroy(()=>{this.detachView(S.hostView),Aa(this.components,S),F?.unregisterApplication(M)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new De(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const u=l;this._views.push(u),u.attachToAppRef(this)}detachView(l){const u=l;Aa(this._views,u),u.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(Ta,[]).concat(this._bootstrapListeners).forEach(h=>h(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>Aa(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new De(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(l){return new(l||s)(Un(uo),Un(ns),Un(ze))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Aa(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}let bI=!0,wI=!1;function OT(){return wI=!0,bI}function dr(){if(wI)throw new Error("Cannot enable prod mode after platform setup.");bI=!1}let hr=(()=>{class s{}return s.__NG_ELEMENT_ID__=RT,s})();function RT(s){return function kT(s,o,l){if(Fa(s)&&!l){const u=zt(s.index,o);return new Dl(u,u)}return 47&s.type?new Dl(o[16],o):null}(An(),Te(),16==(16&s))}class CI{constructor(){}supports(o){return Uu(o)}create(o){return new DA(o)}}const wA=(s,o)=>o;class DA{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||wA}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,u=this._removalsHead,h=0,g=null;for(;l||u;){const v=!u||l&&l.currentIndex<VT(u,h,g)?l:u,D=VT(v,h,g),E=v.currentIndex;if(v===u)h--,u=u._nextRemoved;else if(l=l._next,null==v.previousIndex)h++;else{g||(g=[]);const S=D-h,M=E-h;if(S!=M){for(let $=0;$<S;$++){const ee=$<g.length?g[$]:g[$]=0,ve=ee+$;M<=ve&&ve<S&&(g[$]=ee+1)}g[v.previousIndex]=M-S}}D!==E&&o(v,D,E)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!Uu(o))throw new De(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,g,v,l=this._itHead,u=!1;if(Array.isArray(o)){this.length=o.length;for(let D=0;D<this.length;D++)g=o[D],v=this._trackByFn(D,g),null!==l&&Object.is(l.trackById,v)?(u&&(l=this._verifyReinsertion(l,g,v,D)),Object.is(l.item,g)||this._addIdentityChange(l,g)):(l=this._mismatch(l,g,v,D),u=!0),l=l._next}else h=0,function vC(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[Ei()]();let u;for(;!(u=l.next()).done;)o(u.value)}}(o,D=>{v=this._trackByFn(h,D),null!==l&&Object.is(l.trackById,v)?(u&&(l=this._verifyReinsertion(l,D,v,h)),Object.is(l.item,D)||this._addIdentityChange(l,D)):(l=this._mismatch(l,D,v,h),u=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,u,h){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,g,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(u,h))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,g,h)):o=this._addAfter(new EA(l,u),g,h),o}_verifyReinsertion(o,l,u,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==g?o=this._reinsertAfter(g,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,g=o._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(o,l,u),this._addToMoves(o,u),o}_moveAfter(o,l,u){return this._unlink(o),this._insertAfter(o,l,u),this._addToMoves(o,u),o}_addAfter(o,l,u){return this._insertAfter(o,l,u),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,u){const h=null===l?this._itHead:l._next;return o._next=h,o._prev=l,null===h?this._itTail=o:h._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new LT),this._linkedRecords.put(o),o.currentIndex=u,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,u=o._next;return null===l?this._itHead=u:l._next=u,null===u?this._itTail=l:u._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new LT),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class EA{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class IA{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===l||l<=u.currentIndex)&&Object.is(u.trackById,o))return u;return null}remove(o){const l=o._prevDup,u=o._nextDup;return null===l?this._head=u:l._nextDup=u,null===u?this._tail=l:u._prevDup=l,null===this._head}}class LT{constructor(){this.map=new Map}put(o){const l=o.trackById;let u=this.map.get(l);u||(u=new IA,this.map.set(l,u)),u.add(o)}get(o,l){const h=this.map.get(o);return h?h.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function VT(s,o,l){const u=s.previousIndex;if(null===u)return u;let h=0;return l&&u<l.length&&(h=l[u]),u+o+h}class BT{constructor(){}supports(o){return o instanceof Map||Vv(o)}create(){return new CA}}class CA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||Vv(o)))throw new De(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(u,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,u),this._appendAfter=l,l=l._next;else{const g=this._getOrCreateRecordForKey(h,u);l=this._insertBeforeOrAppend(l,g)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let u=l;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const u=o._prev;return l._next=o,l._prev=u,o._prev=l,u&&(u._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,l);const g=h._prev,v=h._next;return g&&(g._next=v),v&&(v._prev=g),h._next=null,h._prev=null,h}const u=new Mb(o);return this._records.set(o,u),u.currentValue=l,this._addToAdditions(u),u}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(u=>l(o[u],u))}}class Mb{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ob(){return new Rb([new CI])}let Rb=(()=>{class s{constructor(l){this.factories=l}static create(l,u){if(null!=u){const h=u.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:u=>s.create(l,u||Ob()),deps:[[s,new ht,new nt]]}}find(l){const u=this.factories.find(h=>h.supports(l));if(null!=u)return u;throw new De(901,!1)}}return s.\u0275prov=nn({token:s,providedIn:"root",factory:Ob}),s})();function TI(){return new Cf([new BT])}let Cf=(()=>{class s{constructor(l){this.factories=l}static create(l,u){if(u){const h=u.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:u=>s.create(l,u||TI()),deps:[[s,new ht,new nt]]}}find(l){const u=this.factories.find(h=>h.supports(l));if(u)return u;throw new De(901,!1)}}return s.\u0275prov=nn({token:s,providedIn:"root",factory:TI}),s})();const SI=Zu(null,"core",[]);let HT=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(Un(xl))},s.\u0275mod=Ut({type:s}),s.\u0275inj=Ft({}),s})();function jT(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function $T(s,o){const l=Q(s),u=o.elementInjector||fl();return new El(l).create(u,o.projectableNodes,o.hostElement,o.environmentInjector)}},3942:(ft,Ce,P)=>{P.d(Ce,{Z:()=>De});var d=P(2090),X=P(4859),k=P(9681),se=P(1877);class oe{constructor(ye,pe){this._delegate=ye,this.firebase=pe,(0,k._addComponent)(ye,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this._delegate.automaticDataCollectionEnabled=ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ye=>{this._delegate.checkDestroyed(),ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(ye,pe=k._DEFAULT_ENTRY_NAME){var it;this._delegate.checkDestroyed();const dt=this._delegate.container.getProvider(ye);return!dt.isInitialized()&&"EXPLICIT"===(null===(it=dt.getComponent())||void 0===it?void 0:it.instantiationMode)&&dt.initialize(),dt.getImmediate({identifier:pe})}_removeServiceInstance(ye,pe=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ye).clearInstance(pe)}_addComponent(ye){(0,k._addComponent)(this._delegate,ye)}_addOrOverwriteComponent(ye){(0,k._addOrOverwriteComponent)(this._delegate,ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ce=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function fe(){const lt=function he(lt){const ye={},pe={__esModule:!0,initializeApp:function Ne(We,U={}){const me=k.initializeApp(We,U);if((0,d.r3)(ye,me.name))return ye[me.name];const z=new lt(me,pe);return ye[me.name]=z,z},app:dt,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Ee(We){const U=We.name,me=U.replace("-compat","");if(k._registerComponent(We)&&"PUBLIC"===We.type){const z=(J=dt())=>{if("function"!=typeof J[me])throw ce.create("invalid-app-argument",{appName:U});return J[me]()};void 0!==We.serviceProps&&(0,d.ZB)(z,We.serviceProps),pe[me]=z,lt.prototype[me]=function(...J){return this._getService.bind(this,U).apply(this,We.multipleInstances?J:[])}}return"PUBLIC"===We.type?pe[me]:null},removeApp:function it(We){delete ye[We]},useAsService:function je(We,U){return"serverAuth"===U?null:U},modularAPIs:k}};function dt(We){if(!(0,d.r3)(ye,We=We||k._DEFAULT_ENTRY_NAME))throw ce.create("no-app",{appName:We});return ye[We]}return pe.default=pe,Object.defineProperty(pe,"apps",{get:function be(){return Object.keys(ye).map(We=>ye[We])}}),dt.App=lt,pe}(oe);return lt.INTERNAL=Object.assign(Object.assign({},lt.INTERNAL),{createFirebaseNamespace:fe,extendNamespace:function ye(pe){(0,d.ZB)(lt,pe)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),lt}(),j=new se.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const lt=self.firebase.SDK_VERSION;lt&&lt.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const De=H;!function xe(lt){(0,k.registerVersion)("@firebase/app-compat","0.2.0",lt)}()},9681:(ft,Ce,P)=>{P.r(Ce),P.d(Ce,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>ho,_DEFAULT_ENTRY_NAME:()=>jt,_addComponent:()=>Zt,_addOrOverwriteComponent:()=>nn,_apps:()=>ln,_clearComponents:()=>cs,_components:()=>bn,_getProvider:()=>Ft,_registerComponent:()=>Wr,_removeServiceInstance:()=>dn,deleteApp:()=>ka,getApp:()=>pi,getApps:()=>gi,initializeApp:()=>Ri,onLog:()=>Hs,registerVersion:()=>Pr,setLogLevel:()=>Yn});var d=P(5861),X=P(4859),k=P(1877),se=P(2090),oe=P(8766);class de{constructor(Ie){this.container=Ie}getPlatformInfoString(){return this.container.getProviders().map(st=>{if(function ce(ot){return"VERSION"===ot.getComponent()?.type}(st)){const xt=st.getImmediate();return`${xt.library}/${xt.version}`}return null}).filter(st=>st).join(" ")}}const he="@firebase/app",H=new k.Yd("@firebase/app"),jt="[DEFAULT]",et={[he]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ln=new Map,bn=new Map;function Zt(ot,Ie){try{ot.container.addComponent(Ie)}catch(st){H.debug(`Component ${Ie.name} failed to register with FirebaseApp ${ot.name}`,st)}}function nn(ot,Ie){ot.container.addOrOverwriteComponent(Ie)}function Wr(ot){const Ie=ot.name;if(bn.has(Ie))return H.debug(`There were multiple attempts to register component ${Ie}.`),!1;bn.set(Ie,ot);for(const st of ln.values())Zt(st,ot);return!0}function Ft(ot,Ie){const st=ot.container.getProvider("heartbeat").getImmediate({optional:!0});return st&&st.triggerHeartbeat(),ot.container.getProvider(Ie)}function dn(ot,Ie,st=jt){Ft(ot,Ie).clearInstance(st)}function cs(){bn.clear()}const zr=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ti{constructor(Ie,st,xt){this._isDeleted=!1,this._options=Object.assign({},Ie),this._config=Object.assign({},st),this._name=st.name,this._automaticDataCollectionEnabled=st.automaticDataCollectionEnabled,this._container=xt,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ie){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ie}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ie){this._isDeleted=Ie}checkDestroyed(){if(this.isDeleted)throw zr.create("app-deleted",{appName:this._name})}}const ho="9.15.0";function Ri(ot,Ie={}){let st=ot;"object"!=typeof Ie&&(Ie={name:Ie});const xt=Object.assign({name:jt,automaticDataCollectionEnabled:!1},Ie),Rt=xt.name;if("string"!=typeof Rt||!Rt)throw zr.create("bad-app-name",{appName:String(Rt)});if(st||(st=(0,se.aH)()),!st)throw zr.create("no-options");const Ut=ln.get(Rt);if(Ut){if((0,se.vZ)(st,Ut.options)&&(0,se.vZ)(xt,Ut.config))return Ut;throw zr.create("duplicate-app",{appName:Rt})}const G=new X.H0(Rt);for(const q of bn.values())G.addComponent(q);const B=new ti(st,xt,G);return ln.set(Rt,B),B}function pi(ot=jt){const Ie=ln.get(ot);if(!Ie&&ot===jt)return Ri();if(!Ie)throw zr.create("no-app",{appName:ot});return Ie}function gi(){return Array.from(ln.values())}function ka(ot){return tt.apply(this,arguments)}function tt(){return(tt=(0,d.Z)(function*(ot){const Ie=ot.name;ln.has(Ie)&&(ln.delete(Ie),yield Promise.all(ot.container.getProviders().map(st=>st.delete())),ot.isDeleted=!0)})).apply(this,arguments)}function Pr(ot,Ie,st){var xt;let Rt=null!==(xt=et[ot])&&void 0!==xt?xt:ot;st&&(Rt+=`-${st}`);const Ut=Rt.match(/\s|\//),G=Ie.match(/\s|\//);if(Ut||G){const B=[`Unable to register library "${Rt}" with version "${Ie}":`];return Ut&&B.push(`library name "${Rt}" contains illegal characters (whitespace or "/")`),Ut&&G&&B.push("and"),G&&B.push(`version name "${Ie}" contains illegal characters (whitespace or "/")`),void H.warn(B.join(" "))}Wr(new X.wA(`${Rt}-version`,()=>({library:Rt,version:Ie}),"VERSION"))}function Hs(ot,Ie){if(null!==ot&&"function"!=typeof ot)throw zr.create("invalid-log-argument");(0,k.Am)(ot,Ie)}function Yn(ot){(0,k.Ub)(ot)}const Pn="firebase-heartbeat-store";let Wn=null;function gn(){return Wn||(Wn=(0,oe.X3)("firebase-heartbeat-database",1,{upgrade:(ot,Ie)=>{0===Ie&&ot.createObjectStore(Pn)}}).catch(ot=>{throw zr.create("idb-open",{originalErrorMessage:ot.message})})),Wn}function pt(){return(pt=(0,d.Z)(function*(ot){try{return(yield gn()).transaction(Pn).objectStore(Pn).get(zn(ot))}catch(Ie){if(Ie instanceof se.ZR)H.warn(Ie.message);else{const st=zr.create("idb-get",{originalErrorMessage:Ie?.message});H.warn(st.message)}}})).apply(this,arguments)}function an(ot,Ie){return Er.apply(this,arguments)}function Er(){return(Er=(0,d.Z)(function*(ot,Ie){try{const xt=(yield gn()).transaction(Pn,"readwrite");return yield xt.objectStore(Pn).put(Ie,zn(ot)),xt.done}catch(st){if(st instanceof se.ZR)H.warn(st.message);else{const xt=zr.create("idb-set",{originalErrorMessage:st?.message});H.warn(xt.message)}}})).apply(this,arguments)}function zn(ot){return`${ot.name}!${ot.options.appId}`}class js{constructor(Ie){this.container=Ie,this._heartbeatsCache=null;const st=this.container.getProvider("app").getImmediate();this._storage=new sn(st),this._heartbeatsCachePromise=this._storage.read().then(xt=>(this._heartbeatsCache=xt,xt))}triggerHeartbeat(){var Ie=this;return(0,d.Z)(function*(){const xt=Ie.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Rt=rn();if(null===Ie._heartbeatsCache&&(Ie._heartbeatsCache=yield Ie._heartbeatsCachePromise),Ie._heartbeatsCache.lastSentHeartbeatDate!==Rt&&!Ie._heartbeatsCache.heartbeats.some(Ut=>Ut.date===Rt))return Ie._heartbeatsCache.heartbeats.push({date:Rt,agent:xt}),Ie._heartbeatsCache.heartbeats=Ie._heartbeatsCache.heartbeats.filter(Ut=>{const G=new Date(Ut.date).valueOf();return Date.now()-G<=2592e6}),Ie._storage.overwrite(Ie._heartbeatsCache)})()}getHeartbeatsHeader(){var Ie=this;return(0,d.Z)(function*(){if(null===Ie._heartbeatsCache&&(yield Ie._heartbeatsCachePromise),null===Ie._heartbeatsCache||0===Ie._heartbeatsCache.heartbeats.length)return"";const st=rn(),{heartbeatsToSend:xt,unsentEntries:Rt}=function zi(ot,Ie=1024){const st=[];let xt=ot.slice();for(const Rt of ot){const Ut=st.find(G=>G.agent===Rt.agent);if(Ut){if(Ut.dates.push(Rt.date),Qn(st)>Ie){Ut.dates.pop();break}}else if(st.push({agent:Rt.agent,dates:[Rt.date]}),Qn(st)>Ie){st.pop();break}xt=xt.slice(1)}return{heartbeatsToSend:st,unsentEntries:xt}}(Ie._heartbeatsCache.heartbeats),Ut=(0,se.L)(JSON.stringify({version:2,heartbeats:xt}));return Ie._heartbeatsCache.lastSentHeartbeatDate=st,Rt.length>0?(Ie._heartbeatsCache.heartbeats=Rt,yield Ie._storage.overwrite(Ie._heartbeatsCache)):(Ie._heartbeatsCache.heartbeats=[],Ie._storage.overwrite(Ie._heartbeatsCache)),Ut})()}}function rn(){return(new Date).toISOString().substring(0,10)}class sn{constructor(Ie){this.app=Ie,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ie=this;return(0,d.Z)(function*(){return(yield Ie._canUseIndexedDBPromise)&&(yield function wt(ot){return pt.apply(this,arguments)}(Ie.app))||{heartbeats:[]}})()}overwrite(Ie){var st=this;return(0,d.Z)(function*(){var xt;if(yield st._canUseIndexedDBPromise){const Ut=yield st.read();return an(st.app,{lastSentHeartbeatDate:null!==(xt=Ie.lastSentHeartbeatDate)&&void 0!==xt?xt:Ut.lastSentHeartbeatDate,heartbeats:Ie.heartbeats})}})()}add(Ie){var st=this;return(0,d.Z)(function*(){var xt;if(yield st._canUseIndexedDBPromise){const Ut=yield st.read();return an(st.app,{lastSentHeartbeatDate:null!==(xt=Ie.lastSentHeartbeatDate)&&void 0!==xt?xt:Ut.lastSentHeartbeatDate,heartbeats:[...Ut.heartbeats,...Ie.heartbeats]})}})()}}function Qn(ot){return(0,se.L)(JSON.stringify({version:2,heartbeats:ot})).length}!function qr(ot){Wr(new X.wA("platform-logger",Ie=>new de(Ie),"PRIVATE")),Wr(new X.wA("heartbeat",Ie=>new js(Ie),"PRIVATE")),Pr(he,"0.9.0",ot),Pr(he,"0.9.0","esm2017"),Pr("fire-js","")}("")},4859:(ft,Ce,P)=>{P.d(Ce,{H0:()=>he,wA:()=>k});var d=P(5861),X=P(2090);class k{constructor(H,j,K){this.name=H,this.instanceFactory=j,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const se="[DEFAULT]";class oe{constructor(H,j){this.name=H,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const j=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has(j)){const K=new X.BH;if(this.instancesDeferred.set(j,K),this.isInitialized(j)||this.shouldAutoInitialize())try{const Le=this.getOrInitializeService({instanceIdentifier:j});Le&&K.resolve(Le)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate(H){var j;const K=this.normalizeInstanceIdentifier(H?.identifier),Le=null!==(j=H?.optional)&&void 0!==j&&j;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if(Le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(xe){if(Le)return null;throw xe}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if(function ce(fe){return"EAGER"===fe.instantiationMode}(H))try{this.getOrInitializeService({instanceIdentifier:se})}catch{}for(const[j,K]of this.instancesDeferred.entries()){const Le=this.normalizeInstanceIdentifier(j);try{const xe=this.getOrInitializeService({instanceIdentifier:Le});K.resolve(xe)}catch{}}}}clearInstance(H=se){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,d.Z)(function*(){const j=Array.from(H.instances.values());yield Promise.all([...j.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...j.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=se){return this.instances.has(H)}getOptions(H=se){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:j={}}=H,K=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Le=this.getOrInitializeService({instanceIdentifier:K,options:j});for(const[xe,De]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(xe)&&De.resolve(Le);return Le}onInit(H,j){var K;const Le=this.normalizeInstanceIdentifier(j),xe=null!==(K=this.onInitCallbacks.get(Le))&&void 0!==K?K:new Set;xe.add(H),this.onInitCallbacks.set(Le,xe);const De=this.instances.get(Le);return De&&H(De,Le),()=>{xe.delete(H)}}invokeOnInitCallbacks(H,j){const K=this.onInitCallbacks.get(j);if(K)for(const Le of K)try{Le(H,j)}catch{}}getOrInitializeService({instanceIdentifier:H,options:j={}}){let K=this.instances.get(H);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(fe=H,fe===se?void 0:fe),options:j}),this.instances.set(H,K),this.instancesOptions.set(H,j),this.invokeOnInitCallbacks(K,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,K)}catch{}var fe;return K||null}normalizeInstanceIdentifier(H=se){return this.component?this.component.multipleInstances?H:se:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const j=this.getProvider(H.name);if(j.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);j.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const j=new oe(H,this);return this.providers.set(H,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(ft,Ce,P)=>{P.d(Ce,{Am:()=>fe,Ub:()=>he,Yd:()=>ce,in:()=>X});const d=[];var X=(()=>{return(H=X||(X={}))[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",X;var H})();const k={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},se=X.INFO,oe={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},de=(H,j,...K)=>{if(j<H.logLevel)return;const Le=(new Date).toISOString(),xe=oe[j];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[xe](`[${Le}]  ${H.name}:`,...K)};class ce{constructor(j){this.name=j,this._logLevel=se,this._logHandler=de,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in X))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?k[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...j),this._logHandler(this,X.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...j),this._logHandler(this,X.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,X.INFO,...j),this._logHandler(this,X.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,X.WARN,...j),this._logHandler(this,X.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...j),this._logHandler(this,X.ERROR,...j)}}function he(H){d.forEach(j=>{j.setLogLevel(H)})}function fe(H,j){for(const K of d){let Le=null;j&&j.level&&(Le=k[j.level]),K.userLogHandler=null===H?null:(xe,De,...lt)=>{const ye=lt.map(pe=>{if(null==pe)return null;if("string"==typeof pe)return pe;if("number"==typeof pe||"boolean"==typeof pe)return pe.toString();if(pe instanceof Error)return pe.message;try{return JSON.stringify(pe)}catch{return null}}).filter(pe=>pe).join(" ");De>=(Le??xe.logLevel)&&H({level:X[De].toLowerCase(),message:ye,args:lt,type:xe.name})}}}},259:(ft,Ce,P)=>{P.d(Ce,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=P(9681);(0,d.registerVersion)("firebase","9.15.0","app")},9260:(ft,Ce,P)=>{P.d(Ce,{Z:()=>d.Z});var d=P(3942);d.Z.registerVersion("firebase","9.15.0","app-compat")},9169:(ft,Ce,P)=>{P.r(Ce);var d=P(5861),X=P(3942),k=P(2090),se=P(9681),oe=P(1877),de=P(655),ce=P(4859);const De=function Le(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},lt=function xe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ye=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),it=new oe.Yd("@firebase/auth");function dt(y,...f){it.logLevel<=oe.in.ERROR&&it.error(`Auth (${se.SDK_VERSION}): ${y}`,...f)}function Ne(y,...f){throw We(y,...f)}function be(y,...f){return We(y,...f)}function Ee(y,f,m){const b=Object.assign(Object.assign({},lt()),{[f]:m});return new k.LL("auth","Firebase",b).create(f,{appName:y.name})}function je(y,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&Ne(y,"argument-error"),Ee(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function We(y,...f){if("string"!=typeof y){const m=f[0],b=[...f.slice(1)];return b[0]&&(b[0].appName=y.name),y._errorFactory.create(m,...b)}return ye.create(y,...f)}function U(y,f,...m){if(!y)throw We(f,...m)}function me(y){const f="INTERNAL ASSERTION FAILED: "+y;throw dt(f),new Error(f)}function z(y,f){y||me(f)}const J=new Map;function ie(y){z(y instanceof Function,"Expected a class definition");let f=J.get(y);return f?(z(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,J.set(y,f),f)}function ke(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function _t(){return"http:"===tn()||"https:"===tn()}function tn(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class ln{constructor(f,m){this.shortDelay=f,this.longDelay=m,z(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function jt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(_t()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function bn(y,f){z(y.emulator,"Emulator should always be set here");const{url:m}=y.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class Zt{static initialize(f,m,b){this.fetchImpl=f,m&&(this.headersImpl=m),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void me("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void me("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void me("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const nn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Wr=new ln(3e4,6e4);function Ft(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function dn(y,f,m,b){return cs.apply(this,arguments)}function cs(){return(cs=(0,d.Z)(function*(y,f,m,b,N={}){return Oi(y,N,(0,d.Z)(function*(){let O={},W={};b&&("GET"===f?W=b:O={body:JSON.stringify(b)});const ge=(0,k.xO)(Object.assign({key:y.config.apiKey},W)).slice(1),Ue=yield y._getAdditionalHeaders();return Ue["Content-Type"]="application/json",y.languageCode&&(Ue["X-Firebase-Locale"]=y.languageCode),Zt.fetch()(Ri(y,y.config.apiHost,m,ge),Object.assign({method:f,headers:Ue,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function Oi(y,f,m){return zr.apply(this,arguments)}function zr(){return(zr=(0,d.Z)(function*(y,f,m){y._canInitEmulator=!1;const b=Object.assign(Object.assign({},nn),f);try{const N=new pi(y),O=yield Promise.race([m(),N.promise]);N.clearNetworkTimeout();const W=yield O.json();if("needConfirmation"in W)throw gi(y,"account-exists-with-different-credential",W);if(O.ok&&!("errorMessage"in W))return W;{const ge=O.ok?W.errorMessage:W.error.message,[Ue,rt]=ge.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ue)throw gi(y,"credential-already-in-use",W);if("EMAIL_EXISTS"===Ue)throw gi(y,"email-already-in-use",W);if("USER_DISABLED"===Ue)throw gi(y,"user-disabled",W);const Ct=b[Ue]||Ue.toLowerCase().replace(/[_\s]+/g,"-");if(rt)throw Ee(y,Ct,rt);Ne(y,Ct)}}catch(N){if(N instanceof k.ZR)throw N;Ne(y,"network-request-failed")}})).apply(this,arguments)}function ti(y,f,m,b){return ho.apply(this,arguments)}function ho(){return(ho=(0,d.Z)(function*(y,f,m,b,N={}){const O=yield dn(y,f,m,b,N);return"mfaPendingCredential"in O&&Ne(y,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Ri(y,f,m,b){const N=`${f}${m}?${b}`;return y.config.emulator?bn(y.config,N):`${y.config.apiScheme}://${N}`}class pi{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,b)=>{this.timer=setTimeout(()=>b(be(this.auth,"network-request-failed")),Wr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gi(y,f,m){const b={appName:y.name};m.email&&(b.email=m.email),m.phoneNumber&&(b.phoneNumber=m.phoneNumber);const N=be(y,f,b);return N.customData._tokenResponse=m,N}function tt(){return(tt=(0,d.Z)(function*(y,f){return dn(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Pr(y,f){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,d.Z)(function*(y,f){return dn(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Yn(y,f){return mi.apply(this,arguments)}function mi(){return(mi=(0,d.Z)(function*(y,f){return dn(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Wi(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function gn(){return(gn=(0,d.Z)(function*(y,f=!1){const m=(0,k.m9)(y),b=yield m.getIdToken(f),N=pt(b);U(N&&N.exp&&N.auth_time&&N.iat,m.auth,"internal-error");const O="object"==typeof N.firebase?N.firebase:void 0,W=O?.sign_in_provider;return{claims:N,token:b,authTime:Wi(wt(N.auth_time)),issuedAtTime:Wi(wt(N.iat)),expirationTime:Wi(wt(N.exp)),signInProvider:W||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function wt(y){return 1e3*Number(y)}function pt(y){const[f,m,b]=y.split(".");if(void 0===f||void 0===m||void 0===b)return dt("JWT malformed, contained fewer than 3 sections"),null;try{const N=(0,k.tV)(m);return N?JSON.parse(N):(dt("Failed to decode base64 JWT payload"),null)}catch(N){return dt("Caught error parsing JWT payload as JSON",N?.toString()),null}}function Er(y,f){return zn.apply(this,arguments)}function zn(){return(zn=(0,d.Z)(function*(y,f,m=!1){if(m)return f;try{return yield f}catch(b){throw b instanceof k.ZR&&ni(b)&&y.auth.currentUser===y&&(yield y.auth.signOut()),b}})).apply(this,arguments)}function ni({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Ot{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const N=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,N)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const b=this.getInterval(f);this.timerId=setTimeout((0,d.Z)(function*(){yield m.iteration()}),b)}iteration(){var f=this;return(0,d.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&f.schedule(!0))}f.schedule()})()}}class js{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wi(this.lastLoginAt),this.creationTime=Wi(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function rn(y){return zi.apply(this,arguments)}function zi(){return(zi=(0,d.Z)(function*(y){var f;const m=y.auth,b=yield y.getIdToken(),N=yield Er(y,Yn(m,{idToken:b}));U(N?.users.length,m,"internal-error");const O=N.users[0];y._notifyReloadListener(O);const W=null!==(f=O.providerUserInfo)&&void 0!==f&&f.length?ot(O.providerUserInfo):[],ge=qr(y.providerData,W),Ct=!!y.isAnonymous&&!(y.email&&O.passwordHash||ge?.length),vt={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:ge,metadata:new js(O.createdAt,O.lastLoginAt),isAnonymous:Ct};Object.assign(y,vt)})).apply(this,arguments)}function Qn(){return(Qn=(0,d.Z)(function*(y){const f=(0,k.m9)(y);yield rn(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function qr(y,f){return[...y.filter(b=>!f.some(N=>N.providerId===b.providerId)),...f]}function ot(y){return y.map(f=>{var{providerId:m}=f,b=(0,de._T)(f,["providerId"]);return{providerId:m,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function st(){return(st=(0,d.Z)(function*(y,f){const m=yield Oi(y,{},(0,d.Z)(function*(){const b=(0,k.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:N,apiKey:O}=y.config,W=Ri(y,N,"/v1/token",`key=${O}`),ge=yield y._getAdditionalHeaders();return ge["Content-Type"]="application/x-www-form-urlencoded",Zt.fetch()(W,{method:"POST",headers:ge,body:b})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class xt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){U(f.idToken,"internal-error"),U(typeof f.idToken<"u","internal-error"),U(typeof f.refreshToken<"u","internal-error");const m="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function an(y){const f=pt(y);return U(f,"internal-error"),U(typeof f.exp<"u","internal-error"),U(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var b=this;return(0,d.Z)(function*(){return U(!b.accessToken||b.refreshToken,f,"user-token-expired"),m||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(f,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var b=this;return(0,d.Z)(function*(){const{accessToken:N,refreshToken:O,expiresIn:W}=yield function Ie(y,f){return st.apply(this,arguments)}(f,m);b.updateTokensAndExpiration(N,O,Number(W))})()}updateTokensAndExpiration(f,m,b){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(f,m){const{refreshToken:b,accessToken:N,expirationTime:O}=m,W=new xt;return b&&(U("string"==typeof b,"internal-error",{appName:f}),W.refreshToken=b),N&&(U("string"==typeof N,"internal-error",{appName:f}),W.accessToken=N),O&&(U("number"==typeof O,"internal-error",{appName:f}),W.expirationTime=O),W}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new xt,this.toJSON())}_performRefresh(){return me("not implemented")}}function Rt(y,f){U("string"==typeof y||typeof y>"u","internal-error",{appName:f})}class Ut{constructor(f){var{uid:m,auth:b,stsTokenManager:N}=f,O=(0,de._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ot(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=b,this.stsTokenManager=N,this.accessToken=N.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new js(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,d.Z)(function*(){const b=yield Er(m,m.stsTokenManager.getToken(m.auth,f));return U(b,m.auth,"internal-error"),m.accessToken!==b&&(m.accessToken=b,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),b})()}getIdTokenResult(f){return function Wn(y){return gn.apply(this,arguments)}(this,f)}reload(){return function sn(y){return Qn.apply(this,arguments)}(this)}_assign(f){this!==f&&(U(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new Ut(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var b=this;return(0,d.Z)(function*(){let N=!1;f.idToken&&f.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(f),N=!0),m&&(yield rn(b)),yield b.auth._persistUserIfCurrent(b),N&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var f=this;return(0,d.Z)(function*(){const m=yield f.getIdToken();return yield Er(f,function ka(y,f){return tt.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var b,N,O,W,ge,Ue,rt,Ct;const vt=null!==(b=m.displayName)&&void 0!==b?b:void 0,sr=null!==(N=m.email)&&void 0!==N?N:void 0,or=null!==(O=m.phoneNumber)&&void 0!==O?O:void 0,ro=null!==(W=m.photoURL)&&void 0!==W?W:void 0,mp=null!==(ge=m.tenantId)&&void 0!==ge?ge:void 0,_p=null!==(Ue=m._redirectEventId)&&void 0!==Ue?Ue:void 0,yp=null!==(rt=m.createdAt)&&void 0!==rt?rt:void 0,qy=null!==(Ct=m.lastLoginAt)&&void 0!==Ct?Ct:void 0,{uid:cm,emailVerified:Ky,isAnonymous:Tu,providerData:dl,stsTokenManager:Wc}=m;U(cm&&Wc,f,"internal-error");const vp=xt.fromJSON(this.name,Wc);U("string"==typeof cm,f,"internal-error"),Rt(vt,f.name),Rt(sr,f.name),U("boolean"==typeof Ky,f,"internal-error"),U("boolean"==typeof Tu,f,"internal-error"),Rt(or,f.name),Rt(ro,f.name),Rt(mp,f.name),Rt(_p,f.name),Rt(yp,f.name),Rt(qy,f.name);const bh=new Ut({uid:cm,auth:f,email:sr,emailVerified:Ky,displayName:vt,isAnonymous:Tu,photoURL:ro,phoneNumber:or,tenantId:mp,stsTokenManager:vp,createdAt:yp,lastLoginAt:qy});return dl&&Array.isArray(dl)&&(bh.providerData=dl.map(hl=>Object.assign({},hl))),_p&&(bh._redirectEventId=_p),bh}static _fromIdTokenResponse(f,m,b=!1){return(0,d.Z)(function*(){const N=new xt;N.updateFromServerResponse(m);const O=new Ut({uid:m.localId,auth:f,stsTokenManager:N,isAnonymous:b});return yield rn(O),O})()}}const B=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(m,b){var N=this;return(0,d.Z)(function*(){N.storage[m]=b})()}_get(m){var b=this;return(0,d.Z)(function*(){const N=b.storage[m];return void 0===N?null:N})()}_remove(m){var b=this;return(0,d.Z)(function*(){delete b.storage[m]})()}_addListener(m,b){}_removeListener(m,b){}}return y.type="NONE",y})();function q(y,f,m){return`firebase:${y}:${f}:${m}`}class we{constructor(f,m,b){this.persistence=f,this.auth=m,this.userKey=b;const{config:N,name:O}=this.auth;this.fullUserKey=q(this.userKey,N.apiKey,O),this.fullPersistenceKey=q("persistence",N.apiKey,O),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,d.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?Ut._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,d.Z)(function*(){if(m.persistence===f)return;const b=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,b?m.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,b="authUser"){return(0,d.Z)(function*(){if(!m.length)return new we(ie(B),f,b);const N=(yield Promise.all(m.map(function(){var rt=(0,d.Z)(function*(Ct){if(yield Ct._isAvailable())return Ct});return function(Ct){return rt.apply(this,arguments)}}()))).filter(rt=>rt);let O=N[0]||ie(B);const W=q(b,f.config.apiKey,f.name);let ge=null;for(const rt of m)try{const Ct=yield rt._get(W);if(Ct){const vt=Ut._fromJSON(f,Ct);rt!==O&&(ge=vt),O=rt;break}}catch{}const Ue=N.filter(rt=>rt._shouldAllowMigration);return O._shouldAllowMigration&&Ue.length?(O=Ue[0],ge&&(yield O._set(W,ge.toJSON())),yield Promise.all(m.map(function(){var rt=(0,d.Z)(function*(Ct){if(Ct!==O)try{yield Ct._remove(W)}catch{}});return function(Ct){return rt.apply(this,arguments)}}())),new we(O,f,b)):new we(O,f,b)})()}}function Q(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(fn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Ke(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Ve(f))return"Blackberry";if(qe(f))return"Webos";if(yt(f))return"Safari";if((f.includes("chrome/")||Yt(f))&&!f.includes("edge/"))return"Chrome";if(Wt(f))return"Android";{const b=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===b?.length)return b[1]}return"Other"}function Ke(y=(0,k.z$)()){return/firefox\//i.test(y)}function yt(y=(0,k.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Yt(y=(0,k.z$)()){return/crios\//i.test(y)}function fn(y=(0,k.z$)()){return/iemobile/i.test(y)}function Wt(y=(0,k.z$)()){return/android/i.test(y)}function Ve(y=(0,k.z$)()){return/blackberry/i.test(y)}function qe(y=(0,k.z$)()){return/webos/i.test(y)}function Ht(y=(0,k.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function fo(y=(0,k.z$)()){return Ht(y)||Wt(y)||qe(y)||Ve(y)||/windows phone/i.test(y)||fn(y)}function Gs(y,f=[]){let m;switch(y){case"Browser":m=Q((0,k.z$)());break;case"Worker":m=`${Q((0,k.z$)())}-${y}`;break;default:m=y}const b=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${se.SDK_VERSION}/${b}`}class jo{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,m){const b=O=>new Promise((W,ge)=>{try{W(f(O))}catch(Ue){ge(Ue)}});b.onAbort=m,this.queue.push(b);const N=this.queue.length-1;return()=>{this.queue[N]=()=>Promise.resolve()}}runMiddleware(f){var m=this;return(0,d.Z)(function*(){if(m.auth.currentUser===f)return;const b=[];try{for(const N of m.queue)yield N(f),N.onAbort&&b.push(N.onAbort)}catch(N){b.reverse();for(const O of b)try{O()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:N?.message})}})()}}class Lt{constructor(f,m,b){this.app=f,this.heartbeatServiceProvider=m,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new po(this),this.idTokenSubscription=new po(this),this.beforeStateQueue=new jo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ye,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(f,m){var b=this;return m&&(this._popupRedirectResolver=ie(m)),this._initializationPromise=this.queue((0,d.Z)(function*(){var N,O;if(!b._deleted&&(b.persistenceManager=yield we.create(b,f),!b._deleted)){if(null!==(N=b._popupRedirectResolver)&&void 0!==N&&N._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch{}yield b.initializeCurrentUser(m),b.lastNotifiedUid=(null===(O=b.currentUser)||void 0===O?void 0:O.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,d.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m,!0)}})()}initializeCurrentUser(f){var m=this;return(0,d.Z)(function*(){var b;const N=yield m.assertedPersistence.getCurrentUser();let O=N,W=!1;if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const ge=null===(b=m.redirectUser)||void 0===b?void 0:b._redirectEventId,Ue=O?._redirectEventId,rt=yield m.tryRedirectSignIn(f);(!ge||ge===Ue)&&rt?.user&&(O=rt.user,W=!0)}if(!O)return m.directlySetCurrentUser(null);if(!O._redirectEventId){if(W)try{yield m.beforeStateQueue.runMiddleware(O)}catch(ge){O=N,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(ge))}return O?m.reloadAndSetCurrentUserOrClear(O):m.directlySetCurrentUser(null)}return U(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===O._redirectEventId?m.directlySetCurrentUser(O):m.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(f){var m=this;return(0,d.Z)(function*(){let b=null;try{b=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch{yield m._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,d.Z)(function*(){try{yield rn(f)}catch(b){if("auth/network-request-failed"!==b?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function et(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,d.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,d.Z)(function*(){const b=f?(0,k.m9)(f):null;return b&&U(b.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(b&&b._clone(m))})()}_updateCurrentUser(f,m=!1){var b=this;return(0,d.Z)(function*(){if(!b._deleted)return f&&U(b.tenantId===f.tenantId,b,"tenant-id-mismatch"),m||(yield b.beforeStateQueue.runMiddleware(f)),b.queue((0,d.Z)(function*(){yield b.directlySetCurrentUser(f),b.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,d.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var m=this;return this.queue((0,d.Z)(function*(){yield m.assertedPersistence.setPersistence(ie(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new k.LL("auth","Firebase",f())}onAuthStateChanged(f,m,b){return this.registerStateListener(this.authStateSubscription,f,m,b)}beforeAuthStateChanged(f,m){return this.beforeStateQueue.pushCallback(f,m)}onIdTokenChanged(f,m,b){return this.registerStateListener(this.idTokenSubscription,f,m,b)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var b=this;return(0,d.Z)(function*(){const N=yield b.getOrInitRedirectPersistenceManager(m);return null===f?N.removeCurrentUser():N.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,d.Z)(function*(){if(!m.redirectPersistenceManager){const b=f&&ie(f)||m._popupRedirectResolver;U(b,m,"argument-error"),m.redirectPersistenceManager=yield we.create(m,[ie(b._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,d.Z)(function*(){var b,N;return m._isInitialized&&(yield m.queue((0,d.Z)(function*(){}))),(null===(b=m._currentUser)||void 0===b?void 0:b._redirectEventId)===f?m._currentUser:(null===(N=m.redirectUser)||void 0===N?void 0:N._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,d.Z)(function*(){if(f===m.currentUser)return m.queue((0,d.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,b,N){if(this._deleted)return()=>{};const O="function"==typeof m?m:m.next.bind(m),W=this._isInitialized?Promise.resolve():this._initializationPromise;return U(W,this,"internal-error"),W.then(()=>O(this.currentUser)),"function"==typeof m?f.addObserver(m,b,N):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,d.Z)(function*(){m.currentUser&&m.currentUser!==f&&m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh(),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Gs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,d.Z)(function*(){var m;const b={"X-Client-Version":f.clientVersion};f.app.options.appId&&(b["X-Firebase-gmpid"]=f.app.options.appId);const N=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return N&&(b["X-Firebase-Client"]=N),b})()}}function Dn(y){return(0,k.m9)(y)}class po{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,k.ne)(m=>this.observer=m)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function qi(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function $s(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class Ir{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return me("not implemented")}_getIdTokenResponse(f){return me("not implemented")}_linkToIdToken(f,m){return me("not implemented")}_getReauthenticationResolver(f){return me("not implemented")}}function Kn(y,f){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,d.Z)(function*(y,f){return dn(y,"POST","/v1/accounts:resetPassword",Ft(y,f))})).apply(this,arguments)}function hn(y,f){return sc.apply(this,arguments)}function sc(){return(sc=(0,d.Z)(function*(y,f){return dn(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function oc(y,f){return go.apply(this,arguments)}function go(){return(go=(0,d.Z)(function*(y,f){return dn(y,"POST","/v1/accounts:update",Ft(y,f))})).apply(this,arguments)}function Ki(){return(Ki=(0,d.Z)(function*(y,f){return ti(y,"POST","/v1/accounts:signInWithPassword",Ft(y,f))})).apply(this,arguments)}function zs(y,f){return ki.apply(this,arguments)}function ki(){return(ki=(0,d.Z)(function*(y,f){return dn(y,"POST","/v1/accounts:sendOobCode",Ft(y,f))})).apply(this,arguments)}function Fn(y,f){return ac.apply(this,arguments)}function ac(){return(ac=(0,d.Z)(function*(y,f){return zs(y,f)})).apply(this,arguments)}function gr(y,f){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,d.Z)(function*(y,f){return zs(y,f)})).apply(this,arguments)}function Ul(y,f){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,d.Z)(function*(y,f){return zs(y,f)})).apply(this,arguments)}function lc(y,f){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,d.Z)(function*(y,f){return zs(y,f)})).apply(this,arguments)}function Od(){return(Od=(0,d.Z)(function*(y,f){return ti(y,"POST","/v1/accounts:signInWithEmailLink",Ft(y,f))})).apply(this,arguments)}function mo(){return(mo=(0,d.Z)(function*(y,f){return ti(y,"POST","/v1/accounts:signInWithEmailLink",Ft(y,f))})).apply(this,arguments)}class uc extends Ir{constructor(f,m,b,N=null){super("password",b),this._email=f,this._password=m,this._tenantId=N}static _fromEmailAndPassword(f,m){return new uc(f,m,"password")}static _fromEmailAndCode(f,m,b=null){return new uc(f,m,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,d.Z)(function*(){switch(m.signInMethod){case"password":return function Pa(y,f){return Ki.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Ff(y,f){return Od.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:Ne(f,"internal-error")}})()}_linkToIdToken(f,m){var b=this;return(0,d.Z)(function*(){switch(b.signInMethod){case"password":return hn(f,{idToken:m,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function Lf(y,f){return mo.apply(this,arguments)}(f,{idToken:m,email:b._email,oobCode:b._password});default:Ne(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Xn(y,f){return Rd.apply(this,arguments)}function Rd(){return(Rd=(0,d.Z)(function*(y,f){return ti(y,"POST","/v1/accounts:signInWithIdp",Ft(y,f))})).apply(this,arguments)}class ds extends Ir{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new ds(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):Ne("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:b,signInMethod:N}=m,O=(0,de._T)(m,["providerId","signInMethod"]);if(!b||!N)return null;const W=new ds(b,N);return W.idToken=O.idToken||void 0,W.accessToken=O.accessToken||void 0,W.secret=O.secret,W.nonce=O.nonce,W.pendingToken=O.pendingToken||null,W}_getIdTokenResponse(f){return Xn(f,this.buildRequest())}_linkToIdToken(f,m){const b=this.buildRequest();return b.idToken=m,Xn(f,b)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Xn(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,k.xO)(m)}return f}}function Gg(y,f){return kd.apply(this,arguments)}function kd(){return(kd=(0,d.Z)(function*(y,f){return dn(y,"POST","/v1/accounts:sendVerificationCode",Ft(y,f))})).apply(this,arguments)}function qs(){return(qs=(0,d.Z)(function*(y,f){return ti(y,"POST","/v1/accounts:signInWithPhoneNumber",Ft(y,f))})).apply(this,arguments)}function Pd(){return(Pd=(0,d.Z)(function*(y,f){const m=yield ti(y,"POST","/v1/accounts:signInWithPhoneNumber",Ft(y,f));if(m.temporaryProof)throw gi(y,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Wg={USER_NOT_FOUND:"user-not-found"};function Fd(){return(Fd=(0,d.Z)(function*(y,f){return ti(y,"POST","/v1/accounts:signInWithPhoneNumber",Ft(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Wg)})).apply(this,arguments)}class Ks extends Ir{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new Ks({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new Ks({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function cc(y,f){return qs.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function $g(y,f){return Pd.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function zg(y,f){return Fd.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:b,verificationCode:N}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:b,code:N}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:b,phoneNumber:N,temporaryProof:O}=f;return b||m||N||O?new Ks({verificationId:m,verificationCode:b,phoneNumber:N,temporaryProof:O}):null}}class Hl{constructor(f){var m,b,N,O,W,ge;const Ue=(0,k.zd)((0,k.pd)(f)),rt=null!==(m=Ue.apiKey)&&void 0!==m?m:null,Ct=null!==(b=Ue.oobCode)&&void 0!==b?b:null,vt=function Ld(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(N=Ue.mode)&&void 0!==N?N:null);U(rt&&Ct&&vt,"argument-error"),this.apiKey=rt,this.operation=vt,this.code=Ct,this.continueUrl=null!==(O=Ue.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(W=Ue.languageCode)&&void 0!==W?W:null,this.tenantId=null!==(ge=Ue.tenantId)&&void 0!==ge?ge:null}static parseLink(f){const m=function Vd(y){const f=(0,k.zd)((0,k.pd)(y)).link,m=f?(0,k.zd)((0,k.pd)(f)).deep_link_id:null,b=(0,k.zd)((0,k.pd)(y)).deep_link_id;return(b?(0,k.zd)((0,k.pd)(b)).link:null)||b||m||f||y}(f);try{return new Hl(m)}catch{return null}}}let Zi=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(m,b){return uc._fromEmailAndPassword(m,b)}static credentialWithLink(m,b){const N=Hl.parseLink(b);return U(N,"argument-error"),uc._fromEmailAndCode(m,N.code,N.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class hs{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class fs extends hs{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class _o extends fs{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return U("providerId"in m&&"signInMethod"in m,"argument-error"),ds._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return U(f.idToken||f.accessToken,"argument-error"),ds._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return _o.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return _o.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:b,oauthTokenSecret:N,pendingToken:O,nonce:W,providerId:ge}=f;if(!b&&!N&&!m&&!O||!ge)return null;try{return new _o(ge)._credential({idToken:m,accessToken:b,nonce:W,pendingToken:O})}catch{return null}}}let La=(()=>{class y extends fs{constructor(){super("facebook.com")}static credential(m){return ds._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),jl=(()=>{class y extends fs{constructor(){super("google.com"),this.addScope("profile")}static credential(m,b){return ds._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:b})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:b,oauthAccessToken:N}=m;if(!b&&!N)return null;try{return y.credential(b,N)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),dc=(()=>{class y extends fs{constructor(){super("github.com")}static credential(m){return ds._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class mr extends Ir{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return Xn(f,this.buildRequest())}_linkToIdToken(f,m){const b=this.buildRequest();return b.idToken=m,Xn(f,b)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Xn(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:b,signInMethod:N,pendingToken:O}=m;return b&&N&&O&&b===N?new mr(b,O):null}static _create(f,m){return new mr(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class _i extends hs{constructor(f){U(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return _i.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return _i.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=mr.fromJSON(f);return U(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:b}=f;if(!m||!b)return null;try{return mr._create(b,m)}catch{return null}}}let ii=(()=>{class y extends fs{constructor(){super("twitter.com")}static credential(m,b){return ds._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:b})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:b,oauthTokenSecret:N}=m;if(!b||!N)return null;try{return y.credential(b,N)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Go(y,f){return hc.apply(this,arguments)}function hc(){return(hc=(0,d.Z)(function*(y,f){return ti(y,"POST","/v1/accounts:signUp",Ft(y,f))})).apply(this,arguments)}class Cr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,b,N=!1){return(0,d.Z)(function*(){const O=yield Ut._fromIdTokenResponse(f,b,N),W=Uf(b);return new Cr({user:O,providerId:W,_tokenResponse:b,operationType:m})})()}static _forOperation(f,m,b){return(0,d.Z)(function*(){yield f._updateTokensIfNecessary(b,!0);const N=Uf(b);return new Cr({user:f,providerId:N,_tokenResponse:b,operationType:m})})()}}function Uf(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Nn(){return(Nn=(0,d.Z)(function*(y){var f;const m=Dn(y);if(yield m._initializationPromise,null!==(f=m.currentUser)&&void 0!==f&&f.isAnonymous)return new Cr({user:m.currentUser,providerId:null,operationType:"signIn"});const b=yield Go(m,{returnSecureToken:!0}),N=yield Cr._fromIdTokenResponse(m,"signIn",b,!0);return yield m._updateCurrentUser(N.user),N})).apply(this,arguments)}class Gl extends k.ZR{constructor(f,m,b,N){var O;super(m.code,m.message),this.operationType=b,this.user=N,Object.setPrototypeOf(this,Gl.prototype),this.customData={appName:f.name,tenantId:null!==(O=f.tenantId)&&void 0!==O?O:void 0,_serverResponse:m.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(f,m,b,N){return new Gl(f,m,b,N)}}function jf(y,f,m,b){return("reauthenticate"===f?m._getReauthenticationResolver(y):m._getIdTokenResponse(y)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Gl._fromErrorAndOperation(y,O,f,b):O})}function yi(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function $l(){return($l=(0,d.Z)(function*(y,f){const m=(0,k.m9)(y);yield zt(!0,m,f);const{providerUserInfo:b}=yield Pr(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),N=yi(b||[]);return m.providerData=m.providerData.filter(O=>N.has(O.providerId)),N.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function $o(y,f){return gs.apply(this,arguments)}function gs(){return(gs=(0,d.Z)(function*(y,f,m=!1){const b=yield Er(y,f._linkToIdToken(y.auth,yield y.getIdToken()),m);return Cr._forOperation(y,"link",b)})).apply(this,arguments)}function zt(y,f,m){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,d.Z)(function*(y,f,m){yield rn(f);const N=!1===y?"provider-already-linked":"no-such-provider";U(yi(f.providerData).has(m)===y,f.auth,N)})).apply(this,arguments)}function yo(y,f){return zl.apply(this,arguments)}function zl(){return(zl=(0,d.Z)(function*(y,f,m=!1){const{auth:b}=y,N="reauthenticate";try{const O=yield Er(y,jf(b,N,f,y),m);U(O.idToken,b,"internal-error");const W=pt(O.idToken);U(W,b,"internal-error");const{sub:ge}=W;return U(y.uid===ge,b,"user-mismatch"),Cr._forOperation(y,N,O)}catch(O){throw"auth/user-not-found"===O?.code&&Ne(b,"user-mismatch"),O}})).apply(this,arguments)}function Pi(y,f){return ql.apply(this,arguments)}function ql(){return(ql=(0,d.Z)(function*(y,f,m=!1){const b="signIn",N=yield jf(y,b,f),O=yield Cr._fromIdTokenResponse(y,b,N);return m||(yield y._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Cn(y,f){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,d.Z)(function*(y,f){return Pi(Dn(y),f)})).apply(this,arguments)}function Kl(y,f){return Gf.apply(this,arguments)}function Gf(){return(Gf=(0,d.Z)(function*(y,f){const m=(0,k.m9)(y);return yield zt(!1,m,f.providerId),$o(m,f)})).apply(this,arguments)}function Zl(y,f){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,d.Z)(function*(y,f){return yo((0,k.m9)(y),f)})).apply(this,arguments)}function fc(y,f){return ms.apply(this,arguments)}function ms(){return(ms=(0,d.Z)(function*(y,f){return ti(y,"POST","/v1/accounts:signInWithCustomToken",Ft(y,f))})).apply(this,arguments)}function Va(){return(Va=(0,d.Z)(function*(y,f){const m=Dn(y),b=yield fc(m,{token:f,returnSecureToken:!0}),N=yield Cr._fromIdTokenResponse(m,"signIn",b);return yield m._updateCurrentUser(N.user),N})).apply(this,arguments)}class Te{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?Gt._fromServerResponse(f,m):Ne(f,"internal-error")}}class Gt extends Te{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new Gt(m)}}function Ql(y,f,m){var b;U((null===(b=m.url)||void 0===b?void 0:b.length)>0,y,"invalid-continue-uri"),U(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(U(m.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(U(m.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function An(){return(An=(0,d.Z)(function*(y,f,m){const b=(0,k.m9)(y),N={requestType:"PASSWORD_RESET",email:f};m&&Ql(b,N,m),yield gr(b,N)})).apply(this,arguments)}function Wo(){return(Wo=(0,d.Z)(function*(y,f,m){yield Kn((0,k.m9)(y),{oobCode:f,newPassword:m})})).apply(this,arguments)}function Ba(){return(Ba=(0,d.Z)(function*(y,f){yield oc((0,k.m9)(y),{oobCode:f})})).apply(this,arguments)}function Ua(y,f){return gc.apply(this,arguments)}function gc(){return(gc=(0,d.Z)(function*(y,f){const m=(0,k.m9)(y),b=yield Kn(m,{oobCode:f}),N=b.requestType;switch(U(N,m,"internal-error"),N){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":U(b.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":U(b.mfaInfo,m,"internal-error");default:U(b.email,m,"internal-error")}let O=null;return b.mfaInfo&&(O=Te._fromServerResponse(Dn(m),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:O},operation:N}})).apply(this,arguments)}function Bd(){return(Bd=(0,d.Z)(function*(y,f){const{data:m}=yield Ua((0,k.m9)(y),f);return m.email})).apply(this,arguments)}function xn(){return(xn=(0,d.Z)(function*(y,f,m){const b=Dn(y),N=yield Go(b,{returnSecureToken:!0,email:f,password:m}),O=yield Cr._fromIdTokenResponse(b,"signIn",N);return yield b._updateCurrentUser(O.user),O})).apply(this,arguments)}function vo(){return(vo=(0,d.Z)(function*(y,f,m){const b=(0,k.m9)(y),N={requestType:"EMAIL_SIGNIN",email:f};U(m.handleCodeInApp,b,"argument-error"),m&&Ql(b,N,m),yield Ul(b,N)})).apply(this,arguments)}function ja(){return(ja=(0,d.Z)(function*(y,f,m){const b=(0,k.m9)(y),N=Zi.credentialWithLink(f,m||ke());return U(N._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Cn(b,N)})).apply(this,arguments)}function Kg(y,f){return yc.apply(this,arguments)}function yc(){return(yc=(0,d.Z)(function*(y,f){return dn(y,"POST","/v1/accounts:createAuthUri",Ft(y,f))})).apply(this,arguments)}function Ga(){return(Ga=(0,d.Z)(function*(y,f){const b={identifier:f,continueUri:_t()?ke():"http://localhost"},{signinMethods:N}=yield Kg((0,k.m9)(y),b);return N||[]})).apply(this,arguments)}function $a(){return($a=(0,d.Z)(function*(y,f){const m=(0,k.m9)(y),N={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&Ql(m.auth,N,f);const{email:O}=yield Fn(m.auth,N);O!==y.email&&(yield y.reload())})).apply(this,arguments)}function tu(){return(tu=(0,d.Z)(function*(y,f,m){const b=(0,k.m9)(y),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};m&&Ql(b.auth,O,m);const{email:W}=yield lc(b.auth,O);W!==y.email&&(yield y.reload())})).apply(this,arguments)}function nu(y,f){return wc.apply(this,arguments)}function wc(){return(wc=(0,d.Z)(function*(y,f){return dn(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ec(){return(Ec=(0,d.Z)(function*(y,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const b=(0,k.m9)(y),O={idToken:yield b.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},W=yield Er(b,nu(b.auth,O));b.displayName=W.displayName||null,b.photoURL=W.photoUrl||null;const ge=b.providerData.find(({providerId:Ue})=>"password"===Ue);ge&&(ge.displayName=b.displayName,ge.photoURL=b.photoURL),yield b._updateTokensIfNecessary(W)})).apply(this,arguments)}function wo(y,f,m){return ru.apply(this,arguments)}function ru(){return(ru=(0,d.Z)(function*(y,f,m){const{auth:b}=y,O={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(O.email=f),m&&(O.password=m);const W=yield Er(y,hn(b,O));yield y._updateTokensIfNecessary(W,!0)})).apply(this,arguments)}class si{constructor(f,m,b={}){this.isNewUser=f,this.providerId=m,this.profile=b}}class mn extends si{constructor(f,m,b,N){super(f,m,b),this.username=N}}class Hd extends si{constructor(f,m){super(f,"facebook.com",m)}}class Ic extends mn{constructor(f,m){super(f,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class $f extends si{constructor(f,m){super(f,"google.com",m)}}class Cc extends mn{constructor(f,m,b){super(f,"twitter.com",m,b)}}function iu(y){const{user:f,_tokenResponse:m}=y;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function er(y){var f,m;if(!y)return null;const{providerId:b}=y,N=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},O=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!b&&y?.idToken){const W=null===(m=null===(f=pt(y.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(W)return new si(O,"anonymous"!==W&&"custom"!==W?W:null)}if(!b)return null;switch(b){case"facebook.com":return new Hd(O,N);case"github.com":return new Ic(O,N);case"google.com":return new $f(O,N);case"twitter.com":return new Cc(O,N,y.screenName||null);case"custom":case"anonymous":return new si(O,null);default:return new si(O,b,N)}}(m)}class Eo{constructor(f,m,b){this.type=f,this.credential=m,this.auth=b}static _fromIdtoken(f,m){return new Eo("enroll",f,m)}static _fromMfaPendingCredential(f){return new Eo("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,b;if(f?.multiFactorSession){if(null!==(m=f.multiFactorSession)&&void 0!==m&&m.pendingCredential)return Eo._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(b=f.multiFactorSession)&&void 0!==b&&b.idToken)return Eo._fromIdtoken(f.multiFactorSession.idToken)}return null}}class ou{constructor(f,m,b){this.session=f,this.hints=m,this.signInResolver=b}static _fromError(f,m){const b=Dn(f),N=m.customData._serverResponse,O=(N.mfaInfo||[]).map(ge=>Te._fromServerResponse(b,ge));U(N.mfaPendingCredential,b,"internal-error");const W=Eo._fromMfaPendingCredential(N.mfaPendingCredential);return new ou(W,O,function(){var ge=(0,d.Z)(function*(Ue){const rt=yield Ue._process(b,W);delete N.mfaInfo,delete N.mfaPendingCredential;const Ct=Object.assign(Object.assign({},N),{idToken:rt.idToken,refreshToken:rt.refreshToken});switch(m.operationType){case"signIn":const vt=yield Cr._fromIdTokenResponse(b,m.operationType,Ct);return yield b._updateCurrentUser(vt.user),vt;case"reauthenticate":return U(m.user,b,"internal-error"),Cr._forOperation(m.user,m.operationType,Ct);default:Ne(b,"internal-error")}});return function(Ue){return ge.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,d.Z)(function*(){return m.signInResolver(f)})()}}function au(y,f){return dn(y,"POST","/v2/accounts/mfaEnrollment:start",Ft(y,f))}class Wf{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(b=>Te._fromServerResponse(f.auth,b)))})}static _fromUser(f){return new Wf(f)}getSession(){var f=this;return(0,d.Z)(function*(){return Eo._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,m){var b=this;return(0,d.Z)(function*(){const N=f,O=yield b.getSession(),W=yield Er(b.user,N._process(b.user.auth,O,m));return yield b.user._updateTokensIfNecessary(W),b.user.reload()})()}unenroll(f){var m=this;return(0,d.Z)(function*(){const b="string"==typeof f?f:f.uid,N=yield m.user.getIdToken(),O=yield Er(m.user,function Wd(y,f){return dn(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Ft(y,f))}(m.user.auth,{idToken:N,mfaEnrollmentId:b}));m.enrolledFactors=m.enrolledFactors.filter(({uid:W})=>W!==b),yield m.user._updateTokensIfNecessary(O);try{yield m.user.reload()}catch(W){if("auth/user-token-expired"!==W?.code)throw W}})()}}const Ko=new WeakMap,Io="__sak";class uu{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Io,"1"),this.storage.removeItem(Io),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const za=(()=>{class y extends uu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,b)=>this.onStorageEvent(m,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Wa(){const y=(0,k.z$)();return yt(y)||Ht(y)}()&&function wn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=fo(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const b of Object.keys(this.listeners)){const N=this.storage.getItem(b),O=this.localCache[b];N!==O&&m(b,O,N)}}onStorageEvent(m,b=!1){if(!m.key)return void this.forAllChangedKeys((ge,Ue,rt)=>{this.notifyListeners(ge,rt)});const N=m.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ge=this.storage.getItem(N);if(m.newValue!==ge)null!==m.newValue?this.storage.setItem(N,m.newValue):this.storage.removeItem(N);else if(this.localCache[N]===m.newValue&&!b)return}const O=()=>{const ge=this.storage.getItem(N);!b&&this.localCache[N]===ge||this.notifyListeners(N,ge)},W=this.storage.getItem(N);!function Jn(){return(0,k.w1)()&&10===document.documentMode}()||W===m.newValue||m.newValue===m.oldValue?O():setTimeout(O,10)}notifyListeners(m,b){this.localCache[m]=b;const N=this.listeners[m];if(N)for(const O of Array.from(N))O(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,b,N)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:b,newValue:N}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(b)}_removeListener(m,b){this.listeners[m]&&(this.listeners[m].delete(b),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,b){var N=()=>super._set,O=this;return(0,d.Z)(function*(){yield N().call(O,m,b),O.localCache[m]=JSON.stringify(b)})()}_get(m){var b=()=>super._get,N=this;return(0,d.Z)(function*(){const O=yield b().call(N,m);return N.localCache[m]=JSON.stringify(O),O})()}_remove(m){var b=()=>super._remove,N=this;return(0,d.Z)(function*(){yield b().call(N,m),delete N.localCache[m]})()}}return y.type="LOCAL",y})(),Qi=(()=>{class y extends uu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,b){}_removeListener(m,b){}}return y.type="SESSION",y})();let Kd=(()=>{class y{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const b=this.receivers.find(O=>O.isListeningto(m));if(b)return b;const N=new y(m);return this.receivers.push(N),N}isListeningto(m){return this.eventTarget===m}handleEvent(m){var b=this;return(0,d.Z)(function*(){const N=m,{eventId:O,eventType:W,data:ge}=N.data,Ue=b.handlersMap[W];if(!Ue?.size)return;N.ports[0].postMessage({status:"ack",eventId:O,eventType:W});const rt=Array.from(Ue).map(function(){var vt=(0,d.Z)(function*(sr){return sr(N.origin,ge)});return function(sr){return vt.apply(this,arguments)}}()),Ct=yield function Ka(y){return Promise.all(y.map(function(){var f=(0,d.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(b){return{fulfilled:!1,reason:b}}});return function(m){return f.apply(this,arguments)}}()))}(rt);N.ports[0].postMessage({status:"done",eventId:O,eventType:W,response:Ct})})()}_subscribe(m,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(b)}_unsubscribe(m,b){this.handlersMap[m]&&b&&this.handlersMap[m].delete(b),(!b||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Za(y="",f=10){let m="";for(let b=0;b<f;b++)m+=Math.floor(10*Math.random());return y+m}class Tc{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,b=50){var N=this;return(0,d.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let W,ge;return new Promise((Ue,rt)=>{const Ct=Za("",20);O.port1.start();const vt=setTimeout(()=>{rt(new Error("unsupported_event"))},b);ge={messageChannel:O,onMessage(sr){const or=sr;if(or.data.eventId===Ct)switch(or.data.status){case"ack":clearTimeout(vt),W=setTimeout(()=>{rt(new Error("timeout"))},3e3);break;case"done":clearTimeout(W),Ue(or.data.response);break;default:clearTimeout(vt),clearTimeout(W),rt(new Error("invalid_response"))}}},N.handlers.add(ge),O.port1.addEventListener("message",ge.onMessage),N.target.postMessage({eventType:f,eventId:Ct,data:m},[O.port2])}).finally(()=>{ge&&N.removeMessageHandler(ge)})})()}}function Ln(){return window}function cu(){return typeof Ln().WorkerGlobalScope<"u"&&"function"==typeof Ln().importScripts}function Ya(){return(Ya=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Qs="firebaseLocalStorageDb",Js="firebaseLocalStorage",Sc="fbase_key";class To{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Qa(y,f){return y.transaction([Js],f?"readwrite":"readonly").objectStore(Js)}function Yo(){const y=indexedDB.open(Qs,1);return new Promise((f,m)=>{y.addEventListener("error",()=>{m(y.error)}),y.addEventListener("upgradeneeded",()=>{const b=y.result;try{b.createObjectStore(Js,{keyPath:Sc})}catch(N){m(N)}}),y.addEventListener("success",(0,d.Z)(function*(){const b=y.result;b.objectStoreNames.contains(Js)?f(b):(b.close(),yield function Yd(){const y=indexedDB.deleteDatabase(Qs);return new To(y).toPromise()}(),f(yield Yo()))}))})}function ys(y,f,m){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,d.Z)(function*(y,f,m){const b=Qa(y,!0).put({[Sc]:f,value:m});return new To(b).toPromise()})).apply(this,arguments)}function Ja(){return(Ja=(0,d.Z)(function*(y,f){const m=Qa(y,!1).get(f),b=yield new To(m).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function So(y,f){const m=Qa(y,!0).delete(f);return new To(m).toPromise()}const Qo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,d.Z)(function*(){return m.db||(m.db=yield Yo()),m.db})()}_withRetries(m){var b=this;return(0,d.Z)(function*(){let N=0;for(;;)try{const O=yield b._openDb();return yield m(O)}catch(O){if(N++>3)throw O;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,d.Z)(function*(){return cu()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,d.Z)(function*(){m.receiver=Kd._getInstance(function hu(){return cu()?self:null}()),m.receiver._subscribe("keyChanged",function(){var b=(0,d.Z)(function*(N,O){return{keyProcessed:(yield m._poll()).includes(O.key)}});return function(N,O){return b.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var b=(0,d.Z)(function*(N,O){return["keyChanged"]});return function(N,O){return b.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,d.Z)(function*(){var b,N;if(m.activeServiceWorker=yield function Co(){return Ya.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Tc(m.activeServiceWorker);const O=yield m.sender._send("ping",{},800);!O||(null===(b=O[0])||void 0===b?void 0:b.fulfilled)&&(null===(N=O[0])||void 0===N?void 0:N.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var b=this;return(0,d.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function du(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:m},b.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Yo();return yield ys(m,Io,"1"),yield So(m,Io),!0}catch{}return!1})()}_withPendingWrite(m){var b=this;return(0,d.Z)(function*(){b.pendingWrites++;try{yield m()}finally{b.pendingWrites--}})()}_set(m,b){var N=this;return(0,d.Z)(function*(){return N._withPendingWrite((0,d.Z)(function*(){return yield N._withRetries(O=>ys(O,m,b)),N.localCache[m]=b,N.notifyServiceWorker(m)}))})()}_get(m){var b=this;return(0,d.Z)(function*(){const N=yield b._withRetries(O=>function fu(y,f){return Ja.apply(this,arguments)}(O,m));return b.localCache[m]=N,N})()}_remove(m){var b=this;return(0,d.Z)(function*(){return b._withPendingWrite((0,d.Z)(function*(){return yield b._withRetries(N=>So(N,m)),delete b.localCache[m],b.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,d.Z)(function*(){const b=yield m._withRetries(W=>{const ge=Qa(W,!1).getAll();return new To(ge).toPromise()});if(!b)return[];if(0!==m.pendingWrites)return[];const N=[],O=new Set;for(const{fbase_key:W,value:ge}of b)O.add(W),JSON.stringify(m.localCache[W])!==JSON.stringify(ge)&&(m.notifyListeners(W,ge),N.push(W));for(const W of Object.keys(m.localCache))m.localCache[W]&&!O.has(W)&&(m.notifyListeners(W,null),N.push(W));return N})()}notifyListeners(m,b){this.localCache[m]=b;const N=this.listeners[m];if(N)for(const O of Array.from(N))O(b)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(b)}_removeListener(m,b){this.listeners[m]&&(this.listeners[m].delete(b),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Jo(y,f){return dn(y,"POST","/v2/accounts/mfaSignIn:start",Ft(y,f))}function Xs(){return(Xs=(0,d.Z)(function*(y){return(yield dn(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ea(y){return new Promise((f,m)=>{const b=document.createElement("script");b.setAttribute("src",y),b.onload=f,b.onerror=N=>{const O=be("internal-error");O.customData=N,m(O)},b.type="text/javascript",b.charset="UTF-8",function Xo(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(b)})}function mu(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Xa=1e12;class _n{constructor(f){this.auth=f,this.counter=Xa,this._widgets=new Map}render(f,m){const b=this.counter;return this._widgets.set(b,new Zg(f,this.auth.name,m||{})),this.counter++,b}reset(f){var m;const b=f||Xa;null===(m=this._widgets.get(b))||void 0===m||m.delete(),this._widgets.delete(b)}getResponse(f){var m;return(null===(m=this._widgets.get(f||Xa))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,d.Z)(function*(){var b;return null===(b=m._widgets.get(f||Xa))||void 0===b||b.execute(),""})()}}class Zg{constructor(f,m,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const N="string"==typeof f?document.getElementById(f):f;U(N,"argument-error",{appName:m}),this.container=N,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ay(y){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<y;b++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Yg=mu("rcb"),xy=new ln(3e4,6e4);class zf{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=Ln().grecaptcha)||void 0===f||!f.render)}load(f,m=""){return U(function Iw(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(m),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Ln().grecaptcha):new Promise((b,N)=>{const O=Ln().setTimeout(()=>{N(be(f,"network-request-failed"))},xy.get());Ln()[Yg]=()=>{Ln().clearTimeout(O),delete Ln()[Yg];const ge=Ln().grecaptcha;if(!ge)return void N(be(f,"internal-error"));const Ue=ge.render;ge.render=(rt,Ct)=>{const vt=Ue(rt,Ct);return this.counter++,vt},this.hostLanguage=m,b(ge)},ea(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:Yg,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(O),N(be(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var m;return!(null===(m=Ln().grecaptcha)||void 0===m||!m.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class xc{load(f){return(0,d.Z)(function*(){return new _n(f)})()}clearedOneInstance(){}}const Oy="recaptcha",Ry={theme:"light",type:"image"};class yr{constructor(f,m=Object.assign({},Ry),b){this.parameters=m,this.type=Oy,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Dn(b),this.isInvisible="invisible"===this.parameters.size,U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const N="string"==typeof f?document.getElementById(f):f;U(N,this.auth,"argument-error"),this.container=N,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new xc:new zf,this.validateStartingState()}verify(){var f=this;return(0,d.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),b=f.getAssertedRecaptcha();return b.getResponse(m)||new Promise(O=>{const W=ge=>{!ge||(f.tokenChangeListeners.delete(W),O(ge))};f.tokenChangeListeners.add(W),f.isInvisible&&b.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){U(!this.parameters.sitekey,this.auth,"argument-error"),U(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(b=>b(m)),"function"==typeof f)f(m);else if("string"==typeof f){const b=Ln()[f];"function"==typeof b&&b(m)}}}assertNotDestroyed(){U(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,d.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const b=document.createElement("div");m.appendChild(b),m=b}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,d.Z)(function*(){U(_t()&&!cu(),f.auth,"internal-error"),yield function vr(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function oi(y){return Xs.apply(this,arguments)}(f.auth);U(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return U(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class bs{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=Ks._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function Qt(){return(Qt=(0,d.Z)(function*(y,f,m){const b=Dn(y),N=yield eo(b,f,(0,k.m9)(m));return new bs(N,O=>Cn(b,O))})).apply(this,arguments)}function Je(){return(Je=(0,d.Z)(function*(y,f,m){const b=(0,k.m9)(y);yield zt(!1,b,"phone");const N=yield eo(b.auth,f,(0,k.m9)(m));return new bs(N,O=>Kl(b,O))})).apply(this,arguments)}function Ji(){return(Ji=(0,d.Z)(function*(y,f,m){const b=(0,k.m9)(y),N=yield eo(b.auth,f,(0,k.m9)(m));return new bs(N,O=>Zl(b,O))})).apply(this,arguments)}function eo(y,f,m){return to.apply(this,arguments)}function to(){return(to=(0,d.Z)(function*(y,f,m){var b;const N=yield m.verify();try{let O;if(U("string"==typeof N,y,"argument-error"),U(m.type===Oy,y,"argument-error"),O="string"==typeof f?{phoneNumber:f}:f,"session"in O){const W=O.session;if("phoneNumber"in O)return U("enroll"===W.type,y,"internal-error"),(yield au(y,{idToken:W.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:N}})).phoneSessionInfo.sessionInfo;{U("signin"===W.type,y,"internal-error");const ge=(null===(b=O.multiFactorHint)||void 0===b?void 0:b.uid)||O.multiFactorUid;return U(ge,y,"missing-multi-factor-info"),(yield Jo(y,{mfaPendingCredential:W.credential,mfaEnrollmentId:ge,phoneSignInInfo:{recaptchaToken:N}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:W}=yield Gg(y,{phoneNumber:O.phoneNumber,recaptchaToken:N});return W}}finally{m._reset()}})).apply(this,arguments)}function ws(){return(ws=(0,d.Z)(function*(y,f){yield $o((0,k.m9)(y),f)})).apply(this,arguments)}let pn=(()=>{class y{constructor(m){this.providerId=y.PROVIDER_ID,this.auth=Dn(m)}verifyPhoneNumber(m,b){return eo(this.auth,m,(0,k.m9)(b))}static credential(m,b){return Ks._fromVerification(m,b)}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:b,temporaryProof:N}=m;return b&&N?Ks._fromTokenResponse(b,N):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Ds(y,f){return f?ie(f):(U(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class gt extends Ir{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Xn(f,this._buildIdpRequest())}_linkToIdToken(f,m){return Xn(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return Xn(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function ai(y){return Pi(y.auth,new gt(y),y.bypassAuthState)}function Es(y){const{auth:f,user:m}=y;return U(m,f,"internal-error"),yo(m,new gt(y),y.bypassAuthState)}function li(y){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,d.Z)(function*(y){const{auth:f,user:m}=y;return U(m,f,"internal-error"),$o(m,new gt(y),y.bypassAuthState)})).apply(this,arguments)}class el{constructor(f,m,b,N,O=!1){this.auth=f,this.resolver=b,this.user=N,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,d.Z)(function*(b,N){f.pendingPromise={resolve:b,reject:N};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(O){f.reject(O)}});return function(b,N){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,d.Z)(function*(){const{urlResponse:b,sessionId:N,postBody:O,tenantId:W,error:ge,type:Ue}=f;if(ge)return void m.reject(ge);const rt={auth:m.auth,requestUri:b,sessionId:N,tenantId:W||void 0,postBody:O||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Ue)(rt))}catch(Ct){m.reject(Ct)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return ai;case"linkViaPopup":case"linkViaRedirect":return li;case"reauthViaPopup":case"reauthViaRedirect":return Es;default:Ne(this.auth,"internal-error")}}resolve(f){z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Bn=new ln(2e3,1e4);function na(){return(na=(0,d.Z)(function*(y,f,m){const b=Dn(y);je(y,f,hs);const N=Ds(b,m);return new Tt(b,"signInViaPopup",f,N).executeNotNull()})).apply(this,arguments)}function bi(){return(bi=(0,d.Z)(function*(y,f,m){const b=(0,k.m9)(y);je(b.auth,f,hs);const N=Ds(b.auth,m);return new Tt(b.auth,"reauthViaPopup",f,N,b).executeNotNull()})).apply(this,arguments)}function wi(){return(wi=(0,d.Z)(function*(y,f,m){const b=(0,k.m9)(y);je(b.auth,f,hs);const N=Ds(b.auth,m);return new Tt(b.auth,"linkViaPopup",f,N,b).executeNotNull()})).apply(this,arguments)}let Tt=(()=>{class y extends el{constructor(m,b,N,O,W){super(m,b,O,W),this.provider=N,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var m=this;return(0,d.Z)(function*(){const b=yield m.execute();return U(b,m.auth,"internal-error"),b})()}onExecution(){var m=this;return(0,d.Z)(function*(){z(1===m.filter.length,"Popup operations only handle one event");const b=Za();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],b),m.authWindow.associatedEvent=b,m.resolver._originValidation(m.auth).catch(N=>{m.reject(N)}),m.resolver._isIframeWebStorageSupported(m.auth,N=>{N||m.reject(be(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(be(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const m=()=>{var b,N;this.pollId=null!==(N=null===(b=this.authWindow)||void 0===b?void 0:b.window)&&void 0!==N&&N.closed?window.setTimeout(()=>{this.pollId=null,this.reject(be(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Bn.get())};m()}}return y.currentPopupAction=null,y})();const nr=new Map;class ut extends el{constructor(f,m,b=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,b),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,d.Z)(function*(){let b=nr.get(m.auth._key());if(!b){try{const O=(yield function ra(y,f){return Dt.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;b=()=>Promise.resolve(O)}catch(N){b=()=>Promise.reject(N)}nr.set(m.auth._key(),b)}return m.bypassAuthState||nr.set(m.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,b=this;return(0,d.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(b,f);if("unknown"!==f.type){if(f.eventId){const N=yield b.auth._redirectUserForId(f.eventId);if(N)return b.user=N,m().call(b,f);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function Dt(){return(Dt=(0,d.Z)(function*(y,f){const m=Jd(f),b=Xi(y);if(!(yield b._isAvailable()))return!1;const N="true"===(yield b._get(m));return yield b._remove(m),N})).apply(this,arguments)}function ia(y,f){return Di.apply(this,arguments)}function Di(){return(Di=(0,d.Z)(function*(y,f){return Xi(y)._set(Jd(f),"true")})).apply(this,arguments)}function oa(y,f){nr.set(y._key(),f)}function Xi(y){return ie(y._redirectPersistence)}function Jd(y){return q("pendingRedirect",y.config.apiKey,y.name)}function I(){return(I=(0,d.Z)(function*(y,f,m){const b=Dn(y);je(y,f,hs);const N=Ds(b,m);return yield ia(N,b),N._openRedirect(b,f,"signInViaRedirect")})).apply(this,arguments)}function L(){return(L=(0,d.Z)(function*(y,f,m){const b=(0,k.m9)(y);je(b.auth,f,hs);const N=Ds(b.auth,m);yield ia(N,b.auth);const O=yield St(b);return N._openRedirect(b.auth,f,"reauthViaRedirect",O)})).apply(this,arguments)}function Se(){return(Se=(0,d.Z)(function*(y,f,m){const b=(0,k.m9)(y);je(b.auth,f,hs);const N=Ds(b.auth,m);yield zt(!1,b,f.providerId),yield ia(N,b.auth);const O=yield St(b);return N._openRedirect(b.auth,f,"linkViaRedirect",O)})).apply(this,arguments)}function Qe(){return(Qe=(0,d.Z)(function*(y,f){return yield Dn(y)._initializationPromise,ht(y,f,!1)})).apply(this,arguments)}function ht(y,f){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,d.Z)(function*(y,f,m=!1){const b=Dn(y),N=Ds(b,f),W=yield new ut(b,N,m).execute();return W&&!m&&(delete W.user._redirectEventId,yield b._persistUserIfCurrent(W.user),yield b._setRedirectUser(null,f)),W})).apply(this,arguments)}function St(y){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,d.Z)(function*(y){const f=Za(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class Vr{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(f,b)&&(m=!0,this.sendToConsumer(f,b),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Sr(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return la(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var b;if(f.error&&!la(f)){const N=(null===(b=f.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";m.onError(be(this.auth,N))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const b=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&b}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(aa(f))}saveEventToCache(f){this.cachedEventUids.add(aa(f)),this.lastProcessedEventTime=Date.now()}}function aa(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function la({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===f?.code}function rr(y){return rl.apply(this,arguments)}function rl(){return(rl=(0,d.Z)(function*(y,f={}){return dn(y,"GET","/v1/projects",f)})).apply(this,arguments)}const Qg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Kf=/^https?/;function Zf(){return(Zf=(0,d.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield rr(y);for(const m of f)try{if(Xd(m))return}catch{}Ne(y,"unauthorized-domain")})).apply(this,arguments)}function Xd(y){const f=ke(),{protocol:m,hostname:b}=new URL(f);if(y.startsWith("chrome-extension://")){const W=new URL(y);return""===W.hostname&&""===b?"chrome-extension:"===m&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&W.hostname===b}if(!Kf.test(m))return!1;if(Qg.test(y))return b===y;const N=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+N+"|"+N+")$","i").test(b)}const Yf=new ln(3e4,6e4);function eh(){const y=Ln().___jsl;if(y?.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let m=0;m<y.CP.length;m++)y.CP[m]=null}let Mc=null;function Py(y){return Mc=Mc||function _u(y){return new Promise((f,m)=>{var b,N,O;function W(){eh(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{eh(),m(be(y,"network-request-failed"))},timeout:Yf.get()})}if(null!==(N=null===(b=Ln().gapi)||void 0===b?void 0:b.iframes)&&void 0!==N&&N.Iframe)f(gapi.iframes.getContext());else{if(null===(O=Ln().gapi)||void 0===O||!O.load){const ge=mu("iframefcb");return Ln()[ge]=()=>{gapi.load?W():m(be(y,"network-request-failed"))},ea(`https://apis.google.com/js/api.js?onload=${ge}`).catch(Ue=>m(Ue))}W()}}).catch(f=>{throw Mc=null,f})}(y),Mc}const th=new ln(5e3,15e3),nh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ly=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Oc(y){const f=y.config;U(f.authDomain,y,"auth-domain-config-required");const m=f.emulator?bn(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,b={apiKey:f.apiKey,appName:y.name,v:se.SDK_VERSION},N=Ly.get(y.config.apiHost);N&&(b.eid=N);const O=y._getFrameworks();return O.length&&(b.fw=O.join(",")),`${m}?${(0,k.xO)(b).slice(1)}`}function Xg(){return Xg=(0,d.Z)(function*(y){const f=yield Py(y),m=Ln().gapi;return U(m,y,"internal-error"),f.open({where:document.body,url:Oc(y),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nh,dontclear:!0},b=>new Promise(function(){var N=(0,d.Z)(function*(O,W){yield b.restyle({setHideOnLeave:!1});const ge=be(y,"network-request-failed"),Ue=Ln().setTimeout(()=>{W(ge)},th.get());function rt(){Ln().clearTimeout(Ue),O(b)}b.ping(rt).then(rt,()=>{W(ge)})});return function(O,W){return N.apply(this,arguments)}}()))}),Xg.apply(this,arguments)}const Jf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class rh{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Pc(y,f,m,b,N,O){U(y.config.authDomain,y,"auth-domain-config-required"),U(y.config.apiKey,y,"invalid-api-key");const W={apiKey:y.config.apiKey,appName:y.name,authType:m,redirectUrl:b,v:se.SDK_VERSION,eventId:N};if(f instanceof hs){f.setDefaultLanguage(y.languageCode),W.providerId=f.providerId||"",(0,k.xb)(f.getCustomParameters())||(W.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Ue,rt]of Object.entries(O||{}))W[Ue]=rt}if(f instanceof fs){const Ue=f.getScopes().filter(rt=>""!==rt);Ue.length>0&&(W.scopes=Ue.join(","))}y.tenantId&&(W.tid=y.tenantId);const ge=W;for(const Ue of Object.keys(ge))void 0===ge[Ue]&&delete ge[Ue];return`${function ep({config:y}){return y.emulator?bn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,k.xO)(ge).slice(1)}`}const sh="webStorageSupport";class oh extends class np{constructor(f){this.factorId=f}_process(f,m,b){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,b);case"signin":return this._finalizeSignIn(f,m.credential);default:return me("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new oh(f)}_finalizeEnroll(f,m,b){return function lu(y,f){return dn(y,"POST","/v2/accounts/mfaEnrollment:finalize",Ft(y,f))}(f,{idToken:m,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function gu(y,f){return dn(y,"POST","/v2/accounts/mfaSignIn:finalize",Ft(y,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let tm=(()=>{class y{constructor(){}static assertion(m){return oh._fromCredential(m)}}return y.FACTOR_ID="phone",y})();var yu="@firebase/auth";class rp{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,d.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(b=>{f(b?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);!m||(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function xo(){return window}function bu(){return(bu=(0,d.Z)(function*(y,f,m){var b;const{BuildInfo:N}=xo();z(f.sessionId,"AuthEvent did not contain a session ID");const O=yield uh(f.sessionId),W={};return Ht()?W.ibi=N.packageName:Wt()?W.apn=N.packageName:Ne(y,"operation-not-supported-in-this-environment"),N.displayName&&(W.appDisplayName=N.displayName),W.sessionId=O,Pc(y,m,f.type,void 0,null!==(b=f.eventId)&&void 0!==b?b:void 0,W)})).apply(this,arguments)}function Fc(){return(Fc=(0,d.Z)(function*(y){const{BuildInfo:f}=xo(),m={};Ht()?m.iosBundleId=f.packageName:Wt()?m.androidPackageName=f.packageName:Ne(y,"operation-not-supported-in-this-environment"),yield rr(y,m)})).apply(this,arguments)}function il(){return(il=(0,d.Z)(function*(y,f,m){const{cordova:b}=xo();let N=()=>{};try{yield new Promise((O,W)=>{let ge=null;function Ue(){var vt;O();const sr=null===(vt=b.plugins.browsertab)||void 0===vt?void 0:vt.close;"function"==typeof sr&&sr(),"function"==typeof m?.close&&m.close()}function rt(){ge||(ge=window.setTimeout(()=>{W(be(y,"redirect-cancelled-by-user"))},2e3))}function Ct(){"visible"===document?.visibilityState&&rt()}f.addPassiveListener(Ue),document.addEventListener("resume",rt,!1),Wt()&&document.addEventListener("visibilitychange",Ct,!1),N=()=>{f.removePassiveListener(Ue),document.removeEventListener("resume",rt,!1),document.removeEventListener("visibilitychange",Ct,!1),ge&&window.clearTimeout(ge)}})}finally{N()}})).apply(this,arguments)}function uh(y){return ch.apply(this,arguments)}function ch(){return(ch=(0,d.Z)(function*(y){const f=Gy(y),m=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(m)).map(N=>N.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Gy(y){if(z(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),m=new Uint8Array(f);for(let b=0;b<y.length;b++)m[b]=y.charCodeAt(b);return m}(0,k.Pz)("authIdTokenMaxAge"),function Ar(y){(0,se._registerComponent)(new ce.wA("auth",(f,{options:m})=>{const b=f.getProvider("app").getImmediate(),N=f.getProvider("heartbeat"),{apiKey:O,authDomain:W}=b.options;return((ge,Ue)=>{U(O&&!O.includes(":"),"invalid-api-key",{appName:ge.name}),U(!W?.includes(":"),"argument-error",{appName:ge.name});const rt={apiKey:O,authDomain:W,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gs(y)},Ct=new Lt(ge,Ue,rt);return function Fe(y,f){const m=f?.persistence||[],b=(Array.isArray(m)?m:[m]).map(ie);f?.errorMap&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(b,f?.popupRedirectResolver)}(Ct,m),Ct})(b,N)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,b)=>{f.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new ce.wA("auth-internal",f=>{const m=Dn(f.getProvider("auth").getImmediate());return new rp(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(yu,"0.21.0",function Nr(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,se.registerVersion)(yu,"0.21.0","esm2017")}("Browser");class dh extends Vr{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(f)),super.onEvent(f)}initialized(){var f=this;return(0,d.Z)(function*(){yield f.initPromise})()}}function Lc(y){return ol.apply(this,arguments)}function ol(){return(ol=(0,d.Z)(function*(y){const f=yield Vc()._get(Bc(y));return f&&(yield Vc()._remove(Bc(y))),f})).apply(this,arguments)}function wu(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const b=Math.floor(Math.random()*f.length);y.push(f.charAt(b))}return y.join("")}function Vc(){return ie(za)}function Bc(y){return q("authEvent",y.config.apiKey,y.name)}function es(y){if(!y?.includes("?"))return{};const[f,...m]=y.split("?");return(0,k.zd)(m.join("?"))}function xr(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:be("no-auth-event")}}function al(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function ph(y=(0,k.z$)()){return!("file:"!==al()&&"ionic:"!==al()&&"capacitor:"!==al()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function jc(){try{const y=self.localStorage,f=Za();if(y)return y.setItem(f,"1"),y.removeItem(f),!function up(y=(0,k.z$)()){return function gh(){return(0,k.w1)()&&11===document?.documentMode}()||function Hc(y=(0,k.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,k.hl)()}catch{return ca()&&(0,k.hl)()}return!1}function ca(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Gc(){return(function am(){return"http:"===al()||"https:"===al()}()||(0,k.ru)()||ph())&&!function ll(){return(0,k.b$)()||(0,k.UG)()}()&&jc()&&!ca()}function da(){return ph()&&typeof document<"u"}function ul(){return(ul=(0,d.Z)(function*(){return!!da()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const Li={LOCAL:"local",NONE:"none",SESSION:"session"},Mo=U,dp="persistence";function ha(y){return $c.apply(this,arguments)}function $c(){return($c=(0,d.Z)(function*(y){yield y._initializationPromise;const f=cl(),m=q(dp,y.config.apiKey,y.name);f&&f.setItem(m,y._getPersistence())})).apply(this,arguments)}function cl(){var y;try{return(null===(y=function cp(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const no=U;class Vi{constructor(){this.browserResolver=ie(class Is{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qi,this._completeRedirectFn=ht,this._overrideRedirectResult=oa}_openPopup(f,m,b,N){var O=this;return(0,d.Z)(function*(){var W;z(null===(W=O.eventManagers[f._key()])||void 0===W?void 0:W.manager,"_initialize() not called before _openPopup()");const ge=Pc(f,m,b,ke(),N);return function em(y,f,m,b=500,N=600){const O=Math.max((window.screen.availHeight-N)/2,0).toString(),W=Math.max((window.screen.availWidth-b)/2,0).toString();let ge="";const Ue=Object.assign(Object.assign({},Jf),{width:b.toString(),height:N.toString(),top:O,left:W}),rt=(0,k.z$)().toLowerCase();m&&(ge=Yt(rt)?"_blank":m),Ke(rt)&&(f=f||"http://localhost",Ue.scrollbars="yes");const Ct=Object.entries(Ue).reduce((sr,[or,ro])=>`${sr}${or}=${ro},`,"");if(function ri(y=(0,k.z$)()){var f;return Ht(y)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(rt)&&"_self"!==ge)return function Xf(y,f){const m=document.createElement("a");m.href=y,m.target=f;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(b)}(f||"",ge),new rh(null);const vt=window.open(f||"",ge,Ct);U(vt,y,"popup-blocked");try{vt.focus()}catch{}return new rh(vt)}(f,ge,Za())})()}_openRedirect(f,m,b,N){var O=this;return(0,d.Z)(function*(){return yield O._originValidation(f),function Fi(y){Ln().location.href=y}(Pc(f,m,b,ke(),N)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:N,promise:O}=this.eventManagers[m];return N?Promise.resolve(N):(z(O,"If manager is not set, promise should be"),O)}const b=this.initAndGetManager(f);return this.eventManagers[m]={promise:b},b.catch(()=>{delete this.eventManagers[m]}),b}initAndGetManager(f){var m=this;return(0,d.Z)(function*(){const b=yield function Qf(y){return Xg.apply(this,arguments)}(f),N=new Vr(f);return b.register("authEvent",O=>(U(O?.authEvent,f,"invalid-auth-event"),{status:N.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:N},m.iframes[f._key()]=b,N})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(sh,{type:sh},N=>{var O;const W=null===(O=N?.[0])||void 0===O?void 0:O[sh];void 0!==W&&m(!!W),Ne(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function ky(y){return Zf.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return fo()||yt()||Ht()}}),this.cordovaResolver=ie(class Du{constructor(){this._redirectPersistence=Qi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ht,this._overrideRedirectResult=oa}_initialize(f){var m=this;return(0,d.Z)(function*(){const b=f._key();let N=m.eventManagers.get(b);return N||(N=new dh(f),m.eventManagers.set(b,N),m.attachCallbackListeners(f,N)),N})()}_openPopup(f){Ne(f,"operation-not-supported-in-this-environment")}_openRedirect(f,m,b,N){var O=this;return(0,d.Z)(function*(){!function ap(y){var f,m,b,N,O,W,ge,Ue,rt,Ct;const vt=xo();U("function"==typeof(null===(f=vt?.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),U(typeof(null===(m=vt?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),U("function"==typeof(null===(O=null===(N=null===(b=vt?.cordova)||void 0===b?void 0:b.plugins)||void 0===N?void 0:N.browsertab)||void 0===O?void 0:O.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(Ue=null===(ge=null===(W=vt?.cordova)||void 0===W?void 0:W.plugins)||void 0===ge?void 0:ge.browsertab)||void 0===Ue?void 0:Ue.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(Ct=null===(rt=vt?.cordova)||void 0===rt?void 0:rt.InAppBrowser)||void 0===Ct?void 0:Ct.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const W=yield O._initialize(f);yield W.initialized(),W.resetRedirect(),function sa(){nr.clear()}(),yield O._originValidation(f);const ge=function rm(y,f,m=null){return{type:f,eventId:m,urlResponse:null,sessionId:wu(),postBody:null,tenantId:y.tenantId,error:be(y,"no-auth-event")}}(f,b,N);yield function lp(y,f){return Vc()._set(Bc(y),f)}(f,ge);const Ue=yield function vu(y,f,m){return bu.apply(this,arguments)}(f,ge,m),rt=yield function op(y){const{cordova:f}=xo();return new Promise(m=>{f.plugins.browsertab.isAvailable(b=>{let N=null;b?f.plugins.browsertab.openUrl(y):N=f.InAppBrowser.open(y,function pr(y=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),m(N)})})}(Ue);return function jy(y,f,m){return il.apply(this,arguments)}(f,W,rt)})()}_isIframeWebStorageSupported(f,m){throw new Error("Method not implemented.")}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Hy(y){return Fc.apply(this,arguments)}(f)),this.originValidationPromises[m]}attachCallbackListeners(f,m){const{universalLinks:b,handleOpenURL:N,BuildInfo:O}=xo(),W=setTimeout((0,d.Z)(function*(){yield Lc(f),m.onEvent(xr())}),500),ge=function(){var Ct=(0,d.Z)(function*(vt){clearTimeout(W);const sr=yield Lc(f);let or=null;sr&&vt?.url&&(or=function $y(y,f){var m,b;const N=function Wy(y){const f=es(y),m=f.link?decodeURIComponent(f.link):void 0,b=es(m).link,N=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return es(N).link||N||b||m||y}(f);if(N.includes("/__/auth/callback")){const O=es(N),W=O.firebaseError?function ua(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(O.firebaseError)):null,ge=null===(b=null===(m=W?.code)||void 0===m?void 0:m.split("auth/"))||void 0===b?void 0:b[1],Ue=ge?be(ge):null;return Ue?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:N,postBody:null}}return null}(sr,vt.url)),m.onEvent(or||xr())});return function(sr){return Ct.apply(this,arguments)}}();typeof b<"u"&&"function"==typeof b.subscribe&&b.subscribe(null,ge);const Ue=N,rt=`${O.packageName.toLowerCase()}://`;xo().handleOpenURL=function(){var Ct=(0,d.Z)(function*(vt){if(vt.toLowerCase().startsWith(rt)&&ge({url:vt}),"function"==typeof Ue)try{Ue(vt)}catch(sr){console.error(sr)}});return function(vt){return Ct.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Qi,this._completeRedirectFn=ht,this._overrideRedirectResult=oa}_initialize(f){var m=this;return(0,d.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,m,b,N){var O=this;return(0,d.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(f,m,b,N)})()}_openRedirect(f,m,b,N){var O=this;return(0,d.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(f,m,b,N)})()}_isIframeWebStorageSupported(f,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,m)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return da()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return no(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,d.Z)(function*(){if(f.underlyingResolver)return;const m=yield function mh(){return ul.apply(this,arguments)}();f.underlyingResolver=m?f.cordovaResolver:f.browserResolver})()}}function hp(y){return y.unwrap()}function _h(y){return Iu(y)}function Iu(y){const{_tokenResponse:f}=y instanceof k.ZR?y.customData:y;if(!f)return null;if(!(y instanceof k.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return pn.credentialFromResult(y);const m=f.providerId;if(!m||"password"===m)return null;let b;switch(m){case"google.com":b=jl;break;case"facebook.com":b=La;break;case"github.com":b=dc;break;case"twitter.com":b=ii;break;default:const{oauthIdToken:N,oauthAccessToken:O,oauthTokenSecret:W,pendingToken:ge,nonce:Ue}=f;return O||W||N||ge?ge?m.startsWith("saml.")?mr._create(m,ge):ds._fromParams({providerId:m,signInMethod:m,pendingToken:ge,idToken:N,accessToken:O}):new _o(m).credential({idToken:N,accessToken:O,rawNonce:Ue}):null}return y instanceof k.ZR?b.credentialFromError(y):b.credentialFromResult(y)}function ir(y,f){return f.catch(m=>{throw m instanceof k.ZR&&function yh(y,f){var m;const b=null===(m=f.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===f?.code)f.resolver=new vh(y,function Mn(y,f){var m;const b=(0,k.m9)(y),N=f;return U(f.customData.operationType,b,"argument-error"),U(null===(m=N.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,b,"argument-error"),ou._fromError(b,N)}(y,f));else if(b){const N=Iu(f),O=f;N&&(O.credential=N,O.tenantId=b.tenantId||void 0,O.email=b.email||void 0,O.phoneNumber=b.phoneNumber||void 0)}}(y,m),m}).then(m=>{const N=m.user;return{operationType:m.operationType,credential:_h(m),additionalUserInfo:iu(m),user:Cs.getOrCreate(N)}})}function ts(y,f){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,d.Z)(function*(y,f){const m=yield f;return{verificationId:m.verificationId,confirm:b=>ir(y,m.confirm(b))}})).apply(this,arguments)}class vh{constructor(f,m){this.resolver=m,this.auth=function fp(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return ir(hp(this.auth),this.resolver.resolveSignIn(f))}}class Cs{constructor(f){this._delegate=f,this.multiFactor=function Zo(y){const f=(0,k.m9)(y);return Ko.has(f)||Ko.set(f,Wf._fromUser(f)),Ko.get(f)}(f)}static getOrCreate(f){return Cs.USER_MAP.has(f)||Cs.USER_MAP.set(f,new Cs(f)),Cs.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var m=this;return(0,d.Z)(function*(){return ir(m.auth,Kl(m._delegate,f))})()}linkWithPhoneNumber(f,m){var b=this;return(0,d.Z)(function*(){return ts(b.auth,function Vn(y,f,m){return Je.apply(this,arguments)}(b._delegate,f,m))})()}linkWithPopup(f){var m=this;return(0,d.Z)(function*(){return ir(m.auth,function tl(y,f,m){return wi.apply(this,arguments)}(m._delegate,f,Vi))})()}linkWithRedirect(f){var m=this;return(0,d.Z)(function*(){return yield ha(Dn(m.auth)),function Y(y,f,m){return function re(y,f,m){return Se.apply(this,arguments)}(y,f,m)}(m._delegate,f,Vi)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var m=this;return(0,d.Z)(function*(){return ir(m.auth,Zl(m._delegate,f))})()}reauthenticateWithPhoneNumber(f,m){return ts(this.auth,function yn(y,f,m){return Ji.apply(this,arguments)}(this._delegate,f,m))}reauthenticateWithPopup(f){return ir(this.auth,function _e(y,f,m){return bi.apply(this,arguments)}(this._delegate,f,Vi))}reauthenticateWithRedirect(f){var m=this;return(0,d.Z)(function*(){return yield ha(Dn(m.auth)),function T(y,f,m){return function x(y,f,m){return L.apply(this,arguments)}(y,f,m)}(m._delegate,f,Vi)})()}sendEmailVerification(f){return function vc(y,f){return $a.apply(this,arguments)}(this._delegate,f)}unlink(f){var m=this;return(0,d.Z)(function*(){return yield function Lr(y,f){return $l.apply(this,arguments)}(m._delegate,f),m})()}updateEmail(f){return function Ud(y,f){return wo((0,k.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function bo(y,f){return wo((0,k.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function tr(y,f){return ws.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Dc(y,f){return Ec.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,m){return function bc(y,f,m){return tu.apply(this,arguments)}(this._delegate,f,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Cs.USER_MAP=new WeakMap;const un=U;let fa=(()=>{class y{constructor(m,b){if(this.app=m,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:N}=m.options;un(N,"invalid-api-key",{appName:m.name}),un(N,"invalid-api-key",{appName:m.name});const O=typeof window<"u"?Vi:void 0;this._delegate=b.initialize({options:{persistence:Ts(N,m.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(De),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Cs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,b){!function Vl(y,f,m){const b=Dn(y);U(b._canInitEmulator,b,"emulator-config-failed"),U(/^https?:\/\//.test(f),b,"invalid-emulator-scheme");const N=!!m?.disableWarnings,O=qi(f),{host:W,port:ge}=function qn(y){const f=qi(y),m=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!m)return{host:"",port:null};const b=m[2].split("@").pop()||"",N=/^(\[[^\]]+\])(:|$)/.exec(b);if(N){const O=N[1];return{host:O,port:$s(b.substr(O.length+1))}}{const[O,W]=b.split(":");return{host:O,port:$s(W)}}}(f);b.config.emulator={url:`${O}//${W}${null===ge?"":`:${ge}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:W,port:ge,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:N})}),N||function Ws(){function y(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,m,b)}applyActionCode(m){return function vi(y,f){return Ba.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Ua(this._delegate,m)}confirmPasswordReset(m,b){return function Xl(y,f,m){return Wo.apply(this,arguments)}(this._delegate,m,b)}createUserWithEmailAndPassword(m,b){var N=this;return(0,d.Z)(function*(){return ir(N._delegate,function Ha(y,f,m){return xn.apply(this,arguments)}(N._delegate,m,b))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function eu(y,f){return Ga.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function _s(y,f){return"EMAIL_SIGNIN"===Hl.parseLink(f)?.operation}(0,m)}getRedirectResult(){var m=this;return(0,d.Z)(function*(){un(Gc(),m._delegate,"operation-not-supported-in-this-environment");const b=yield function nt(y,f){return Qe.apply(this,arguments)}(m._delegate,Vi);return b?ir(m._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function sm(y,f){Dn(y)._logFramework(f)}(this._delegate,m)}onAuthStateChanged(m,b,N){const{next:O,error:W,complete:ge}=pa(m,b,N);return this._delegate.onAuthStateChanged(O,W,ge)}onIdTokenChanged(m,b,N){const{next:O,error:W,complete:ge}=pa(m,b,N);return this._delegate.onIdTokenChanged(O,W,ge)}sendSignInLinkToEmail(m,b){return function _c(y,f,m){return vo.apply(this,arguments)}(this._delegate,m,b)}sendPasswordResetEmail(m,b){return function Jl(y,f,m){return An.apply(this,arguments)}(this._delegate,m,b||void 0)}setPersistence(m){var b=this;return(0,d.Z)(function*(){let N;switch(function lm(y,f){Mo(Object.values(Li).includes(f),y,"invalid-persistence-type"),(0,k.b$)()?Mo(f!==Li.SESSION,y,"unsupported-persistence-type"):(0,k.UG)()?Mo(f===Li.NONE,y,"unsupported-persistence-type"):ca()?Mo(f===Li.NONE||f===Li.LOCAL&&(0,k.hl)(),y,"unsupported-persistence-type"):Mo(f===Li.NONE||jc(),y,"unsupported-persistence-type")}(b._delegate,m),m){case Li.SESSION:N=Qi;break;case Li.LOCAL:N=(yield ie(Qo)._isAvailable())?Qo:za;break;case Li.NONE:N=B;break;default:return Ne("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(N)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return ir(this._delegate,function Hf(y){return Nn.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return ir(this._delegate,Cn(this._delegate,m))}signInWithCustomToken(m){return ir(this._delegate,function pc(y,f){return Va.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,b){return ir(this._delegate,function Yi(y,f,m){return Cn((0,k.m9)(y),Zi.credential(f,m))}(this._delegate,m,b))}signInWithEmailLink(m,b){return ir(this._delegate,function qg(y,f,m){return ja.apply(this,arguments)}(this._delegate,m,b))}signInWithPhoneNumber(m,b){return ts(this._delegate,function Tr(y,f,m){return Qt.apply(this,arguments)}(this._delegate,m,b))}signInWithPopup(m){var b=this;return(0,d.Z)(function*(){return un(Gc(),b._delegate,"operation-not-supported-in-this-environment"),ir(b._delegate,function Qd(y,f,m){return na.apply(this,arguments)}(b._delegate,m,Vi))})()}signInWithRedirect(m){var b=this;return(0,d.Z)(function*(){return un(Gc(),b._delegate,"operation-not-supported-in-this-environment"),yield ha(b._delegate),function Un(y,f,m){return function qf(y,f,m){return I.apply(this,arguments)}(y,f,m)}(b._delegate,m,Vi)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function mc(y,f){return Bd.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Li,y})();function pa(y,f,m){let b=y;"function"!=typeof y&&({next:b,error:f,complete:m}=y);const N=b;return{next:W=>N(W&&Cs.getOrCreate(W)),error:f,complete:m}}function Ts(y,f){const m=function Eu(y,f){const m=cl();if(!m)return[];const b=q(dp,y,f);switch(m.getItem(b)){case Li.NONE:return[B];case Li.LOCAL:return[Qo,Qi];case Li.SESSION:return[Qi];default:return[]}}(y,f);if(typeof self<"u"&&!m.includes(Qo)&&m.push(Qo),typeof window<"u")for(const b of[za,Qi])m.includes(b)||m.push(b);return m.includes(B)||m.push(B),m}class pp{constructor(){this.providerId="phone",this._delegate=new pn(hp(X.Z.auth()))}static credential(f,m){return pn.credential(f,m)}verifyPhoneNumber(f,m){return this._delegate.verifyPhoneNumber(f,m)}unwrap(){return this._delegate}}pp.PHONE_SIGN_IN_METHOD=pn.PHONE_SIGN_IN_METHOD,pp.PROVIDER_ID=pn.PROVIDER_ID;const um=U;class Cw{constructor(f,m,b=X.Z.app()){var N;um(null===(N=b.options)||void 0===N?void 0:N.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new yr(f,m,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function gp(y){y.INTERNAL.registerComponent(new ce.wA("auth-compat",f=>{const m=f.getProvider("app-compat").getImmediate(),b=f.getProvider("auth");return new fa(m,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Zi,FacebookAuthProvider:La,GithubAuthProvider:dc,GoogleAuthProvider:jl,OAuthProvider:_o,SAMLAuthProvider:_i,PhoneAuthProvider:pp,PhoneMultiFactorGenerator:tm,RecaptchaVerifier:Cw,TwitterAuthProvider:ii,Auth:fa,AuthCredential:Ir,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.3.0")}(X.Z)},8766:(ft,Ce,P)=>{P.d(Ce,{Lj:()=>Ne,X3:()=>dt});var d=P(5861);let k,se;const ce=new WeakMap,he=new WeakMap,fe=new WeakMap,H=new WeakMap,j=new WeakMap;let xe={get(U,me,z){if(U instanceof IDBTransaction){if("done"===me)return he.get(U);if("objectStoreNames"===me)return U.objectStoreNames||fe.get(U);if("store"===me)return z.objectStoreNames[1]?void 0:z.objectStore(z.objectStoreNames[0])}return pe(U[me])},set:(U,me,z)=>(U[me]=z,!0),has:(U,me)=>U instanceof IDBTransaction&&("done"===me||"store"===me)||me in U};function ye(U){return"function"==typeof U?function lt(U){return U!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function de(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(U)?function(...me){return U.apply(it(this),me),pe(ce.get(this))}:function(...me){return pe(U.apply(it(this),me))}:function(me,...z){const J=U.call(it(this),me,...z);return fe.set(J,me.sort?me.sort():[me]),pe(J)}}(U):(U instanceof IDBTransaction&&function Le(U){if(he.has(U))return;const me=new Promise((z,J)=>{const ie=()=>{U.removeEventListener("complete",ne),U.removeEventListener("error",Fe),U.removeEventListener("abort",Fe)},ne=()=>{z(),ie()},Fe=()=>{J(U.error||new DOMException("AbortError","AbortError")),ie()};U.addEventListener("complete",ne),U.addEventListener("error",Fe),U.addEventListener("abort",Fe)});he.set(U,me)}(U),((U,me)=>me.some(z=>U instanceof z))(U,function oe(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(U,xe):U)}function pe(U){if(U instanceof IDBRequest)return function K(U){const me=new Promise((z,J)=>{const ie=()=>{U.removeEventListener("success",ne),U.removeEventListener("error",Fe)},ne=()=>{z(pe(U.result)),ie()},Fe=()=>{J(U.error),ie()};U.addEventListener("success",ne),U.addEventListener("error",Fe)});return me.then(z=>{z instanceof IDBCursor&&ce.set(z,U)}).catch(()=>{}),j.set(me,U),me}(U);if(H.has(U))return H.get(U);const me=ye(U);return me!==U&&(H.set(U,me),j.set(me,U)),me}const it=U=>j.get(U);function dt(U,me,{blocked:z,upgrade:J,blocking:ie,terminated:ne}={}){const Fe=indexedDB.open(U,me),ke=pe(Fe);return J&&Fe.addEventListener("upgradeneeded",_t=>{J(pe(Fe.result),_t.oldVersion,_t.newVersion,pe(Fe.transaction))}),z&&Fe.addEventListener("blocked",()=>z()),ke.then(_t=>{ne&&_t.addEventListener("close",()=>ne()),ie&&_t.addEventListener("versionchange",()=>ie())}).catch(()=>{}),ke}function Ne(U,{blocked:me}={}){const z=indexedDB.deleteDatabase(U);return me&&z.addEventListener("blocked",()=>me()),pe(z).then(()=>{})}const be=["get","getKey","getAll","getAllKeys","count"],Ee=["put","add","delete","clear"],je=new Map;function We(U,me){if(!(U instanceof IDBDatabase)||me in U||"string"!=typeof me)return;if(je.get(me))return je.get(me);const z=me.replace(/FromIndex$/,""),J=me!==z,ie=Ee.includes(z);if(!(z in(J?IDBIndex:IDBObjectStore).prototype)||!ie&&!be.includes(z))return;const ne=function(){var Fe=(0,d.Z)(function*(ke,..._t){const tn=this.transaction(ke,ie?"readwrite":"readonly");let jt=tn.store;return J&&(jt=jt.index(_t.shift())),(yield Promise.all([jt[z](..._t),ie&&tn.done]))[0]});return function(_t){return Fe.apply(this,arguments)}}();return je.set(me,ne),ne}!function De(U){xe=U(xe)}(U=>({...U,get:(me,z,J)=>We(me,z)||U.get(me,z,J),has:(me,z)=>!!We(me,z)||U.has(me,z)}))},5861:(ft,Ce,P)=>{function d(k,se,oe,de,ce,he,fe){try{var H=k[he](fe),j=H.value}catch(K){return void oe(K)}H.done?se(j):Promise.resolve(j).then(de,ce)}function X(k){return function(){var se=this,oe=arguments;return new Promise(function(de,ce){var he=k.apply(se,oe);function fe(j){d(he,de,ce,fe,H,"next",j)}function H(j){d(he,de,ce,fe,H,"throw",j)}fe(void 0)})}}P.d(Ce,{Z:()=>X})}},ft=>{ft(ft.s=5032)}]);